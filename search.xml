<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Linux kernelç¼–è¯‘è®°å½•</title>
    <url>/2021/10/10/Linux-kernel/</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡å‚è€ƒäº†<a href="https://linux.cn/article-9665-1.html">å¦‚ä½•ç¼–è¯‘ Linux å†…æ ¸</a></p>
</blockquote>
<h1 id="å¼€å§‹è¸©å‘"><a href="#å¼€å§‹è¸©å‘" class="headerlink" title="å¼€å§‹è¸©å‘"></a>å¼€å§‹è¸©å‘</h1><blockquote>
<p>ç¼–è¯‘çš„å†…æ ¸ç‰ˆæœ¬ä¸º5.14.9ï¼Œä¸”Linuxå‘è¡Œç‰ˆä¸ºUbuntu 20.04.3 LTS</p>
</blockquote>
<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><h3 id="å®‰è£…sshæœåŠ¡"><a href="#å®‰è£…sshæœåŠ¡" class="headerlink" title="å®‰è£…sshæœåŠ¡"></a>å®‰è£…sshæœåŠ¡</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo ps -e |grep ssh //æŸ¥çœ‹æ˜¯å¦æœ‰å®‰è£…sshæœåŠ¡</span><br><span class="line">sudo apt-get update //æ›´æ–°èµ„æºåˆ—è¡¨</span><br><span class="line">sudo apt-get install openssh-server //å®‰è£…</span><br><span class="line">udo ps -e |grep ssh //å†æ¬¡æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</span><br><span class="line">ifconfig //æŸ¥ip</span><br></pre></td></tr></table></figure>

<h3 id="ä¸‹è½½å†…æ ¸æºç "><a href="#ä¸‹è½½å†…æ ¸æºç " class="headerlink" title="ä¸‹è½½å†…æ ¸æºç "></a>ä¸‹è½½å†…æ ¸æºç </h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.14.9.tar.xz</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…ç¼–è¯‘ç¯å¢ƒ"><a href="#å®‰è£…ç¼–è¯‘ç¯å¢ƒ" class="headerlink" title="å®‰è£…ç¼–è¯‘ç¯å¢ƒ"></a>å®‰è£…ç¼–è¯‘ç¯å¢ƒ</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install git fakeroot build-essential ncurses-dev xz-utils libssl-dev bc flex libelf-dev bison</span><br></pre></td></tr></table></figure>

<h3 id="è§£å‹æºç "><a href="#è§£å‹æºç " class="headerlink" title="è§£å‹æºç "></a>è§£å‹æºç </h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo tar xvJf linux-5.14.9.tar.xz //å…ˆç”¨cpå‘½ä»¤æ‹·è´åˆ°usr/src/å†è§£å‹</span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®å†…æ ¸"><a href="#é…ç½®å†…æ ¸" class="headerlink" title="é…ç½®å†…æ ¸"></a>é…ç½®å†…æ ¸</h2><blockquote>
<p>ä»¥ä¸‹çš„å‘½ä»¤ä¸å‡ºæ„å¤–éƒ½éœ€è¦åœ¨å‰é¢åŠ <code>sudo</code></p>
</blockquote>
<p>é¦–å…ˆå¿…é¡»é…ç½®éœ€è¦åŒ…å«å“ªäº›æ¨¡å—ã€‚å®é™…ä¸Šï¼Œæœ‰ä¸€äº›éå¸¸ç®€å•çš„æ–¹å¼æ¥é…ç½®ã€‚ä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œä½ èƒ½æ‹·è´å½“å‰å†…æ ¸çš„é…ç½®æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨å¯é çš„ <code>menuconfig</code> å‘½ä»¤æ¥åšä»»ä½•å¿…è¦çš„æ›´æ”¹ã€‚ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥å®Œæˆï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo cp /boot/config-$(uname -r) .config</span><br></pre></td></tr></table></figure>

<p>æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶äº†ï¼Œè¾“å…¥å‘½ä»¤ <code>make menuconfig</code>ã€‚è¯¥å‘½ä»¤å°†æ‰“å¼€ä¸€ä¸ªé…ç½®å·¥å…·ï¼ˆå›¾ 1ï¼‰ï¼Œå®ƒå¯ä»¥è®©ä½ éå†æ¯ä¸ªå¯ç”¨æ¨¡å—ï¼Œç„¶åå¯ç”¨æˆ–è€…ç¦ç”¨ä½ éœ€è¦æˆ–è€…ä¸éœ€è¦çš„æ¨¡å—ã€‚</p>
<blockquote>
<p>æˆ‘ä¸ªäººæ˜¯ç›´æ¥è¿›å»é…ç½®ç•Œé¢ç„¶åexitçš„ï¼Œä¼°è®¡è¿™æ ·å°±ç›´æ¥é‡‡ç”¨æ‹·è´è¿‡æ¥çš„é…ç½®æ–‡ä»¶äº†ï¼Œä¸‹é¢çš„<code>make</code>å‘½ä»¤å°±ä¸éœ€è¦é€‰æ‹©ä¸€å †é—®é¢˜äº†</p>
</blockquote>
<blockquote>
<p><em><strong><u><a href="#%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95">å»ºè®®å…ˆçœ‹çœ‹ä¸‹é¢çš„å‘</a>,çœ‹å®Œå¯ä»¥çœäº‹ï¼</u></strong></em></p>
</blockquote>
<h3 id="ç¼–è¯‘å’Œå®‰è£…"><a href="#ç¼–è¯‘å’Œå®‰è£…" class="headerlink" title="ç¼–è¯‘å’Œå®‰è£…"></a>ç¼–è¯‘å’Œå®‰è£…</h3><p>è¿™é‡Œéœ€è¦çš„æ—¶é—´æ˜¯æœ€å¤šçš„ï¼Œæˆ‘ç»™äº†8gå†…å­˜ç»™è™šæ‹Ÿæœºï¼Œcpuå ç”¨59%ï¼Œæœ€åè·‘äº†55åˆ†é’Ÿ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo time make -jn //æœ€å¥½åœ¨å‰é¢åŠ time,ç»Ÿè®¡ä¸€ä¸‹æ—¶é—´</span><br></pre></td></tr></table></figure>

<blockquote>
<p><a href="https://blog.csdn.net/zl3090/article/details/89303583?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_title~default-0.no_search_link&spm=1001.2101.3001.4242">è¿™é‡Œè´´ä¸€ä¸‹ç½‘ä¸Šæœåˆ°çš„å¯¹-jnçš„ç†è§£</a>ï¼Œæ€»ç»“æ¥è¯´å°±æ˜¯nä¸€èˆ¬æ˜¯cpuæ ¸å¿ƒæ•°é‡çš„ä¸¤å€</p>
</blockquote>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/%E6%88%AA%E5%B1%8F2021-10-07%20%E4%B8%8A%E5%8D%8812.20.03.png"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/%E6%88%AA%E5%B1%8F2021-10-07%20%E4%B8%8A%E5%8D%882.03.48.png"></p>
<blockquote>
<p>æœ€å¥½åœ¨è¿™é‡Œå¼„ä¸ªå¿«ç…§ï¼Œè¿™æ ·å®‰è£…å®Œå†…æ ¸é‡å¯ä¹‹åå‡ºé—®é¢˜äº†è¿˜èƒ½é€€å›è¿™ä¸€æ­¥</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo make modules_install // å®‰è£…é‚£äº›ä¹‹å‰å¯ç”¨çš„æ¨¡å—</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/%E6%88%AA%E5%B1%8F2021-10-07%20%E4%B8%8A%E5%8D%882.09.09.png"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo make install //å®‰è£…å†…æ ¸</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/%E6%88%AA%E5%B1%8F2021-10-07%20%E4%B8%8A%E5%8D%882.10.31.png"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/%E6%88%AA%E5%B1%8F2021-10-07%20%E4%B8%8A%E5%8D%882.12.30.png"></p>
<h2 id="å¯åŠ¨å†…æ ¸ä½œä¸ºå¼•å¯¼"><a href="#å¯åŠ¨å†…æ ¸ä½œä¸ºå¼•å¯¼" class="headerlink" title="å¯åŠ¨å†…æ ¸ä½œä¸ºå¼•å¯¼"></a>å¯åŠ¨å†…æ ¸ä½œä¸ºå¼•å¯¼</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo update-initramfs -c -k 5.14.9</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo update-grub</span><br></pre></td></tr></table></figure>

<p>ç„¶åå°±å¯ä»¥é‡å¯ç³»ç»Ÿäº†</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo reboot</span><br><span class="line">uname -r //é‡å¯å®Œå¯ä»¥ç”¨è¿™ä¸ªçœ‹çœ‹å½“å‰å†…æ ¸</span><br></pre></td></tr></table></figure>

<blockquote>
<p>çœ‹å®Œæœ¬æ–‡è§‰å¾—æœ‰å¸®åŠ©çš„å¯ä»¥å»æœ¬äººçš„GitHubç‚¹ä¸ªfollowå“‡ï¼Œè¯´ä¸å®šè¿˜æœ‰ä¸‹ä¸€æ¬¡ä½œä¸šå‘¢</p>
</blockquote>
<h1 id="è¸©å‘è®°å½•"><a href="#è¸©å‘è®°å½•" class="headerlink" title="è¸©å‘è®°å½•"></a>è¸©å‘è®°å½•</h1><h2 id="makeçš„æ—¶å€™æç¤ºdebian-canonical-certs-pem"><a href="#makeçš„æ—¶å€™æç¤ºdebian-canonical-certs-pem" class="headerlink" title="makeçš„æ—¶å€™æç¤ºdebian/canonical-certs.pem"></a>makeçš„æ—¶å€™æç¤ºdebian/canonical-certs.pem</h2><blockquote>
<p>æ²¡æœ‰è§„åˆ™å¯åˆ¶ä½œç›®æ ‡â€œdebian/canonical-certs.pemâ€ï¼Œç”±â€œcerts/x509_certificate_listâ€ éœ€æ±‚ã€‚ åœæ­¢ã€‚<br>[Makefile:1858ï¼šcerts] é”™è¯¯ 2</p>
</blockquote>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211010225345232.png"></p>
<p>è¿™ä¸ªå‘å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªæ–¹æ³•è§£å†³ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim .config</span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨vimçš„æ­£å¸¸æ¨¡å¼ä¸‹ç›´æ¥è¾“å…¥<code>/debian</code>ç„¶åå›è½¦å°±èƒ½å®šä½åˆ°è¿™ä¸ªå­—ç¬¦ä¸²ä¸Šï¼ŒæŠŠè¯¥å­—ç¬¦ä¸²çš„å€¼æ”¹ä¸ºç©º</p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211010225809246.png"></p>
<p>ç„¶åç”¨<code>:w !sudo tee %</code>å¼ºè¡Œä¿å­˜ä¿®æ”¹ï¼Œæœ€å<code>:q!</code>å°±å¥½äº†</p>
<h2 id="makeæ¬¡æ•°è¿‡å¤šå¯¼è‡´No-space-left-on-device"><a href="#makeæ¬¡æ•°è¿‡å¤šå¯¼è‡´No-space-left-on-device" class="headerlink" title="makeæ¬¡æ•°è¿‡å¤šå¯¼è‡´No space left on device"></a>makeæ¬¡æ•°è¿‡å¤šå¯¼è‡´No space left on device</h2><blockquote>
<p>å—¨å‘€ï¼Œè¿™ä¸ªé—®é¢˜çš„æ ¹æœ¬åŸå› å°±æ˜¯è™šæ‹Ÿæœºç©ºé—´ç»™å°‘äº†ï¼Œä¸‹é¢çš„æ–¹æ³•åªèƒ½ç¼“è§£ä¸€ä¸‹ï¼Œå»ºè®®æ‰©å®¹</p>
<p><a href="https://blog.csdn.net/orange_612/article/details/79597905">è¿™é‡Œæ˜¯ç½‘ä¸Šæœçš„æ‰©å®¹æ•™ç¨‹</a>ï¼Œæ²¡å®è·µè¿‡ï¼Œè¯·è‡ªè¡Œæ“ä½œ</p>
</blockquote>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211010230837626.png"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211010230904891.png"></p>
<blockquote>
<p>é€šè¿‡è¿™ä¸ªæ–‡ç« è§£å†³çš„<a href="https://www.cnblogs.com/kaishirenshi/p/11343983.html">https://www.cnblogs.com/kaishirenshi/p/11343983.html</a></p>
<p>**<u>/dev/mapper/æ˜¯æŒ‚è½½åœ¨Linuxçš„æ ¹ç›®å½•çš„ï¼ˆMounted on /ï¼‰</u>**ï¼Œæ‰€ä»¥ä¸æ˜¯Ubuntuçš„å¦‚æœæ˜¯è¿™ä¸ªè·¯å¾„å‡ºé—®é¢˜çš„ï¼Œ<del>åº”è¯¥ä¹Ÿæ˜¯è¿™æ ·è§£å†³å§</del></p>
</blockquote>
<h3 id="å¯ä»¥æ¸…ç†ä¸€ä¸‹-dev-loop"><a href="#å¯ä»¥æ¸…ç†ä¸€ä¸‹-dev-loop" class="headerlink" title="å¯ä»¥æ¸…ç†ä¸€ä¸‹/dev/loop*"></a>å¯ä»¥æ¸…ç†ä¸€ä¸‹/dev/loop*</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt autoremove --purge snapd</span><br></pre></td></tr></table></figure>



<h3 id="å¯ä»¥ç›´æ¥æ‰©å®¹"><a href="#å¯ä»¥ç›´æ¥æ‰©å®¹" class="headerlink" title="å¯ä»¥ç›´æ¥æ‰©å®¹"></a>å¯ä»¥ç›´æ¥æ‰©å®¹</h3><p>ç»™ubuntuâ€“vg-ubuntuâ€“lvæ‰©å®¹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">lvresize -A n -L +20G /dev/mapper/ubuntu--vg-ubuntu--lv</span><br><span class="line">resize2fs -p /dev/mapper/ubuntu--vg-ubuntu--lv</span><br></pre></td></tr></table></figure>

<h3 id="ä¹Ÿå¯ä»¥åˆ æ–‡ä»¶è§£å†³"><a href="#ä¹Ÿå¯ä»¥åˆ æ–‡ä»¶è§£å†³" class="headerlink" title="ä¹Ÿå¯ä»¥åˆ æ–‡ä»¶è§£å†³"></a>ä¹Ÿå¯ä»¥åˆ æ–‡ä»¶è§£å†³</h3><p>é¦–å…ˆ<code>cd /</code>åˆ°æ ¹ç›®å½•ï¼Œç„¶å<code>sudo  du -h -x --max-depth=1</code>å°±èƒ½æ‰¾åˆ°ä¸‹ä¸€çº§ç›®å½•å“ªä¸ªæ–‡ä»¶å¤¹ï¼Œè¿™æ ·ä¸€çº§çº§æ‰¾ä¸‹å»ï¼Œåœ¨æœ¬æ–‡çš„èŒƒå›´å†…ï¼Œä¸å‡ºæ„å¤–åº”è¯¥æ˜¯<code>/usr/src/</code>é‡Œçš„é‚£ä¸ªæºç æ–‡ä»¶å¤¹æœ€å¤§äº†ï¼Œæ‰€ä»¥è¦ä¸å°±ç»™è™šæ‹Ÿæœºæ›´å¤šç©ºé—´ï¼Œè¦ä¸å°±ä»å¤´å¼€å§‹ï¼Œç›´æ¥ä¸€å¼€å§‹å°±æŠŠ<code>debian/canonical-certs.pem</code>åˆ æ‰ï¼Œè¿™æ ·å°±èƒ½ä¸€æ¬¡é€šè¿‡<code>make</code>äº†ï¼Œ<del>å¤§æ¦‚</del></p>
<p>å…ˆ<code>cd /usr/src/</code>ï¼Œå†rmæ‰æºç æ–‡ä»¶å¤¹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo rm -rf linux-5.14.9//æ¢æˆè‡ªå·±çš„æ–‡ä»¶å¤¹åå­—</span><br></pre></td></tr></table></figure>

<p>ç„¶åå†<code>cd /</code>ï¼Œæ‰§è¡Œ<code>df -h</code>ï¼Œè¿™æ—¶å€™å ç”¨åº”è¯¥å°±æ­£å¸¸äº†</p>
<h2 id="å®Œç»“æ’’èŠ±ğŸ‰"><a href="#å®Œç»“æ’’èŠ±ğŸ‰" class="headerlink" title="å®Œç»“æ’’èŠ±ğŸ‰"></a>å®Œç»“æ’’èŠ±ğŸ‰</h2>]]></content>
      <categories>
        <category>å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>kernel</tag>
      </tags>
  </entry>
  <entry>
    <title>gitä½¿ç”¨å‘½ä»¤</title>
    <url>/2021/09/14/git/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æš‘å‡çš„æ—¶å€™çœ‹äº†<a href="https://www.liaoxuefeng.com/wiki/896043488029600">å»–é›ªå³°</a>å†™çš„gitä½¿ç”¨æ•™ç¨‹ï¼Œè¿™å­¦æœŸè¦é¢‘ç¹ä½¿ç”¨ï¼Œæ‰€ä»¥ç‰¹åœ°è®°å½•ä¸‹æ¥ã€‚</p>
<p>åŸºæœ¬å°±æ˜¯ä»å»–é›ªå³°çš„ç½‘ç«™é‡Œæ‘˜æŠ„çš„ï¼Œä¾›è‡ªå·±ç¿»é˜…ã€‚</p>
<h1 id="å‘½ä»¤ä½¿ç”¨æŠ€å·§"><a href="#å‘½ä»¤ä½¿ç”¨æŠ€å·§" class="headerlink" title="å‘½ä»¤ä½¿ç”¨æŠ€å·§"></a>å‘½ä»¤ä½¿ç”¨æŠ€å·§</h1><h2 id="1-åˆ›å»ºGitä»“åº“"><a href="#1-åˆ›å»ºGitä»“åº“" class="headerlink" title="1.åˆ›å»ºGitä»“åº“"></a>1.åˆ›å»ºGitä»“åº“</h2><p>â€‹        </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git init //åˆå§‹åŒ–Gitä»“åº“</span><br><span class="line">git add //æ·»åŠ æ–‡ä»¶è¿›Gitä»“åº“</span><br><span class="line">git commit -m //æäº¤æ–‡ä»¶åˆ°ä»“åº“</span><br><span class="line">git add --all //æŠŠæ‰€æœ‰æ–‡ä»¶æ·»åŠ è¿›ä»“åº“</span><br></pre></td></tr></table></figure>



<h2 id="2-æ—¶å…‰æœºç©¿æ¢­"><a href="#2-æ—¶å…‰æœºç©¿æ¢­" class="headerlink" title="2.æ—¶å…‰æœºç©¿æ¢­"></a>2.æ—¶å…‰æœºç©¿æ¢­</h2><p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/jeOUv6.png" alt="add å’Œ commit"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git log //æŸ¥çœ‹æäº¤æ—¥å¿—</span><br><span class="line">git reset --hard //å›é€€åˆ°å¯¹åº”ç‰ˆæœ¬å·</span><br><span class="line">git reflog //æŸ¥çœ‹æ¯ä¸€æ¬¡å‘½ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹å›é€€å‰çš„ç‰ˆæœ¬å·</span><br><span class="line">git status //æŸ¥çœ‹ä»“åº“çŠ¶æ€</span><br><span class="line">git diff HEAD -- //å¯ä»¥çœ‹å·¥ä½œåŒºå’Œç‰ˆæœ¬åº“é‡Œé¢æœ€æ–°ç‰ˆæœ¬çš„åŒºåˆ«</span><br><span class="line">git checkout -- //å›é€€åˆ°æœ€è¿‘ä¸€æ¬¡commitæˆ–addçš„çŠ¶æ€ï¼Œå³ç”¨ç‰ˆæœ¬åº“é‡Œçš„æ›¿æ¢å·¥ä½œåŒºçš„ç‰ˆæœ¬</span><br><span class="line">git reset HEAD //å¦‚æœæ·»åŠ åˆ°äº†æš‚å­˜åŒºï¼Œå…ˆresetå†checkout</span><br><span class="line">git rm //åˆ é™¤æ–‡ä»¶</span><br></pre></td></tr></table></figure>

<h2 id="3-è¿œç¨‹åº“"><a href="#3-è¿œç¨‹åº“" class="headerlink" title="3.è¿œç¨‹åº“"></a>3.è¿œç¨‹åº“</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git remote add origin git@server-name:path/repo-name.git //å…³è”è¿œç¨‹åº“</span><br><span class="line">git push -u origin master //ç¬¬ä¸€æ¬¡æ¨é€masteråˆ†æ”¯çš„å†…å®¹</span><br><span class="line">git push origin master //æ¨é€æœ€æ–°ä¿®æ”¹</span><br><span class="line">git clone //å…‹éš†ä»“åº“</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/4p7A1R.png" alt="åŒæ—¶å…³è”giteeå’Œgithub"></p>
<h2 id="4-åˆ†æ”¯ç®¡ç†"><a href="#4-åˆ†æ”¯ç®¡ç†" class="headerlink" title="4.åˆ†æ”¯ç®¡ç†"></a>4.åˆ†æ”¯ç®¡ç†</h2><p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/SIZDdg.png" alt="å¤šäººåä½œ"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git branch //æŸ¥çœ‹åˆ†æ”¯</span><br><span class="line">git branch &lt;name&gt; //åˆ›å»ºåˆ†æ”¯</span><br><span class="line">git checkout &lt;name&gt;æˆ–è€…git switch &lt;name&gt; //åˆ‡æ¢åˆ†æ”¯</span><br><span class="line">git checkout -b &lt;name&gt;æˆ–è€…git switch -c &lt;name&gt; //åˆ›å»ºåŠ åˆ‡æ¢åˆ†æ”¯</span><br><span class="line">git merge &lt;name&gt; //åˆå¹¶æŸåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯</span><br><span class="line">git branch -d &lt;name&gt; //åˆ é™¤æŸåˆ†æ”¯</span><br><span class="line">git log --graph //æŸ¥çœ‹åˆ†æ”¯åˆå¹¶å›¾</span><br><span class="line">git stash //æš‚æ—¶å‚¨è—å½“å‰å·¥ä½œåŒº</span><br><span class="line">git stash apply //æ¢å¤stashå†…å®¹ï¼Œä¸åˆ é™¤</span><br><span class="line">git stash pop //æ¢å¤ä¸”åˆ é™¤</span><br><span class="line">git remote -v //æŸ¥çœ‹è¿œç¨‹åº“</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="5-æ ‡ç­¾ç®¡ç†"><a href="#5-æ ‡ç­¾ç®¡ç†" class="headerlink" title="5.æ ‡ç­¾ç®¡ç†"></a>5.æ ‡ç­¾ç®¡ç†</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git tag &lt;tagname&gt; &lt;commit id&gt;//æ–°å»ºæ ‡ç­¾ï¼Œé»˜è®¤ä¸ºHEAD</span><br><span class="line">git log --pretty=oneline --abbrev-commit //æŸ¥çœ‹commit id</span><br><span class="line">git tag -a &lt;tagname&gt; -m &quot;blablabla...&quot; //å¯ä»¥æŒ‡å®šæ ‡ç­¾ä¿¡æ¯</span><br><span class="line">git tag //æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾</span><br><span class="line">git show &lt;tagname&gt; //å¯ä»¥çœ‹æ ‡ç­¾ä¿¡æ¯</span><br><span class="line">git tag -d &lt;tagname&gt; //åˆ é™¤æ ‡ç­¾</span><br><span class="line">git push origin &lt;tagname&gt; //å¯ä»¥æ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼›</span><br><span class="line">git push origin --tags //å¯ä»¥æ¨é€å…¨éƒ¨æœªæ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾ï¼›</span><br><span class="line">git tag -d &lt;tagname&gt; //å¯ä»¥åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼›</span><br><span class="line">git push origin :refs/tags/&lt;tagname&gt; //å¯ä»¥åˆ é™¤ä¸€ä¸ªè¿œç¨‹æ ‡ç­¾ã€‚</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>ä½¿ç”¨æŠ€å·§</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>èŠ±æŸèˆ¬çš„æ‹çˆ±è§‚åæœ‰æ„Ÿ</title>
    <url>/2021/09/16/huashu/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="4fbdeece7c77218faac67f6089ab80ab91fb035d469bd5004bcc20148411cd85">baf00afd9fe9c9de8fa7f230fba25cf10342acb1b6894e4eeac0df067958b768e5f028ce396ecbbc35b73f9a7174618599178bab3f281ab11edc294ba1283650eba2721a72499a2605ab131ff9a737b1d4dfa8e1dc8434a3fd02d94c1891789f5bdd8c833771c861a126345ae691e636f598cac407c9872678a70147729b955fd42ee1d1bcf381a1afb6574b9da7a2110cc18aa468965dd58285d5837e9718ea9db39e36f01dbe89518443f0cfa3f7d716b79edca936335f1f13eb5ceb4bc8936aeab8d98aae8bafdd838c46a756719aef87846df73447959749e20b3b3251bf8d94c7fdd2df4cb4c2169d08d5ad3a6ead54c9f680f475b6d1a424f375a83322777d97d36e8e94c52165edcef34b63949f5aa339b58f82064a1295ea000d252062002ca36a3ddbe80312647a4c7787fcd7e7247ba0af9ff4776c890fe702615d490b8cf49bd61552e571b44c0946b1b31d33fd33f03f758c61162cbdbdde47b3ed33b4a4eda518c1dbe87429988b3e557d0d32318c4559283af5c51f6ca5dcc349f15c77bd431ef1399cf85547843406ddb585a752a7559bf9e6255d7fb918acf0f563dd1f26cbbf470806ceca753dbb71afc5d1babc9d7c2726adb9af0120f6bd0862da0c1cc038a1b34ce089758eef19fd18e4883f3253fd884eaaad39ac3a60d4ae7daefd0d99521dd884c400dc10d668ad9b5a69e12fe2f34b2d2daa96f8dd2a2328626e35481390adfb9187ea4cd559b921a3279aff310a0b533514372b963c9abf9a84a322c0a4bb65b56cace61f7cc5ed640c305174324d8d068f34715c1d4c1355847c8f290b92df778e82dec0602529f101a90c48299cb05b7cbc21094cf86e28e6be462fa32954a3d2251a1d798156959b6ca6be93589636acebc47bcf6870f13062f1f753a87a4842efd7d68956ec7757087eec12faef51c395b54b3df8eebd4a4509599bac4660465923c6ff1d8397a0ba33b968c59582f33d877c60ee84538755ef1f2f457b0cb289322fa976b6626a7dbc6e28cb5d9446695d54febc1ac28cdcfe447a264d77ce27ec45d41c0beec8232ef402545ef82aa6f37210ca8b34d948f101bd58479d281a3fa440daf40bc07bc67837a9cfbe288070b39a17e7d7d7087dcfb0de73e4d6af184da7c62d79f547941ae4a5f27084db5bdb330cfe16e1eea49df7d7687a0d7cd5ebcd677b10821221aedc0cf6435d5e880368a15bd5207200c3350b43b56242b2d7419962ef168a69a6382997a33a9e77ab7721b43a1a6ee1babcfe8694bc6d8eea517142fe8d976326c37f6ec0ab3ea56f1a512132b7a2ab3a4cbec259cab6caa313b2f797eae8fb17f3cce94226dc91458d72d3f066b2707436bd92ed03d19df4bcb84f07cdc5d0b9958ff6ac9fca5d2a9d29c877def16293e0180ccf6e0c614d042f887976fbe8cdc3afd3dde0d03597cd19aa30b6537f866af70c503b8528b7fc9acf50510fa6cda141fd15073614942cec223bd61629f6ff6e905e7ddafe5c09b46e239ca2781baf88272aab480d71337b545edbb601da4e2c7947147d210c7ec19bc43e386406146ecf889995cbca9643ca5c7f7b78d9e936403009c28e130391da6198e7fb6d28aad74fb4fd85e78a581573befc6ee2aace59ce9190b97b882e4ad63d2dc615561d20296c4c54862c29a186ccc273116daab9e7fb7b885a1a352719f35c8d7321da7a0a91bbb69e01116d0a85790f23eb3972a8aac41f9ed0dcacd5feec7bf290b69687d9fc23099ddf543ccb31c8988a48677aa938b860135ac3db6a324b18784a28ac65a95c835b0c1b3834772f75326a92ec1f242d2e0bb6c3bf9583e04a703d0b8c7195533ffe0bd701bdca64f1c711cb5b161d1f8941edc32f0080567bfbc91135c2a15c7f90d2e0bcd8e0d26218bcea416113afdad766dbf664d901513371793ee898464a6cab1d81f2db0dbe5b1727e92e2cf86c3b023758ad35b4ba7ab94c5aeccb2ab81536fff90300e294a72114bce45f970bec19e9b3786c1a2688bc854950323a5e1d248d513653d06f91aa8dcf7c3f084f5076ff096dce1df13fe9759c54b56ee713745413ac8522f72fe5bb15ad8fa51bfc5cadde918bcbcb57de341f88930efa819bff7940da298ab573d3348cdb333be005074fb6de1f7ce56f4a9615a0ff4fcab598b9ab244e91c8a40a9159b1e78e2fd8fea34f03a366fbfe6fcd6ed91c86f663d85895289dae6d5b5ebb9b22b8730669f65918b109986cae0f1c275f00ba4c8713bb59a9104084e855af7e70479c8fca0487fb02c50689277d1b2f46ee8162746bffcdfc2a31b41c4058104de6fb5023ace83e983922cd5bff030f83b3782ac83d58d3d1f2f65a2e03f6d373bf47598aa0be26e8130806a35d7ef2f30e70b4422188334063a557dc42a3693c941aa3a18dd7b9d57f8ac38124fb228fcdd8202522ceb3f8fbad675fc1b93dc650b437a85b65da33d6625bef1ffcb49120cb969eb9e7a183d091d228647c59a18f9192d913996e5cd372cca311d195be45a326b09e096a51f59c6aa3a8dc0943a622f6658eea6d413df66e918b8ce8f51b213ba4f88323afa361af9a7c90a27268e21e08d2d7d62fe95ecdd0c0a0777fa08a396b078cb5617443e952993f9b13bcfe58229f94bc844698d38aa157dbaf2a2ad54d41d35264a7abfb5f1211c6dce124f1ed42f51a79358400734001a71cc1f9ae1a81110721520ff8e5c09a5813589852eecca06d83b1f4f9e7b68c2c8f65a763601888b415079a0e7f77f2fafb7a406609ef5d7cf4778984dac1fd289bbc2d06e80e02814825dd6972055d1554e5623de662bd59bf8039ae1a39588ac6df98d16ba69cff320f0725c343411334b62f5f856a5599a2af0acea96a849d7660b35b7a8d9fe85d655b1ccc177ae91250da50c571979e577286fd68f1aff0e1aecba866e6052887e391026be1b4aea400d80872b2ab67bff53a67ebbde63722b79bfa35eec79743591c4e61a51b24ab51e20b6a53f9b3b1b042943cdc560e33a5bac1ed3e599457253b7508eb2fbb30c3ba79203f97dac784ff4d35d4fade2c8646b91aa6aa48405d8d9db857f72491488a3a7b7b4b017e000647519969c1505a07324358844752257c5c821a063194a5aa61def889dfc9f39e64685419f528223d2b6684dd0c21377f6f608be0d9b2e3bb16743fb53c1567ed6d16f6e51642fc88ce40219f251851d43a385714717364c0a7e917b79c71a912f81b2b72d70cd138c73b04507d11eb3d7a63af2bf72daa684f79682436714516bf86a430e46e411301d305db5dbb33e0d00c1e39149cf0d1e38191742a155fb3cc02c8e1384298c6fea89bd4eded8869f81dd4a09450b8ae92f892467ee67147aba54c1b9b4ca8d3f19a888ad4d7aa09e229df1f993199d65522dde10515ffb5611c632cc36e6cb3ee3416612f2e52f9a840b61937982f795a2f815dca3dc56bdef366f639e3d4797090ac36bfed5070bb4ef6f055056add800872df712fc6ed196c910487edaa8373c3121f78750625c2a1ade7ebf601b50c10926f91439ce8f20e8b6d74a50bc7dd78fa11ca7e5d051cc273f6130db2bc439ecc3f671ed263631a7699655cdb6bba39a1cfef80dbc283f328d7fb76024c775023519a2723dc6c1d7e5b1835b3142ba6317187d972a9f8d5a86a626b5d42a37df324360ea6aeaf81459043bd2cb46e32bb070d76fc8bb4dce977ace5bac613d4439d367e91bb75f9b52f353a8ead3ba38f2f569db1554abb9fefc8b6b45ab28e63a9869152389686eff95973cbd81f3dfdee919287dd2e5ef939af381122efb75bc25f28d8556b77b6a6e7dd4bbb57c8d3eb77e9c286cf5befb662c1376dac7002871aa7290daad253bf228712512e0315c88559f9e844fc18c624ec6b4a6957d0c0817befa37a966fb721daf541baf72f4749107cc43363cd814fae953d658c3309f316ce72d70943006f9df6866f976fb84f1fdb14cea79c61c3951f89493ef07a5b73a6705de63973832fa939f6f89e192bc8b951613846412405374d5ffcef4609f76668d7e384daa46f57bc24c4de66e51f0b412e25ce29e2d575436ff61f13e18086bbc34d0ddfe93bc7f217de7bb61e2ff45a02f9da6a83455c13da6c1d37e6cf70f412d2b1d4fa97c8c5dae493dbdb5122a40ca7f7d5f2d42143a56a4b107956abb1abe1fe96a2374ac5d528af35addcbd867ab4a11e422b89d734c72030cb24e9cb466ef2ec9f5ad5bd387647f05b950064b420a939ffc2790fecd9b8527688165698c105de87582995bbc5936950ffddc3f86a27a95b62f5e50f8bad67729ad3f59ab756acb61a1a27e1d9fc88fa50e17008399ce4529250e17c341482c5a5de45919f51c2465979d6c81f2ba63b452c1b6baea36ec7135ee7aa363d3e4ee8c6fea408075e08e22ce3767620e81259faa2dfce161ceca64ae5428dd949ef318983b9262bb17bfad84ba4997f790210d2a2e557989e549e5921cd94082b8aa4d7cc09de989e6abc1049b63f9c0b5bdadc7be2f44d7f1b504b84450692031733ddc62feac8201331ad506bc89a4c7f965ad2501218efb5eb26bd6ff71061d13fb5648df5505d6ec82fb44b36b0c538b3e61492ebc4293c300018e90d8d801804eeee39b0a4e820483637d2546cadff86096fe0d2d16ba17144395788370400e2f64b7ea16fd4592b95dd24b5019165a47073f3f54ea2bdb3212f69ddce30da64e5658f4ac403cc3463af90c4e2dcfae38be04dc387f0fcd2db7f2b11d8d01945289d2dc9d6a235b982a736a76a6be58bceca11c1875e7dccb67191eda72f39c856d98b93ae019c350b645b6d8f830309cd7301541403d1d6f70f48943a072ccf549d209e8845f9f755fea6fffa02ad96f4d9624c28e12113bf7f305825e2d0e0310e58ffc4f962409b9b40fe169d679fd843217a92cdac8f69b0ab9d7cb997f85c5097bab27ed23288313d14804b94528f0d6854ba41dd0622784373b394155ae5f0498a6fb48171231c4d1331a8c7c4d55463b60431caa97f01925c0b71cf0838ee4988bf8b6f2bb94c63943e95c723f9babcec0e576949586a15e2b477e6520bd48d5eb577ff3a7b129ecda92a3a43fddff9dae57fe37e74974dc4f262890308a191c8e2ceb75c3677c33e4a16bf11939d6a642fcb85be63ee197985a7bf5a905c0a7da68c0b67393b5cd22f1f4fac82e7e25768d12ec4aa6c05b798405df9897c64caf61b2049cac0f5715c0d871efc493cca96534dc88d6c45905157521877c06641487c29338a34fd441f55e39aa5ceab38926f156d90d71c419cde6dd7bd265988ee21d1c669586b21dbc9a61f97631b27644ce798717c35d0b4b1871150960ec683b144497de2784b0891908f022ed94af9194ee2f24f0449b8446e34f1502ce6c31a2d7f59fb4e6baad85958ab83d2543177795b18acf7871de1c765a38162336f7c0857da3e4bb1519629831314dfc0177969a5a56ad080d3c2f9a431ce98dd16e18fb91339f9580f525c2034336edd659accaae23753e4857c7a45d011ba79006d03a52a044638659503ea5db6e51093c7dde80e2ab5da6473ff1a50f7db1c5d13ed54bb3eaaeacd99bc06c82fcccbee6b334e44e5e1416e7b0c3cb107575b8e9f5e8f1fffc949dc9529f0422959e5049df622ffff612ad54bfe0e60927b5a995d064d2d2e5b82d6e266baae93c6b209810f21e5ff5e3532ff584b35c7eb78f88cfc93283a4e4b70c9d5a7bbd357d2ceb6bd4d71a41a77a909cbc0a03ed64111303596f440e271c752bf552d3775f53ed0053d9f97e02426e11ab96eefd72fb76d8887d39e1a5504f062a496e89428120de99cb7dfe55d0bf112ece71ceb0f776e278aa3f1e2e2fe94b1a11d9970e9e1d8d253257ab4f6c751628b4261a8e3017299e1e81ef71ab83a5d3a6815d60bb8288d9a88fe8e19e5fde5460e85265119b53f4bde67d785f2f044e920ab49c5ee1b571dcd4ea184a3a691289c1a51c5e0ceb55e24172b2b960bdf66d6e1e244fdce06862cb98f58d63643023fb07b024807c3b304a962cb78fcb3b945fad58a9ae470ec765a19c9c9ebdab5bbfd58cf0b2491568a5251b7389a6b3a60ba9799482f72025237125943ec6dcbe8e2df66e69540bccdae43a70f67c14c377ce02df7ada608ef0a9cca5169ae3a6e827559aa564004729f0c24ebb422809df96d7521c36c85695588b23a07bd443abed9bf7541fbb80474667b3cceb95e465d782a47d53119da2f7a9a4bef72df9a3bb88bb4ff91e4bcd7197403a74b95ae7b1803b52e4bfdf5d27365e90330aeb75801a21c3a3860812614f7832d66f24b39c26215fbda08945d962368a3645ed8a42212f9cf0226f57c0f54753c9f2884e5c4b284bbb0c8fe85ea6712f9010ad53d0d7ecf3f90ac5dc17f86a1189bb7dd6bf0c22269c35b01598ae0566cbf623aa3c869d104e114bc79ea0a6a6c35c4c159cd0e47fa9014eb43fd01575ffd3def09202f08afba0e030a74a0dab420df79daf6f3dbad9a815038728ae763ca1f6c03b0562f4142d8b06b40cfc090b6fb14a38b79a18bfe78ff15ae2105923be29dbe81127422592cbdb74852b206b8de55c6b50920eb045e7304d5eff93b636d142ab27823f1104f032f77d104d69e1c77928330c1cd23da288b9cb4ca891cf31044c101431adf712416f0cfac896814bb902f78e01b7bdccfedfd0fba26d40f602044c91a1a995385e83992638954af04e9ae81dcc5e1170f865e55ddbfcfe7f91f83be506d7534fb797aa1598825ee4ef786b6dd631df5f4da92dfa3c2da7bd4ba1a11e772635a849df6c0646057cc8ac691bf046f87b4f56dad4ad190eb30272ee39f24b346db4a2fb016089d3444830c9e79b3a8551451df38f3686913da0273523c015264a3a04e113a34781650faea6162ea0a72d5ea51593eef951daa27f19998c059e64d0dd815af8a52c4660371bac8515a7cd78c8b43c9f3f42633296bd57558959196bf2fb28bc09373fc68d57d0554652de1a3bddc2a689bded39306106b07348cee6625c2df7054af35505368be5e5385697a76228ed58f2e3dde2e74441ad23c429160aef001e7561b87abbf1688247515fa5e39d566abfce0d64187620a15293f3955be36464afa331ab1cafcd24dd26ed3e44df1a7fab2548f29530900cebc66d5878eb0104431609a1ab12c026d2d7ab4821f9b5b85547e74c89b96d98fa05abc063182d6af48f4ead1a908931ddbad2fc8de3bcba76d96aea51c4c1512bcea960652323a228826e81f88daa873ac3c9152422281d5524da70d0c3c8848ebde5638f831f3f769554fe57fb4b80f785851d8239226d13afd1766d5fd605d529937bed7e26423b022aca53a2591c9d7f04b3527d4c7430c17efe2cf0d7e22b45bc04bbe587865144a4cd362e1c0b637e7517ef7b423d1f97a5239ce6729c036500e6c30f06a6a0ee60f1a97295b55b61b81cb66f0729f954f5e1bd8932e73aee1300783783d01fd0909ef7b2f98d091ab0111c6186eebad0891a5421efed573badfbb894e4711b3ce66d1c5e9f1c06566bb10a5eac40906093f123d060f116f4228834074fd273633cbcea4250c26b1880b2a7141d17d009f6127bfa808d631adaf2c550676a492191b0376b50aba5526a64da61079b47000ade4ea9f92793ae356329538e5412b47916dbf76c84b71206b02b67c94252354dfc9f76572ffb72d85ad02476dd56909861a6816b834e9a5258116a970ac9df6018391724686680be27141e4df1a415abd6d3f5135029c0c3af978b3dea5ad5a816049b465b9bb16eb689978153499147c4ab1e89fb6c5d87c84ce1a0dfac4e52eb895a60da80d35b22fa0f73b960e47dabf090e0ca96aba7045a421ab4a1999bd36c02bd9838a09daddbc47dbb1c3c64c3de1642efa51e28e0f126093ee820b0caad9b1ff46c6f25a126c9e9874dfd40f4f357f17fade28766b9717630d72d8dfdc42b7a178c21399150c28deb47a6e08c2c6103d9bb98975230303d04b216df7994b0ac7dbe493c5bf03456d7ba09cedf357d85fa481c47490a371fc7f4777497e75c8f1e2d9aa407fb5d004e85aa1b794c8386cf0d578d2eb386488fdf832b06f31ccb1b9bb1459733cfc9bd8c7429661c615ac5f8b38d8ed95b43e48496317b2430d647a6cb6d47b47a42790a954e6f43924c9e805d510a8388962efb9c268d812388f11174b13bcf2de1db5e096d1c4882ac3d60a695b1a63de4a09f573f4566ab32c372c91f8a9eada24b3276897deb1e78d64c597e478f2b4afb1c786707ff2bd510b82a45febcca5b9f860e90ad2816ab9e9dc2dfdf711d0932c898643bffd0203e08905d63b82cab6382c815b7b67a7ccb598369156ad1a19a4719cf7faf027ea8a68125595f489c90c5999211250e28d3be52977fe1b6132ad1c0bc11d925dc191e069cf0318505692bd9c020493b10e328e478f8d1f1b4ef039fb17477f944b4e47a4124c1312e4ea379e7814d3cd49034c9b9551696df7a66af0a91e25041e74efe27d52420a3c9eb3ded00ef5088c63982d399ff105e7b9fc30127d2178752f1491a34a31d28674ec5c21ed9a40d70de7388c4d8280303b4d42d6b5d14229410cd3c13dbd6ff002d9d5dcebe06b9d81baf8d4a202e22ecb6ebced149de545ae16937b9936e3e4ba88fefe25adc8f57c0d00d8cccee14a0ac33fc59a19a82eb99c488efcdf345c18b0dbf9e1bffcc7dcc25768ea06b99b1ce4d77740b5ecce70b223ebcddffee6bff0943762468a1b663316b445b16ba1db8adbb34a2d46b5e2a5508914d69f6ee1104ed764dc49aa153954784dd67bf223fd0a896460651a948c773fbc3675e667c3efb1c54b3995afdc2eb32652097085979ad852131988fc8a9460433ee2e7d96124c588c3e5a478484a9383f474b9ead79ee30b14ae81a8d79dddb3b6b8ffc2a32c1839654e840f800e8a9610048dba5be916bc99bf34465c525d85a22530e8d0155a767d46214128d19c7faa90f41fd9ff6dea15d0010d727bd4edd2d7171f643ea053ee4eb8f35d01c00a2a667dcf3103f9a97dd15c50767f44ca753515b662c44c4364de3df046d011f370d94ba89dc3d3abd1117c06448171b16c57ae20baa6c5d30d501982ae5cbdeba7bd5a8120ae3570430348bd79a34334325775516795c3331fd050d46a4965429340c7e179211b3ae65e4e5da80470620bbd27e948030bcb44c5dd221ae535055351e0494c9a74ea433c0505b5725a48d369dfd2e44aa33129d96eee021c9a63ce899b5f8c275b2c5af335190ee5423dda4216b13509da76c65e6d64932a16199fd26a039b2df0fa9de02a590ff3990cc6f81ef3de1fde45d3211d240891785a57fbe30a9b51ea7508955035ed27e9b387208234481bbcc15c0c89b44c1f99c195659c720a4e4e137179cf691c330aeec0e0a594e344193f3db26f8e2cbf2d84ee4f50b648b78ab2e70624f26f89a86f9f42657788304391588fa1d532a8337550061fd5deeb6e50d25e5027f0336b1afe678a64444d581054998a225e913b934b07addb54acf2dc2389392c16f95714e2de128a13c8294e7836641012d81754c9c942492631a21a2b118cbbde92c51d66572d69e3de36c11aa7e08cb9b1f592fbd5bbc9431be2ea5510682e761b80c8e07862fdb819db097bd7500ce4ce8cfb03a01af809fa4f3d0856bea913c92411a9b1fdc398ec05a91af9706c13b7e27e63d88275f74d12e144df0cad126a236f375f9a158832733deeec2902457ac5f31ecb01c89105c78c11e8ab2d1efe66c90ff47b3c39f2378f45560100a85940c34c99eacf2e18374e254a24cf35f171565fc70a1049016f42f84bffa6c4b6e8fa1160eb9849903af00865b7568b2280770fbe4203947dd1c25398c25cdc7d2bddfd4aed4f7be2bc1306f11265e0a4ae63074cbc26ff7130ca7950a736058f2c65f17cbca30c287c929642d6ea71134e0e2c745e21c98b9f747492dff1027b95700416353baf31514d49054b1af70b2e5adf186c0d2abe26f09ba920c14eae5714651196ffdb8d115a23d9cc8d08d0ea38fb34806c9f2918bfd8c4a187c4c525cc60edfb24c29f2b2d720caccd10a4b44c55e9e4eacde113f2c9cfc86d1fce303dd74b2a39361e0d6fb3f9e08e39b26cbb107e68e8e710f3493aa5a57b33853ca245e9f1b20febc0c2f2de2a44a260f98737fd0f5282db6b2bdb393b65d4dabbf56d05960fc61be20fbc02ba30084122e0cc8e58c1e5a06dacbc475ee431cb47174ef3f9d64cb0b56073c8f98fefd4a3aaa8163f5f0300b70903515b75b453ebb3243ffd7ebf8072f41ec654210b02c2d20d39341f3f6eb0220b0ca40c554ad962ea861c80eff3162f28237662de635577c96122ce128bd08c754a06132ae5405091deda138e131dac8fa429868d896e7f7286a906e2c586cc9bfaf83d93f0d23ba5303b0b106f49dc26872b16188c248866ed17f0ee30b50a87df02812eee41627f9210de852774c80290712b7071805c0fa25a9667b4072f3e1839d2e89a892d760e11c5a34c142d7b384bc9e5a43ebeca90477c4baf9e30785d16a6af3a88d58f10966be3cf71a69482779391f2fe96b7e229654d486dcd324744002211e493a9809ecb2842787655234888adb091352774433c63dfc46be5a73165128c800076041543e3b30680c37c45ce6c5cf545ab60c99407d45b505b9de99e91426cb091e9df2e7df3d4d29161dbf906d44bf0e1ba75bafa5f9ea6f231cbb9a3bc1ecd0afaf72e39b290e0de2e8aec29a5b0a66a310f64be5d1085a24261667f13fd4b4e23780e1ae8813bdf796a4a647471b5a3710bffbf4f2dc0d2a88a78e5226eb8f59bbca58d4a7ec203712ed5ae91075f016dcd57eb9311b4993f4e90acbeb2c1f97200c930d438aa71c9ddfcdd2a2c004590b88f7b29f6e65d6e2a4f7f6b0e59f2af8d5745714793bdd687664ff383aa331f40a39e2f652514b6638bedf6c8f5a224b53983ec05c899629a36260353dd7bbcaee00fed5e6cd0eb98e5e3987820eb6d826e0bd7a2797cf48ccfa85549d1c1e7837190bfa6279457c5c730884d0fb0d0b938f64459f8e73603bd612d19ab13e8f5c2a25a248e703e4f313a576b651feefc41fba32204e3bb40ec4557e16bfc860af7914726ccd5cbef616551f47a936f707e72ff3e30809686e1870195751f50fca8072839137bd54b07e7d22487e92ff1a0c8cbd0bce6d887486238481939a8391aeaba3a14a47f6c362b2191c04c4675071d02b1f0cedad4eeae29c0c6eb059cffa48efb73b88ba9e4062308e2b1ea43957e9800a8d5c260d132c560426fd631d3573a441dce4004d37f7b542c35e117477f739ea30b0852b06cb66d10ec1e26073cb5c85a8dea533f0dfb2be2f1f2d46ed5cd3c2c9168305b6dca99895d7302ffe0e253c8e10825d4f292ef0421a596d26078a56a7fa525d44704b671d5e04cc36704d81ffd3945cb5efeac2378ce1e8b3f8924ae78370747cb1a49a237939a41877dc3985c2dbf10ac34bf82d554c52ae7bee30db61e12049e19f3a93ca312d106daa6c761ad3d34b3e933310fc18431e34aa0d7a14d017befd4c93c38d2ba8cd4de623086f815e9eb544a4cca01f4a6fc4f781dfbbde6dadf1de704b2edc7e8eafae265f400e3f71ff0ae3de0ad07e491267a5d1dd987f26a38c9ad0b4e5c659238c07bf1bddd59facf03099d648e5269d72c5d451e5a036ca5ed78565c259ed69565e26a45b9438af05cb083ffb5eab846f72c98e8ebefaa143317b1986e90959392a2a5002c07bee60cae6e958864f7ff4c93d2a99d6f6979cf76d83d1720b1d2deaed40c9ae102c02e578bba606928a5f14262ea36a11236c0d276ac384218743a9852ddeb9ecd5eb2fe74108a093610f361824140324b9c26ffc2f3577675f0aaaeb4c89463d8bbbe0c79f980bf2ac7366baa11e97b233b29fc76a7264f3c5d536ac58dd3a83984c0749858858fe6da54738b9aa1bd2d26b2d1e2d35774c8e53b9abf507b776a83407d92a8978c8fb9022947d2741d08bfafbf05e5fcf720656d9f4f41d2c40a95680b9c6c6b3fe02e34acd34d00cfeef688db81daa26b73c5b49bdcfd6ad69bdddb8e6f0746eddd7108268c7402d0153611e485d647e9210647e646cb4a9cdbb508f2eb0873b5a46306e8f854b6e545b15221ffbcd35584878182b8321abae3918e1ab678512a76d2c7e10a53a0f3a22c9dde2e4a3bf197660fa589e3cde83936f655ad354914ec9a87b510f4606ce2ae5e94df03397c563d3d14ec04f58f5c4d56801b90b23da7faa15f45799fd7e95f1f65be2a9502ad5a03d3ed86fbc10f2745f51d5c16650123a5f3d57bf33a9548e22486da2eaab8be3a250bbf6d6218c2f13b5d11939f64e58d713f297134e4154ba6798023b19ae594a9c46c14d7bb2c7e78245d22ddcc99d5c06ea902ae5e7113b33c1c3098616a3818ce8983fa9e1d3559d9c6a0eecbaa587bc35b7e4af3d52a0f2b9818f78d13f83682136312332eddd0d1fc00fefdc57a9236e7ecca4b6b7cf4bcead19a9ef8a4719ec1cab58c5bc38a40d726640f2c5cbd4505c81b8c59fc096844ffa92714a036bc83f1be219a3daf225b4e6f067cca1792cd61311c032594d658d7404b1a4c6ce13ad2a9233af268e245d0c4591a59ab704f7902111f3d51f215430e4822899ac32ef0211e3d844a1e3a4bc00e502e9d41ad29b484bee7cab2540361c6b8494de6e94a9c5e326b62818f6e756de4548d0708b34a402f561d4b9061bd901ff0a8193f6b07279e5defdc9ff1f2b1ac650c8c78f8efe9bbf603bce946c6db3d6fdbf8fb198f282c3344b6144ac133d63b456a5f9b1b85a36ab477eaaff4b822adf997b992f9b246746329fab7ff44147221ddca89ef179cfb6fa9f05df03ed3656bc0297d0f95f9ba9e45cd370e7f3ac86518187818e4ba41c074c5360bfea1f8f8c4d9965f9a22cc58d8fd7e00a7975e2037f52af3dde445d82bd6728f860b616a2a41a1ea59c2f577e973bc16b37b248d96e6b0408ff196ae608e758162acb2afbc63bde54bb9ab7cc42613fceb05dd198ffbcd4feb9f5c5a6a88fe0a5d698184e43ee8caa61f0ecf78a9e035337f24fcdac894c2c64117884a2f90d85b18ccbdbeaf289c6f465c1b17bb42a8eab690c098218ed935f30d71ca9ea8ff9e5f13ffdf52b3ef50bbdf704a3cd6a79dc0242cc5016fb17e18143b695b8e55d6296c0d10ae38839615fbeadd36436cdbb96650102781b4a5cdd32e374fe5d10e63192f42353a8992286c682447e2a05b5c91fe6ba2e0654144609e44408b673a8beb1601ec5061c059c60665856c7174df8f3ed5e7fff51b5c9e426d971312793d3b89fe3be54d04f7d74a054e2c43a6ebd80fddcdfff6c15665583d338dc046ab797e0b57fbc6b223f7c5ea4d0a6556afb4a4d972f4a9d72bc5b496fe4e751ef1c6ed9aedb604e67987af2002ee84f4d6b778aec5cd409dfa062e43b06a387060dbaaacff6949dd4507429087e415bcd63a31eaa54a3f184d1a4dfdd4f0e075554f0306af975a2f049595a80db20025077b2d53a86b48acf850a4d4f9e430829e092272fe3138e348fbaf4dba4744effa10d581106398177563376fad1666e6ef64fa2c4ec7b03e892cd8d154042f8a59048b5e99b8bfdb0b1786e86240a4e39591883b0d900a14acededc99d0953afe2683ca4af62637e9fa0b361b39732e7e5a1c4ad73dab3fa70f231d899060721ee7ddb867dfb7ab1dd38b90f30b9375e4184f851e86961f47344b0d04d6abfb3d640a3f7653857d8c12e88c2e675d6b514544a98a16b344d19ccf0c1dda62dfab537cb5a4e46dbf82d0e809fa8ff3fb4b8193e7196006fc6a910506a837f8e9f3e28034b624fd481e8658f75fb6ba3cdf884a2e899018acfd9182fc8c2f456c03f496cfa07aa4a8949da981b51dc7ac34bdc5408a6de16f790f124297561bbef5e00e85a2e365309e00daca0093bc67cb435b6a75b7f71c1ea3068908743c9ff554a88da2c93e2d08d1e4ab9f41a492a42e58501c630af114e9b5149174eefd7f349a9d71f562c8c6f8b30d2fd13f1d375664d345c5251a2a99e718d64da8153918cc7cd15283532fb23a60e2e765c8c73975939af42fc1f846fca376eedae79e30a916769ed325a0028bad197f7581438579c328278dd91dc82799d6d574e46e979b1159f0822466b2291b7cee3c5a1a661a5bb4261c278f7f6678662ffd90ef856659918d3c19a6abffa66e40a21096a7d2166e13912e85a55668ae0a5ae14f5a28eda09bd7e4c4f883965e93c2abb6e3d7623413c7527eb95930a462792b2ea956553f887d2704ea0814bd2f7f4f825f35dba031d679e7ac6565be172efaec23d8a1afad12ea9747d4d1efad43a57ab960808e9434714dc345ca8100066a124336b6397062b400c7f2f461c49add3134866928fa7c4ac0680a879ca2bb118d8bb2b46bd3d6e5af2c12179e2c371419661c61208c06a93d0d25f3c7f1d4c60c833e90063192c58a889b7b9f890fb8d8334b4e51c9aec40c43bf6e2d19ec314ac06229e4fab0f621612a5a085d2cc7be0dfb876fe2b42d07562185048137caea05d0121b529e3b8459bf5ddd3fabbc1935162248c311ab216054f94772a7b350fa9e1df47c600c197a58ab61baa9bdf8807ce3c19b1038e0abe1a13c9360f3edb6bbb016480952ddb76034d6c26815382ca2af78bec0711c03f6fd3c2cbab52e76c2e607f9fb8ad9acac97b7bb2d2e041c65f8cc2c21c562e13d885e69e7d827a608174be0295c62606b1e4e632a30d73d5b98f133de4b0775726b29af227f80a023902f552ed41d3df40e1de81d9627e9b28da0a25d5c8280c0d02d8374f94bdbb50f64d3a436bf81c783ce0b22a641353c9dd55bb239ac302db03a094d4ec6898676f5715c73d8050bb3eeb5c4634746b2781656621dc2f5bfb6981690c116e191dff49fe35d4ba26f629e605c842a64b1549c0f0988d517854bd8cd5f6ff78d4a7032d4c99602f474f79654260ba5c9ad4996d10f2f8ca36d0c1fd9b5a3cc25787ee3c816c2a3214b6326cd76bdebaec80b1533735ff33ea88b26208b2f920403f5ffcc7baaf89fed6b8668b81383518ef1824da6c922bd62bb36ef0eac54dc86a142520f4ad35197bae3435d940ab247b8828a5af97395334343c2cd0d66390b42a6bd141c746f9d0b1bfe43c6da4a53298075e9530fb358a6b82485181094bfad163704f8289e5d81358a800615fb7f35fb11eece260fadc39054780640ff66badeb130d976e23a9da3ec02df50fbbdf332204bdf0017f006e38b21152db6f0d0069ec24fc9f10a9a9e99a5ab7774b65f69a7ae59be9f8543360041547ed1c959290dca65c83aee610f3d7882c1435b0596f2f054d66a34aacd73d2c925e1a7603d9ec89dd00491ef808e7cded564fc5010a82c8a326a1f6c8af595dbb65fccdb5ba70a80363f23ec0c25df5e5fcbadf2a60e3602d3f2f6e71a6119bec83ccc90aa0c49e27a386855146df0c4e3c00f83702ed00a6a225244c231176e180f088fe01d9539c47321b7063b15ae7d3d922c938a8a6a9905aa8d36e1f8bca7112f67a330c861441a91cad4ecfe23daee5e6253a94a84dc6b52b23b88f10709ec6a39018f7dc149e5a27dd458d9226a4f33fb7b8d9f9157f24ce3a55d155b635a9e904725c2d845eaa88d1ce60d3252aaa8545f78699e2fda7acd18132dc065a24fc8ae8cbae17789f4c2dac39b117a72dc52b58867c04ad8284a293dc04831a59214d202b5b7f06a45804393697c2e989dd0864133e4e396de360a6bc37f70fa65c88f634bde36f56018cfe31c0ff3f866b76eae0c6702d7753c95fc8bd0c6ba207d21cd079d6b9c14776e39c022201f0040df16322c7031142086810e318b5c8a9275a7c81143b8988d128eba5072132c8032b48e97dace8a8ce0f936514c9c3fbbc56b15e90df83fb68553ea76b6cd3c24cd80e78f2d0c10cf2b3bb3b9c59b50a2d4e57cda7ac37bc8db71f8d9a832f5d10835b5b29bca5fb965fe2dc1728014abd4d16f8467741b6db1a6fb04e62a71736ebf10f40cebc80d59c3ca7c0d2c2f9c8b166e7efb62f120f20fd8b3262a7a775afaa0d1e2948f929e73e7afe97ce1509dfc21d42c657b73da8f685566dc01183052d8053b9152168e5f04a690ad0255a7be5b8d93a89b6213c6af16cb1a399910bfa575cbed09077b5c74e92891d8c762a6548f3c9178442c878c596942fb522b7273d157fff920f6821987e83c403820ee3bae2136ca9777ce18e320282e43508cf2d3799c6dab6f54a5817386a02ac689ac2fb266bb612eb68726a45ef6087863e142e01b57a760821caed56c8f4a88d8081574a8b64ba1cf8358cbeb5a16921988efb9ddcfd57e13e318940e826aa4eb000cb58d365ca129989547ce85db3356455c40e533aa1ce1ad19157e2a2d5d1d18926e28908dacf72d416503ebe3791e878f37a283ed3afe91c42cdeb3090e917ad3102815638c24420e668ecfc28b3786ce9ed161fcfde4e06eec9a90653ea26568a349fdc8a3a441d450dc706bfeca2f27650c76fd52c105d11667617128f73b5fcf2a57f00a7cc3de9e9bbff610867c91b19b19f8e2df0d00c43afa737f7583a0aca78a76d60a2d02230a556c50d72db4a5ca7df6fb61b0f314398f5dca1ed7acc427603ad68bfb5a635107b582404e502e7acd9dc537ab63d1fd0fe32f0dc14747802d61bb1763784f0425416eb88e9f629b58a9663475c02975d3f1e7783ee1d12de14571e86c9967519177ab0477c2e33adf8a3cf8fd389ef537867a809e626995b772178f4652c940071aa97c40da5105068a7752bea95a28902f5a5ebc70bc23cf8b844f038f2428198415bdfbf750ad11fa26361c93034fb45b6b0bd19ccfe911c99e7a311d089918d466bddc2338fdedbf08c21fcbfa17624444dfd2511c0a695d67e06517c37ac4e49ab2b8d99f89f349bb45ae350b7e2d5adaa17880c2124a556a960716b17e3957f690adbaf4939d9fef98ed03c26fc9034e1ee499caa7b45f6fe4d5bf9824b7b780a01f9274b12d6a524ec5a2cbaedd0d47918392623693bc47b0372dfe80439697de54c2ee08c52d4eb2700d22906cbb7f68ceb3a3068485e1575210bf3eb8ee0f5f5274fac0952b074312f41e413070b05aeeeb398faa53cc8ffd81b7c829442788772ca368a3c768002402ee4099de8f935de028f5ea718be46d773b862d0aaff97fc59203301dad579ca34b2630a0ea083378b11cea4a7e2e833f202302a5c5df663a8d096743996b72b9198489f70bf957824e225c01497fc0a73346afcd2d72254c216da8a2c178b58beb8ebff50d9ef0309248555dd15fdbd7232cf9d5519c4d182b8d05222d636621ea6cb530c343f4ae7ea5042ba7d81d49151cc57605cc9cd9f08f0f13243b4182fea58a4881a6dc7b9efc0</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">ç§äººæ„Ÿæƒ…å°±éšè—èµ·æ¥å§,æœ‰å…´è¶£å¯ä»¥ç§èŠæˆ‘æ‹¿å¯†ç hhhhhã€‚</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>ç”Ÿæ´»è®°å½•</category>
      </categories>
      <tags>
        <tag>æ„Ÿæƒ³</tag>
        <tag>ç”µå½±</tag>
      </tags>
  </entry>
  <entry>
    <title>FineWeatherå¼€å‘è®°å½•</title>
    <url>/2021/10/17/weather/</url>
    <content><![CDATA[<h1 id="FineWeatherå¼€å‘è®°å½•"><a href="#FineWeatherå¼€å‘è®°å½•" class="headerlink" title="FineWeatherå¼€å‘è®°å½•"></a>FineWeatherå¼€å‘è®°å½•</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¹æœˆä»½çœ‹å®Œäº†éƒ­éœ–å¤§ç¥çš„ç¬¬ä¸€è¡Œä»£ç ï¼Œç„¶åè·Ÿç€ä¹¦é‡Œçš„å®æˆ˜æ•²äº†ä¸€ä¸ªå¤©æ°”appï¼Œä½†æ˜¯æ„Ÿè§‰è¿‡äºç®€é™‹ï¼Œè€ƒè™‘åˆ°å¤©æ°”èƒ½é”»ç‚¼åˆ°åœ°æ–¹è¿˜æŒºå¤šï¼Œäºæ˜¯æ‰“ç®—è‡ªå·±å¼€ä¸ªå‘ã€‚å› ä¸ºæœ¬äººæ˜¯ç¾åŒ–çˆ±å¥½è€…ï¼Œéš¾å¾—å¯ä»¥è‡ªå·±å¼€å‘ä¸€ä¸ªappï¼Œé‚£æœ¬appè‡ªç„¶æ˜¯ç•Œé¢ä¸èƒ½ä¸‘äº†ï¼Œ<del>åœ¨ä¿è¯å®ç”¨æ€§çš„åŸºç¡€ä¸Šæˆ‘ä¼šå¤§åŠ›åŠ ç‚¹èŠ±é‡Œèƒ¡å“¨çš„ä¸œè¥¿</del>ã€‚</p>
<h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><p>æ—¢ç„¶æ³¨å†Œäº†å½©äº‘appçš„è´¦å·ï¼Œé‚£æ—¢ç„¶è¿˜æ˜¯ç”¨è¿™ä¸ªapiå•¦ï¼Œæä¾›çš„æ•°æ®ä¹Ÿè¶³å¤Ÿç”¨äº†ã€‚è¿˜è¦æœé›†æ’å›¾ï¼Œè®¾è®¡ç•Œé¢ã€‚</p>
<h2 id="TODOï¼ˆç”»é¥¼ï¼‰"><a href="#TODOï¼ˆç”»é¥¼ï¼‰" class="headerlink" title="TODOï¼ˆç”»é¥¼ï¼‰"></a>TODOï¼ˆç”»é¥¼ï¼‰</h2><ul>
<li><input disabled="" type="checkbox"> ç”»launcher icon</li>
<li><input disabled="" type="checkbox"> æœé›†æ’å›¾</li>
<li><input disabled="" type="checkbox"> è®¾è®¡ç•Œé¢</li>
<li><input disabled="" type="checkbox"> å®ŒæˆåŸºç¡€åŠŸèƒ½</li>
<li><input disabled="" type="checkbox"> ä¼˜åŒ–å¥½æš—è‰²æ¨¡å¼</li>
<li><input disabled="" type="checkbox"> å‡çº§åŠ¨æ•ˆ</li>
<li><input disabled="" type="checkbox"> å¾…å®š</li>
</ul>
<h2 id="å¼€å‘"><a href="#å¼€å‘" class="headerlink" title="å¼€å‘"></a>å¼€å‘</h2><blockquote>
<p><a href="https://github.com/lnm011223/FIneWeather/tree/master">GitHubé¡¹ç›®åœ°å€</a>ï¼šå¯ä»¥æ¥æissueå“‡</p>
</blockquote>
<h3 id="ç¬¬ä¸€æ¬¡å¤±è´¥"><a href="#ç¬¬ä¸€æ¬¡å¤±è´¥" class="headerlink" title="ç¬¬ä¸€æ¬¡å¤±è´¥"></a>ç¬¬ä¸€æ¬¡å¤±è´¥</h3><p>æœ¬æ¥åœ¨dribbleæ‰¾äº†ä¸ªæŒºå¥½çœ‹çš„è®¾è®¡çš„ï¼Œä½†æ˜¯åœ¨GitHubä¸Šæ‰¾åˆ°çš„shadowåº“å…¨éƒ½ç”¨ä¸äº†ï¼Œå°±å‹‰å¼ºç”¨material designç¡¬ä¸Šäº†ï¼Œç„¶åå‘ç°å¥½å¤šä¸œè¥¿éƒ½ä¸ä¼šæ”¹ï¼Œäºæ˜¯ç¬¬ä¸€ç‰ˆè®¾è®¡ç»“æŸäº†ã€‚æ³ªç›®ï¼Œä¸¢ä¸ªå›¾çºªå¿µä¸€ä¸‹ã€‚å±å®æ˜¯å·®åˆ«æœ‰ç‚¹å¤§ã€‚</p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211020133316854.png"></p>
<h3 id="è®°å½•ä¸€ä¸ªå°æŠ€å·§"><a href="#è®°å½•ä¸€ä¸ªå°æŠ€å·§" class="headerlink" title="è®°å½•ä¸€ä¸ªå°æŠ€å·§"></a>è®°å½•ä¸€ä¸ªå°æŠ€å·§</h3><p>å…ˆæ”¾ä¸ªæ•ˆæœå›¾</p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211025210534105.png" alt="demo"></p>
<p>è§£é‡Šä¸€ä¸‹åŸç†ï¼š</p>
<p>å…ˆåˆ›å»ºä¸€ä¸ªbuttom appbarï¼Œç„¶ååœ¨è¿™ä¸ªéƒ¨ä»¶é‡ŒåµŒå…¥ä¸€ä¸ªbuttomnavigationï¼Œå†æŠŠbuttomnavigationçš„å³è¾¹è¾¹è·è®¾ç½®åœ¨fabçš„å·¦è¾¹ï¼Œå°±èƒ½åšå‡ºè¿™ä¸ªæ•ˆæœã€‚è¿™æ ·å°±å¯ä»¥åŒæ—¶æ‹¥æœ‰fabå’Œnavigationçš„ç‰¹æ€§</p>
<p>ä¸‹é¢æ˜¯ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.coordinatorlayout.widget.CoordinatorLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/coordinator&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;#235fd9&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.google.android.material.bottomappbar.BottomAppBar</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/bottomAppBar&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;bottom&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:backgroundTint</span>=<span class="string">&quot;#ffffff&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">&quot;@style/Widget.MaterialComponents.BottomAppBar.Colored&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:contentInsetEnd</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:contentInsetStart</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:fabAlignmentMode</span>=<span class="string">&quot;end&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:elevation</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">com.google.android.material.bottomnavigation.BottomNavigationView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/bottomNavigation&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginEnd</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:backgroundTint</span>=<span class="string">&quot;@android:color/transparent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:elevation</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:itemIconTint</span>=<span class="string">&quot;#585342&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:itemRippleColor</span>=<span class="string">&quot;?attr/colorOnSurface&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:itemTextColor</span>=<span class="string">&quot;#585342&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:labelVisibilityMode</span>=<span class="string">&quot;selected&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:menu</span>=<span class="string">&quot;@menu/navigation&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">            <span class="attr">android:elevation</span>=<span class="string">&quot;0dp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">com.google.android.material.bottomappbar.BottomAppBar</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.google.android.material.floatingactionbutton.FloatingActionButton</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/fab&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:backgroundTint</span>=<span class="string">&quot;#ffffff&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:contentDescription</span>=<span class="string">&quot;@string/todo&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">&quot;@drawable/ic_baseline_add_24&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:elevation</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:tint</span>=<span class="string">&quot;#585342&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_anchor</span>=<span class="string">&quot;@id/bottomAppBar&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.coordinatorlayout.widget.CoordinatorLayout</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>å¼€å‘</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>ç³»ç»Ÿè°ƒç”¨å’Œè¿›ç¨‹é€šä¿¡è¸©å‘è®°å½•</title>
    <url>/2021/11/20/Linux-system/</url>
    <content><![CDATA[<blockquote>
<p>æœ¬ç¯‡åšå®¢å‚è€ƒäº†dzcgiegieçš„å¥½æ–‡å•¦ï¼š<a href="https://dzcgood.xyz/2021/11/15/SystemCall_ProcessCommunication/">ç³»ç»Ÿè°ƒç”¨ä¸è¿›ç¨‹é€šä¿¡</a></p>
</blockquote>
<hr>
<h2 id="3-1-Linux-ä¹‹ç³»ç»Ÿè°ƒç”¨"><a href="#3-1-Linux-ä¹‹ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="3.1 Linux ä¹‹ç³»ç»Ÿè°ƒç”¨"></a>3.1 Linux ä¹‹ç³»ç»Ÿè°ƒç”¨</h2><blockquote>
<p>ä»»åŠ¡æè¿°ï¼šé€šè¿‡å¯¹ä½œä¸šäºŒå½¢æˆçš„ç³»ç»Ÿæ–°å†…æ ¸è¿›è¡Œç›¸åº”çš„ä¿®æ”¹ï¼ŒåŠ å…¥è‡ªå·±çš„ç³» ç»Ÿè°ƒç”¨ï¼Œå¹¶ä¸”åœ¨åº”ç”¨å±‚ç¼–å†™ä¸€åº”ç”¨ç¨‹åºå¯¹å…¶è¿›è¡Œè°ƒç”¨ï¼Œäº§ç”Ÿç›¸åº”çš„è¾“å‡ºç»™äºˆéªŒè¯ã€‚</p>
</blockquote>
<p><del>ä½œä¸ºä¸€ä¸ªæ‡’äººï¼Œé‚£è‚¯å®šè¦çœæ—¶é—´çš„æ–¹æ³•å•Šï¼Œè°ä¼šå†å»ç­‰è‡³å°‘ä¸€ä¸ªå°æ—¶çš„å†…æ ¸ç¼–è¯‘æ—¶é—´å•Š</del></p>
<h3 id="1-æŸ¥è¯¢-sys-call-table-çš„åœ°å€"><a href="#1-æŸ¥è¯¢-sys-call-table-çš„åœ°å€" class="headerlink" title="1.æŸ¥è¯¢ sys_call_table çš„åœ°å€"></a>1.æŸ¥è¯¢ sys_call_table çš„åœ°å€</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo cat /proc/kallsyms | grep sys_call_table</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211121000419205.png"></p>
<p>æ‰¾åˆ°sys_call_table çš„åœ°å€ä¸º<strong>0xffffffff91a013a0</strong></p>
<h3 id="2-æŸ¥è¯¢å¯ç”¨çš„ç³»ç»Ÿè°ƒç”¨å·"><a href="#2-æŸ¥è¯¢å¯ç”¨çš„ç³»ç»Ÿè°ƒç”¨å·" class="headerlink" title="2.æŸ¥è¯¢å¯ç”¨çš„ç³»ç»Ÿè°ƒç”¨å·"></a>2.æŸ¥è¯¢å¯ç”¨çš„ç³»ç»Ÿè°ƒç”¨å·</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cat /usr/include/asm-generic/unistd.h</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæˆ‘æ˜¯è¿™ä¸ªè·¯å¾„ï¼Œå…¶ä»–äººå¥½åƒä¸æ˜¯ï¼Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo find / -name unistd*.h</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211121094548170.png"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211121094955823.png"></p>
<p>åæ­£æ‰¾åˆ°è¿™ä¸ª<code>unistd</code>æ–‡ä»¶å°±è¡Œï¼Œç„¶åçœ‹ä¸€ä¸‹å“ªä¸ªå·æ²¡è¢«å ç”¨</p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211121001129248.png"></p>
<p>æ‰¾åˆ°<u><strong>415å·</strong></u>æ˜¯å¯ç”¨çš„ç³»ç»Ÿè°ƒç”¨å·</p>
<h3 id="3-åˆ›å»ºlnm-cæ–‡ä»¶"><a href="#3-åˆ›å»ºlnm-cæ–‡ä»¶" class="headerlink" title="3.åˆ›å»ºlnm.cæ–‡ä»¶"></a>3.åˆ›å»ºlnm.cæ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim lnm.c</span><br></pre></td></tr></table></figure>

<p>åœ¨æ–‡ä»¶å†…å®šä¹‰ç³»ç»Ÿè°ƒç”¨ï¼Œå…¶ä¸­ä½¿ç”¨åˆ°çš„ sys_call_table åœ°å€å’Œå¯ç”¨ç³»ç»Ÿè°ƒç”¨å·ä¸ºä¸Šé¢æ‰¾åˆ°çš„</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;linux/module.h&gt;</span></span></span><br><span class="line">MODULE_INFO(intree,<span class="string">&quot;Y&quot;</span>);</span><br><span class="line">MODULE_LICENSE(<span class="string">&quot;Dual BSD/GPL&quot;</span>);</span><br><span class="line">MODULE_AUTHOR(<span class="string">&quot;LNM&quot;</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SYS_CALL_TABLE_ADDRESS 0xffffffff91a013a0  <span class="comment">//sys_call_tableå¯¹åº”çš„åœ°å€</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NUM 415  <span class="comment">//ç³»ç»Ÿè°ƒç”¨å·ä¸º415</span></span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> __init <span class="title">hello_init</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  printk(KERN_INFO <span class="string">&quot;Welcome !  20192131031+liangnuoming\n&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> __exit <span class="title">hello_exit</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   printk(KERN_INFO <span class="string">&quot;Bye !  20192131031+liangnuoming\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">module_init(hello_init);</span><br><span class="line">module_exit(hello_exit);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="4-åˆ›å»ºMakefileè°ƒç”¨æ–‡ä»¶"><a href="#4-åˆ›å»ºMakefileè°ƒç”¨æ–‡ä»¶" class="headerlink" title="4.åˆ›å»ºMakefileè°ƒç”¨æ–‡ä»¶"></a>4.åˆ›å»ºMakefileè°ƒç”¨æ–‡ä»¶</h3><p>å…ˆè¿è¡Œä¸‹é¢çš„å‘½ä»¤æ‰¾åˆ°ç³»ç»Ÿå½“å‰çš„å†…æ ¸ï¼Œç„¶åå»/usr/src/ç›®å½•æ‰¾å¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œè®°ä½è¿™ä¸ªæ–‡ä»¶å¤¹çš„è·¯å¾„<code>/usr/src/linux-headers-5.4.0-88-generic</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">uname  -a</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211121004215247.png"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211121004446744.png"></p>
<p>ç„¶ååˆ›å»ºMakefileæ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim Makefile</span><br></pre></td></tr></table></figure>

<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="section">obj-m:=lnm.o</span></span><br><span class="line">CURRENT_PATH:=<span class="variable">$(<span class="built_in">shell</span> pwd)</span></span><br><span class="line">LINUX_KERNEL_PATH:=/usr/src/linux-headers-5.4.0-88-generic</span><br><span class="line"><span class="section">all:</span></span><br><span class="line">        make -C  <span class="variable">$(LINUX_KERNEL_PATH)</span> M=<span class="variable">$(CURRENT_PATH)</span> modules</span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">        make -C  <span class="variable">$(LINUX_KERNEL_PATH)</span> M=<span class="variable">$(CURRENT_PATH)</span> clean</span><br></pre></td></tr></table></figure>

<h3 id="5-å®‰è£…å†…æ ¸æ¨¡å—"><a href="#5-å®‰è£…å†…æ ¸æ¨¡å—" class="headerlink" title="5.å®‰è£…å†…æ ¸æ¨¡å—"></a>5.å®‰è£…å†…æ ¸æ¨¡å—</h3><p>æ‰§è¡Œ<code>sudo make</code><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211121011135879.png"></p>
<p>å¯ä»¥é€šè¿‡<code>ls | grep â€˜lnm.*â€™</code>æŸ¥çœ‹æ‰§è¡Œæ˜¯å¦æˆåŠŸ</p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211121011002126.png"></p>
<p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ’å…¥æ¨¡å—ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo insmod lnm.ko</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ£€æŸ¥æ’å…¥æ˜¯å¦æˆåŠŸï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">lsmod</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211121011434782.png"></p>
<p>å¯ä»¥çœ‹åˆ°<strong>lnm</strong>çš„æ¨¡å—ï¼Œæ’å…¥æˆåŠŸã€‚</p>
<h3 id="6-åˆ›å»ºtest-cè°ƒç”¨æ–‡ä»¶"><a href="#6-åˆ›å»ºtest-cè°ƒç”¨æ–‡ä»¶" class="headerlink" title="6.åˆ›å»ºtest.cè°ƒç”¨æ–‡ä»¶"></a>6.åˆ›å»ºtest.cè°ƒç”¨æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim test.c</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;linux/kernel.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/syscall.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">unsigned</span> <span class="keyword">long</span> x = <span class="number">0</span>;</span><br><span class="line">        x = syscall(<span class="number">415</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;è°ƒç”¨æµ‹è¯•æˆåŠŸ&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ <code>gcc test.c</code> å’Œ <code>./a.out</code> å‘½åæŸ¥çœ‹è¿è¡Œç»“æœï¼š</p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211121012942991.png"></p>
<p>é€šè¿‡ <code>dmesg</code> å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿè°ƒç”¨çš„ç»“æœï¼š</p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211121013038067.png"></p>
<p><strong>è¯´æ˜æ·»åŠ ç³»ç»Ÿè°ƒç”¨æˆåŠŸ</strong></p>
<h2 id="3-2-IPC"><a href="#3-2-IPC" class="headerlink" title="3.2 IPC"></a>3.2 IPC</h2><h3 id="ä»£ç å®è·µ-1ï¼š"><a href="#ä»£ç å®è·µ-1ï¼š" class="headerlink" title="ä»£ç å®è·µ 1ï¼š"></a>ä»£ç å®è·µ 1ï¼š</h3><blockquote>
<p>æœ¬äººåœ¨å­¦è€…ç½‘çš„è¯¾ç¨‹ä¸»é¡µä¸­ä¸Šä¼ äº†ç›¸å…³ Slidesï¼ˆæ•™å­¦èµ„æºé‡Œå ä¸ºâ€œLinux-OS.zipâ€œçš„å‹ç¼©åŒ…ï¼‰ï¼Œå…¶ç¬¬ 12ã€13 ç« å¯¹ä¸Šè¿°å››ç§ IPC æ–¹å¼çš„ä½¿ç”¨è¿‡ç¨‹å’Œ ç¤ºèŒƒä»£ç è¿›è¡Œäº†è¯¦ç»†çš„è§£é‡Šã€‚æ‰€ä»¥è¿™é‡Œå°±è¯·å¤§å®¶å…ˆæ ¹æ®ä¸Šè¿°å‹ç¼©åŒ…é‡Œçš„æ•™ç¨‹ï¼ŒæŠŠ å››ç§ IPC æ–¹å¼çš„ä»£ç åœ¨è‡ªå·±çš„è™šæ‹Ÿæœºé‡Œæ­£ç¡®çš„è¿è¡Œèµ·æ¥å¹¶ä»”ç»†ç†è§£ã€‚å› ä¸ºè¿™äº›éš¶ å±äºåº”ç”¨å±‚ä»£ç ï¼Œæ‰€ä»¥éš¾åº¦è¾ƒä½ã€‚</p>
</blockquote>
<p>è‹¥æ˜¯æ‰§è¡Œgccä»¥åæŠ¥é”™ï¼Œå¯ä»¥ç”¨man + å‡½æ•°å å‘½ä»¤è§£å†³è¯¥å¤´æ–‡ä»¶ç¼ºå¤±çš„é—®é¢˜</p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211121015027022.png"></p>
<p>ä¾‹å¦‚<code>man fork</code></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211121015239484.png"></p>
<h4 id="ç®¡é“-PIPE"><a href="#ç®¡é“-PIPE" class="headerlink" title="ç®¡é“ - PIPE"></a>ç®¡é“ - PIPE</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim pipe.c</span><br></pre></td></tr></table></figure>

<p>åˆ›å»º pipe.c æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> p1,fd[<span class="number">2</span>];</span><br><span class="line">    <span class="comment">//å®šä¹‰è¯»ç¼“å†²åŒº</span></span><br><span class="line">    <span class="keyword">char</span> outpipe[<span class="number">50</span>];</span><br><span class="line">    <span class="comment">//å®šä¹‰å†™ç¼“å†²åŒº</span></span><br><span class="line">    <span class="keyword">char</span> inpipe[<span class="number">50</span>];</span><br><span class="line">    <span class="comment">//åˆ›å»ºæ— åç®¡é“fd</span></span><br><span class="line">    pipe(fd);</span><br><span class="line">    <span class="keyword">while</span>((p1 = fork()) == <span class="number">-1</span>);</span><br><span class="line">    <span class="comment">//å­è¿›ç¨‹è¿”å›</span></span><br><span class="line">    <span class="keyword">if</span>(p1 == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">strcpy</span>(inpipe, <span class="string">&quot;This is a message!&quot;</span>);</span><br><span class="line">        <span class="comment">//å†™ä¿¡æ¯åˆ°ç®¡é“</span></span><br><span class="line">        write(fd[<span class="number">1</span>], inpipe, <span class="number">50</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span><span class="comment">//çˆ¶è¿›ç¨‹è¿”å›</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//ç­‰å¾…å­è¿›ç¨‹ç»ˆæ­¢</span></span><br><span class="line">        wait(<span class="number">0</span>);</span><br><span class="line">        <span class="comment">//ä»ç®¡é“è¯»ä¿¡æ¯åˆ°ç¼“å†²åŒº</span></span><br><span class="line">        read(fd[<span class="number">0</span>], outpipe, <span class="number">50</span>);</span><br><span class="line">        <span class="comment">//æ˜¾ç¤ºè¯»åˆ°çš„ä¿¡æ¯</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,outpipe);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œ<code>sudo gcc pipe.c -o pipe</code>å’Œ<code>./pipe</code></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211121015507060.png"></p>
<h4 id="ä¿¡å·-Signal"><a href="#ä¿¡å·-Signal" class="headerlink" title="ä¿¡å· - Signal"></a>ä¿¡å· - Signal</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim signal.c</span><br></pre></td></tr></table></figure>

<p>åˆ›å»º signal.c æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;signal.h&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> k;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">int_func</span><span class="params">(<span class="keyword">int</span> sig)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        k=<span class="number">0</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;int_func\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        signal(SIGINT,int_func);</span><br><span class="line">        k=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(k==<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">               <span class="built_in">printf</span>(<span class="string">&quot;Hello!20192131031 + liangnuoming\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;OK\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œ<code>sudo gcc signal.c -o signal</code>å’Œ<code>./signal</code></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211121020231298.png"></p>
<h4 id="æ¶ˆæ¯ä¼ é€’-Message-Passing-Interface"><a href="#æ¶ˆæ¯ä¼ é€’-Message-Passing-Interface" class="headerlink" title="æ¶ˆæ¯ä¼ é€’ - Message Passing Interface"></a>æ¶ˆæ¯ä¼ é€’ - Message Passing Interface</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim sndfile.c</span><br></pre></td></tr></table></figure>

<p>åˆ›å»º sndfile.cæ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/msg.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXMSG 512</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">my_msg</span> //å®šä¹‰æ¶ˆæ¯ç¼“å†²åŒºæ•°æ®ç»“æ„</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">int</span> my_msg_type;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">char</span> some_text[MAXMSG];</span><br><span class="line">&#125; msg;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> msgid;                            <span class="comment">//å®šä¹‰æ¶ˆæ¯ç¼“å†²åŒºå†…éƒ¨æ ‡è¯†</span></span><br><span class="line">    <span class="keyword">char</span> buffer[BUFSIZ];                  <span class="comment">//å®šä¹‰ç”¨æˆ·ç¼“å†²åŒº</span></span><br><span class="line">    msgid = msgget(<span class="number">12</span>,<span class="number">0666</span> | IPC_CREAT); <span class="comment">//åˆ›å»ºæ¶ˆæ¯é˜Ÿåˆ—ï¼Œ keyä¸º12</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;Enter some text:&quot;</span>);     <span class="comment">//æç¤ºé”®å…¥æ¶ˆæ¯å†…å­˜</span></span><br><span class="line">        fgets(buffer, BUFSIZ, <span class="built_in">stdin</span>); <span class="comment">//æ ‡å‡†è¾“å…¥é€buffer</span></span><br><span class="line">        msg.i++ ;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;i=%d\n&quot;</span>,msg.i);</span><br><span class="line">        msg.my_msg_type = <span class="number">3</span>;</span><br><span class="line">        <span class="built_in">strcpy</span>(msg.some_text, buffer);             <span class="comment">//bufferä¸­çš„å†…å®¹é€æ¶ˆæ¯ç¼“å†²</span></span><br><span class="line">        msgsnd(msgid, &amp;msg, MAXMSG, <span class="number">0</span>);            <span class="comment">//å‘é€æ¶ˆæ¯åˆ°æ¶ˆæ¯é˜Ÿåˆ—</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">strncmp</span>(msg.some_text, <span class="string">&quot;end&quot;</span>, <span class="number">3</span>) == <span class="number">0</span>) <span class="comment">//æ¶ˆæ¯ä¸ºendç»“æŸ</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim rcvfile.c</span><br></pre></td></tr></table></figure>

<p>åˆ›å»º rcvfile.cæ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/msg.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXMSG 512</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">my_msg</span>//å®šä¹‰æ¶ˆæ¯ç¼“å†²åŒºæ•°æ®ç»“æ„</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">int</span> my_msg_type;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">char</span> some_text[MAXMSG];</span><br><span class="line">&#125;msg;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> msgid;</span><br><span class="line">	msg.my_msg_type=<span class="number">3</span>;</span><br><span class="line">	msgid=msgget(<span class="number">12</span>,<span class="number">0666</span>|IPC_CREAT);<span class="comment">//è·å–æ¶ˆæ¯é˜Ÿåˆ—ã€‚Keyä¸º1234</span></span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		msgrcv(msgid,&amp;msg,BUFSIZ,msg.my_msg_type,<span class="number">0</span>);<span class="comment">//æ¥æ”¶æ¶ˆæ¯</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;You wrote:%s and i = %d\n&quot;</span>,msg.some_text,msg.i);<span class="comment">//æ˜¾ç¤ºæ¶ˆæ¯</span></span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">strncmp</span>(msg.some_text,<span class="string">&quot;end&quot;</span>,<span class="number">3</span>)==<span class="number">0</span>)<span class="comment">//æ¶ˆæ¯ä¸ºendåˆ™ç»“æŸ</span></span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	msgctl(msgid,IPC_RMID,<span class="number">0</span>);<span class="comment">//åˆ é™¤æ¶ˆæ¯é˜Ÿåˆ—</span></span><br><span class="line">	<span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œ<code>sudo gcc sndfile.c -o sndfile</code>å’Œ<code>sudo gcc rcvfile.c -o rcvfile</code></p>
<p>æ‰§è¡Œ<code>./sndfile</code></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211121021919778.png"></p>
<p>æ‰§è¡Œ<code>./rcvfile</code></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211121022001974.png"></p>
<h4 id="å…±äº«å†…å­˜-Shared-Memory"><a href="#å…±äº«å†…å­˜-Shared-Memory" class="headerlink" title="å…±äº«å†…å­˜ - Shared Memory"></a>å…±äº«å†…å­˜ - Shared Memory</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim sndshm.c</span><br></pre></td></tr></table></figure>

<p>åˆ›å»º sndshm.c æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/shm.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> shmid;</span><br><span class="line">    <span class="keyword">char</span> *viraddr;</span><br><span class="line">    <span class="keyword">char</span> buffer[BUFSIZ];</span><br><span class="line">    shmid = shmget(<span class="number">1234</span>, BUFSIZ, <span class="number">0666</span> | IPC_CREAT); <span class="comment">//åˆ›å»ºå…±äº«å†…å­˜</span></span><br><span class="line">    viraddr = (<span class="keyword">char</span>*)shmat(shmid, <span class="number">0</span>, <span class="number">0</span>);<span class="comment">//é™„æ¥åˆ°å…±äº«å†…å­˜</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;Enter some text:&quot;</span>);           <span class="comment">//æç¤ºç”¨æˆ·è¾“å…¥ä¿¡æ¯</span></span><br><span class="line">	fgets(buffer, BUFSIZ, <span class="built_in">stdin</span>);       <span class="comment">//å°†æ ‡å‡†è¾“å…¥é€å…¥åˆ°ç¼“å†²åŒºä¸­</span></span><br><span class="line">	<span class="built_in">strcat</span>(viraddr, buffer);            <span class="comment">//é‡‡ç”¨è¿½åŠ æ–¹å¼å†™åˆ°å…±äº«å†…å­˜</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">strncmp</span>(buffer, <span class="string">&quot;end&quot;</span>, <span class="number">3</span>) == <span class="number">0</span>) <span class="comment">//å½“è¾“å…¥çš„å­—ç¬¦ä¸º&quot;end&quot;æ—¶ï¼Œç»ˆæ­¢å¾ªç¯</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    shmdt(viraddr); <span class="comment">//åˆ‡æ–­ä¸å…±äº«å†…å­˜çš„é“¾æ¥</span></span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim rcvshm.c</span><br></pre></td></tr></table></figure>

<p>åˆ›å»º rcvshm.c æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/shm.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> shmid;</span><br><span class="line">    <span class="keyword">char</span> *viraddr;</span><br><span class="line">    shmid = shmget(<span class="number">1234</span>, BUFSIZ, <span class="number">0666</span> | IPC_CREAT); <span class="comment">//åˆ›å»ºå…±äº«å†…å­˜</span></span><br><span class="line">    viraddr = (<span class="keyword">char</span> *)shmat(shmid, <span class="number">0</span>, <span class="number">0</span>);           <span class="comment">//é™„æ¥åˆ°å…±äº«å†…å­˜</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Your message is ï¼š%s&quot;</span>, viraddr);        <span class="comment">//è¾“å‡ºå…±äº«å†…å­˜çš„å†…å®¹</span></span><br><span class="line">    shmdt(viraddr);                                 <span class="comment">//åˆ‡æ–­ä¸å…±äº«å†…å­˜çš„é“¾æ¥</span></span><br><span class="line">    shmctl(shmid, IPC_RMID, <span class="number">0</span>);<span class="comment">//é‡Šæ”¾å…±äº«å†…å­˜</span></span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œ<code>sudo gcc sndshm.c -o sndshm</code>å’Œ<code>sudo gcc rcvshm.c -o rcvshm</code></p>
<p>æ‰§è¡Œ<code>./sndshm</code>å’Œ<code>./rcvshm</code></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211121023045174.png"></p>
<h3 id="ä»£ç å®è·µ-2ï¼š"><a href="#ä»£ç å®è·µ-2ï¼š" class="headerlink" title="ä»£ç å®è·µ 2ï¼š"></a>ä»£ç å®è·µ 2ï¼š</h3><blockquote>
<p>è¯·å¯¹ä¸Šè¿° IPC æ–¹å¼çš„ç¬¬å››ç§â€”â€”å…±äº«å†…å­˜è¿›è¡Œæ”¹å†™ï¼Œå®ç°ä»¥ä¸‹ åœºæ™¯ã€‚ </p>
<ul>
<li>ï¼ˆ1ï¼‰åˆ›å»ºä¸¤å—å…±äº«å†…å­˜ M1 å’Œ M2ï¼›ç”¨æ•°æ®ç»“æ„â€œç¯å½¢é˜Ÿåˆ—/æ•°ç»„â€æ¥æŠ½è±¡ M1 å’Œ M2ï¼Œä¹Ÿå³ï¼Œæ¯ä¸ªå…±äº«å†…å­˜ä¸­çš„å­˜å‚¨å½¢å¼ä¸ºä¸€å¾ªç¯é˜Ÿåˆ—æˆ–æ•°ç»„ï¼Œå®¹é‡ä¸º 4096ï¼ˆå¯ ä»¥å®¹çº³ 4096 ä¸ªæ¶ˆæ¯ï¼‰ï¼› </li>
<li>ï¼ˆ2ï¼‰å‘é€è€…è¿›ç¨‹ï¼Œåä¸º Aï¼Œå‘ M1 ä¸­â€œç”Ÿäº§â€å¸¸è§„ä¿¡æ¯ï¼ˆå¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼‰ï¼Œä» M2 ä¸­â€œæ¶ˆè´¹â€æ§åˆ¶ä¿¡æ¯ï¼›æ¥æ”¶è€…è¿›ç¨‹ï¼Œåä¸º Bï¼Œå‘ M2â€œç”Ÿäº§â€æ§åˆ¶ä¿¡æ¯ï¼Œä» M1 ä¸­ â€œæ¶ˆè´¹â€å¸¸è§„ä¿¡æ¯ï¼›è¿™é‡Œå¯ä»¥ç†è§£ä¸ºï¼šM1 ä¸º A å‘ B å‘é€æ•°æ®çš„ç¼“å†²ï¼ˆData Bufferï¼‰ï¼Œ M2 åˆ™ä¸º B å‘ A å‘é€åº”ç­”ï¼ˆç¡®è®¤æ”¶åˆ°çš„åº”ç­”ï¼‰çš„ç¼“å†²ï¼ˆResponse Bufferï¼‰ï¼› </li>
<li>ï¼ˆ3ï¼‰åˆå§‹çŠ¶æ€ä¸‹ï¼ŒM1 å’Œ M2 çš†ä¸ºç©ºï¼›A é¦–å…ˆä¸»åŠ¨å‘ B å‘é€å¸¸è§„ä¿¡æ¯ï¼Œæ•°é‡ ä¸º[1-10]ä¸­çš„éšæœºæ•°ç›®ï¼ˆä½†æ˜¯æ¯æ¬¡å‘é€çš„æ•°æ®é‡è‚¯å®šä¸èƒ½è¶…è¿‡ M1 ä¸­çš„ç©ºé—²æ§½æ•° é‡ï¼‰ï¼›å‘é€ä¹‹åï¼ŒA å†å‘ B ä¼ é€ä¿¡å·ï¼ˆSignalï¼‰ï¼Œè¦å…¶æ¶ˆè´¹ M1ï¼› </li>
<li>ï¼ˆ4ï¼‰B æ”¶åˆ° A å‘é€æ¥çš„ä¿¡å·åï¼Œä» M1 ä¸­æ¶ˆè´¹ä¿¡æ¯ï¼Œæ•°é‡ä¸º[1-10]ä¸­çš„éšæœº æ•°é‡ï¼ˆä½†æ˜¯è‚¯å®šä¸èƒ½è¶…è¿‡ M1 ä¸­çš„å½“å‰å­˜åœ¨æ¶ˆæ¯æ•°ç›®ï¼‰ï¼›B å‘ M2 ä¸­ç”Ÿäº§åº”ç­”ä¿¡ æ¯ï¼Œæ•°ç›®ä¸ºå…¶æœ€è¿‘æ¶ˆè´¹ M1 çš„æ¶ˆæ¯ä¸ªæ•°ï¼Œå³ï¼šB ä¸€æ¬¡æ¶ˆè´¹çš„å¸¸è§„ä¿¡æ¯æ•°ï¼Œè¦ç­‰äº ç”Ÿäº§çš„åº”ç­”ä¿¡æ¯æ•°ï¼›ä¹‹åï¼ŒB å‘ A å‘é€ä¿¡å·ï¼Œè®©å…¶æ¥æ”¶åº”ç­”ä¿¡æ¯ï¼› </li>
<li>ï¼ˆ5ï¼‰A æ”¶åˆ°ä¿¡å·åï¼Œæ¶ˆè´¹åº”ç­”ä¿¡æ¯ï¼Œå¹¶ç»§ç»­å‘ M1 ä¸­ç”Ÿäº§å¸¸è§„ä¿¡æ¯ã€‚</li>
</ul>
</blockquote>
<p>æœ¬é¢˜å°±æ˜¯ä¸€ä¸ªpvæ“ä½œï¼ŒAè¯»å†™çš„æ—¶å€™Bä¸èƒ½è¯»å†™ï¼ŒBè¯»å†™çš„æ—¶å€™Aä¸èƒ½ï¼Œæ‰€ä»¥è®¾ç½®ä¸¤ä¸ªä¿¡å·é‡å°±èƒ½æ§åˆ¶è¿™ä¸ªé—®é¢˜ï¼Œè¾¾åˆ°è½®æµæ“ä½œçš„æ•ˆæœ</p>
<p>ä»£ç å‚è€ƒäº†<a href="https://dzcgood.xyz/2021/11/15/SystemCall_ProcessCommunication/">ç³»ç»Ÿè°ƒç”¨ä¸è¿›ç¨‹é€šä¿¡</a>ä¸<a href="https://www.cnblogs.com/harrypotterjackson/p/11997774.html">ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ å¤šè¿›ç¨‹å…±äº«å†…å­˜ - LightningStar</a>ï¼Œå¹¶æ”¹æˆäº†éšæ—¶é—´å˜åŒ–çš„éšæœºæ•°ï¼Œä½¿æ¯æ¬¡è¿è¡Œç»“æœéƒ½ä¸ºä¼ªéšæœºçš„</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/shm.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/ipc.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/sem.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_NUM 4096</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//int flag;</span></span><br><span class="line"><span class="comment">//å…±äº«å†…å­˜ç¼“å†²åŒºèµ„æºçš„å¾ªç¯é˜Ÿåˆ—</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Resource</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> message[MAX_NUM];</span><br><span class="line">    <span class="keyword">int</span> front;</span><br><span class="line">    <span class="keyword">int</span> rear;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//M1 M2</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Resource</span> <span class="title">M</span>[2];</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¿¡å·é‡æ•°æ®ç»“æ„</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">semun</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”¨äºæ˜ å°„ä¿¡å·é‡ç¼–å·ä¸å¯¹åº”æ„ä¹‰çš„æ˜ å°„</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">MUTEX</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="comment">//æ˜¯å¦å…è®¸Aæ“ä½œ</span></span><br><span class="line">    A_ENABLE,</span><br><span class="line">    <span class="comment">//æ˜¯å¦å…è®¸Bæ“ä½œ</span></span><br><span class="line">    B_ENABLE,</span><br><span class="line">    <span class="comment">//ä¿¡å·é‡ç›¸å…³</span></span><br><span class="line">    NUM_MUX</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¿¡å·é‡é›†åˆæè¿°ç¬¦</span></span><br><span class="line"><span class="keyword">int</span> semid;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…±äº«ç©ºé—´æè¿°ç¬¦ï¼ŒM1,M2å„å ä¸€ä¸ªç©ºé—´</span></span><br><span class="line"><span class="keyword">int</span> shmid[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…±äº«ç©ºé—´é¦–åœ°å€</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Resource</span> *<span class="title">shm</span>[2];</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»‘å®šå…±äº«å†…å­˜</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">attach_shm</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//å°†å…±äº«å†…å­˜è¿æ¥åˆ°å½“å‰è¿›ç¨‹çš„åœ°å€ç©ºé—´</span></span><br><span class="line">    shm[<span class="number">0</span>] = (struct Resource *)shmat(shmid[<span class="number">0</span>], <span class="literal">NULL</span>, <span class="number">0</span>);</span><br><span class="line">    shm[<span class="number">1</span>] = (struct Resource *)shmat(shmid[<span class="number">1</span>], <span class="literal">NULL</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (shm[<span class="number">0</span>] == (struct Resource *)<span class="number">-1</span> || shm[<span class="number">1</span>] == (struct Resource *)<span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;shmat failed\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(EXIT_FAILURE);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è§£ç»‘å…±äº«å†…å­˜</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">detach_shm</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//æŠŠå…±äº«å†…å­˜ä»å½“å‰è¿›ç¨‹ä¸­åˆ†ç¦»</span></span><br><span class="line">    <span class="keyword">if</span> (shmdt((<span class="keyword">void</span> *)shm[<span class="number">0</span>]) == <span class="number">-1</span> || shmdt((<span class="keyword">void</span> *)shm[<span class="number">1</span>]) == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;shmdt failed\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(EXIT_FAILURE);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–èµ„æºï¼Œå¯¹åº”ä¿¡å·é‡å®æ–½Pæ“ä½œ</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">P</span><span class="params">(<span class="keyword">short</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">sembuf</span> <span class="title">sb</span> =</span></span><br><span class="line">        &#123;</span><br><span class="line">            num, <span class="number">-1</span>, <span class="number">0</span> <span class="comment">//0è¡¨ç¤ºä¿¡å·é‡ç¼–å·,-1è¡¨ç¤ºPæ“ä½œ,SEM_UNDOè¡¨ç¤ºè¿›ç¨‹é€€å‡ºåï¼Œè¯¥è¿›ç¨‹å¯¹semè¿›è¡Œçš„æ“ä½œå°†è¢«æ’¤é”€</span></span><br><span class="line">        &#125;;</span><br><span class="line">    <span class="comment">//ä¿®æ”¹é›†åˆä¸­ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªä¿¡å·é‡å€¼</span></span><br><span class="line">    semop(semid, &amp;sb, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡Šæ”¾èµ„æºï¼Œå¯¹åº”ä¿¡å·é‡å®æ–½Væ“ä½œ</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">V</span><span class="params">(<span class="keyword">short</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">sembuf</span> <span class="title">sb</span> =</span> &#123;</span><br><span class="line">        num, <span class="number">1</span>, <span class="number">0</span> <span class="comment">//</span></span><br><span class="line">    &#125;;</span><br><span class="line">    semop(semid, &amp;sb, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¯»å–æ•°æ®ï¼Œidä¸º0ï¼Œè¡¨ç¤ºAåœ¨æ“ä½œï¼Œidä¸º2ï¼Œè¡¨ç¤ºBåœ¨æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">readMessage</span><span class="params">(<span class="keyword">int</span> id)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// id = 0ï¼Œè¯»å–M[1]ï¼Œid = 1ï¼Œè¯»å–M[0]</span></span><br><span class="line">    <span class="keyword">int</span> message = <span class="number">0</span>;</span><br><span class="line">    message = shm[-id + <span class="number">1</span>]-&gt;message[shm[-id + <span class="number">1</span>]-&gt;front];</span><br><span class="line">    shm[-id + <span class="number">1</span>]-&gt;front = (shm[-id + <span class="number">1</span>]-&gt;front + <span class="number">1</span>) % MAX_NUM;</span><br><span class="line">    <span class="comment">// printf(&quot;M%d -&gt; front = %d\n&quot;, -id + 2, shm[-id + 1]-&gt;front);</span></span><br><span class="line">    <span class="keyword">return</span> message;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å†™å…¥æ•°æ®ï¼Œidä¸º0ï¼Œè¡¨ç¤ºAåœ¨æ“ä½œï¼Œidä¸º2ï¼Œè¡¨ç¤ºBåœ¨æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">writeMessage</span><span class="params">(<span class="keyword">int</span> id)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    sleep(<span class="number">1.0</span>);</span><br><span class="line">    srand((<span class="keyword">unsigned</span>)time(<span class="literal">NULL</span>));</span><br><span class="line">    <span class="comment">//éšæœºç”Ÿæˆä¸€ä¸ªèŒƒå›´åœ¨[1,4096]çš„message</span></span><br><span class="line">    <span class="keyword">int</span> message = rand() % <span class="number">4096</span> + <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//idä¸º0ï¼Œå‘M[0]å†™å…¥ï¼Œidä¸º1ï¼Œå‘M[1]å†™å…¥</span></span><br><span class="line">    shm[id]-&gt;message[shm[id]-&gt;rear] = message;</span><br><span class="line">    shm[id]-&gt;rear = (shm[id]-&gt;rear + <span class="number">1</span>) % MAX_NUM;</span><br><span class="line">    <span class="comment">// printf(&quot;M%d -&gt; rear = %d\n&quot;, id + 1, shm[id]-&gt;rear);</span></span><br><span class="line">    <span class="keyword">return</span> message;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿›ç¨‹Açš„å·¥ä½œ</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processA</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    attach_shm();</span><br><span class="line">    <span class="comment">//sleep(1.0);</span></span><br><span class="line">    <span class="comment">//srand((unsigned)time(NULL));</span></span><br><span class="line">    <span class="comment">//extern int flag;</span></span><br><span class="line">    <span class="comment">//flag = rand()%10+1;</span></span><br><span class="line">    <span class="comment">//è¿™é‡Œè®©Aæ‰§è¡Œ4æ¬¡</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> m = <span class="number">0</span>; m &lt; <span class="number">4</span>; m++)</span><br><span class="line">    &#123;</span><br><span class="line">        P(A_ENABLE);</span><br><span class="line">        <span class="comment">//å½“å‰M1ä¸­å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">int</span> ele1Number = (shm[<span class="number">0</span>]-&gt;rear - shm[<span class="number">0</span>]-&gt;front + MAX_NUM) % MAX_NUM;</span><br><span class="line">        <span class="comment">//æœ€å¤šå†™å…¥ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">int</span> maxNum = MAX_NUM - ele1Number;</span><br><span class="line">	sleep(<span class="number">1.0</span>);</span><br><span class="line">        srand((<span class="keyword">unsigned</span>)time(<span class="literal">NULL</span>));</span><br><span class="line">        <span class="keyword">int</span> randInt = rand() % <span class="number">10</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">//é€‰ä¸€ä¸ªå°çš„æ•°ä½œä¸ºå†™å…¥çš„ä¿¡æ¯æ•°</span></span><br><span class="line">        <span class="keyword">int</span> times = maxNum &lt; randInt ? maxNum : randInt;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; times; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;A write message to   M1 : %d \n&quot;</span>, writeMessage(<span class="number">0</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¦‚æœM2é˜Ÿåˆ—ä¸ºç©ºï¼Œä¹Ÿå°±æ˜¯åˆšåˆšå¼€å§‹Aå‘Bï¼ŒBè¿˜æ²¡å‘Aå‘é€è¿‡ä¿¡æ¯</span></span><br><span class="line">        <span class="comment">//æ‰€ä»¥åªåœ¨M2æœ‰æ¶ˆæ¯çš„æ—¶å€™æ‰è¯»å–</span></span><br><span class="line">        <span class="keyword">if</span> (shm[<span class="number">1</span>]-&gt;front != shm[<span class="number">1</span>]-&gt;rear)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//å½“å‰M2ä¸­å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">            <span class="keyword">int</span> eleNumber = (shm[<span class="number">1</span>]-&gt;rear - shm[<span class="number">1</span>]-&gt;front + MAX_NUM) % MAX_NUM;</span><br><span class="line">            sleep(<span class="number">1.0</span>);</span><br><span class="line">	    srand((<span class="keyword">unsigned</span>)time(<span class="literal">NULL</span>));</span><br><span class="line">	    <span class="comment">//éšæœºè¯»å–[1, eleNumber]æ¬¡</span></span><br><span class="line">            <span class="keyword">int</span> times = rand() % eleNumber + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; times; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;A read  message from M2 : %d \n&quot;</span>, readMessage(<span class="number">0</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        V(B_ENABLE);</span><br><span class="line">    &#125;</span><br><span class="line">    detach_shm();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿›ç¨‹Bçš„å·¥ä½œ</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processB</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    attach_shm();</span><br><span class="line">    <span class="comment">//è¿™é‡Œè®©Bæ‰§è¡Œ4æ¬¡</span></span><br><span class="line">    <span class="comment">//sleep(1.0);</span></span><br><span class="line">    <span class="comment">//srand((unsigned)time(NULL));</span></span><br><span class="line">    <span class="comment">//int flag2 = rand()%flag+1;</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> m = <span class="number">0</span>; m &lt; <span class="number">4</span>; m++)</span><br><span class="line">    &#123;</span><br><span class="line">        P(B_ENABLE);</span><br><span class="line">        <span class="comment">//å½“å‰M1ä¸­å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">	sleep(<span class="number">1.0</span>);</span><br><span class="line">	srand((<span class="keyword">unsigned</span>)time(<span class="literal">NULL</span>));</span><br><span class="line">        <span class="keyword">int</span> eleNumber = (shm[<span class="number">0</span>]-&gt;rear - shm[<span class="number">0</span>]-&gt;front + MAX_NUM) % MAX_NUM;</span><br><span class="line">        <span class="keyword">int</span> randInt = rand() % <span class="number">10</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">//é€‰ä¸€ä¸ªå°çš„æ•°ä½œä¸ºè¯»å–çš„ä¿¡æ¯æ•°</span></span><br><span class="line">        <span class="keyword">int</span> times = eleNumber &lt; randInt ? eleNumber : randInt;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; times; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;B read  message from M1 : %d \n&quot;</span>, readMessage(<span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å‘M2å†™timesä¸ªä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; times; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;B write message to   M2 : %d \n&quot;</span>, writeMessage(<span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        V(A_ENABLE);</span><br><span class="line">    &#125;</span><br><span class="line">    detach_shm();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">extern</span> <span class="keyword">int</span> flag;</span><br><span class="line">    <span class="comment">//è®°å½•çˆ¶è¿›ç¨‹pid</span></span><br><span class="line">    <span class="keyword">pid_t</span> ppid = getpid();</span><br><span class="line">    <span class="comment">//ä¿¡å·é›†åå­—ï¼Œä¿¡å·é›†ä¸­ä¿¡å·é‡çš„ä¸ªæ•°ï¼Œä¿¡å·é‡é›†åˆçš„æƒé™</span></span><br><span class="line">    semid = semget((<span class="keyword">key_t</span>)<span class="number">1234</span>, NUM_MUX, IPC_CREAT | <span class="number">0600</span>); <span class="comment">//åˆ›å»ºä¿¡å·é‡</span></span><br><span class="line">    <span class="keyword">if</span> (semid == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        perror(<span class="string">&quot;semget&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–ä¿¡å·é‡</span></span><br><span class="line">    <span class="class"><span class="keyword">union</span> <span class="title">semun</span> <span class="title">s</span>;</span></span><br><span class="line">    <span class="comment">//åˆå§‹æ—¶ï¼Œå…è®¸Aæ‰§è¡Œ</span></span><br><span class="line">    s.value = <span class="number">1</span>;</span><br><span class="line">    semctl(semid, A_ENABLE, SETVAL, s);</span><br><span class="line">    <span class="comment">//åˆå§‹æ—¶ï¼Œä¸å…è®¸Bæ‰§è¡Œ</span></span><br><span class="line">    s.value = <span class="number">0</span>;</span><br><span class="line">    semctl(semid, B_ENABLE, SETVAL, s);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»ºå…±äº«å†…å­˜</span></span><br><span class="line">    shmid[<span class="number">0</span>] = shmget((<span class="keyword">key_t</span>)<span class="number">1234</span>, <span class="keyword">sizeof</span>(M[<span class="number">0</span>]), <span class="number">0666</span> | IPC_CREAT);</span><br><span class="line">    shmid[<span class="number">1</span>] = shmget((<span class="keyword">key_t</span>)<span class="number">5678</span>, <span class="keyword">sizeof</span>(M[<span class="number">1</span>]), <span class="number">0666</span> | IPC_CREAT);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (shmid[<span class="number">0</span>] == <span class="number">-1</span> || shmid[<span class="number">1</span>] == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;shmget failed\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(EXIT_FAILURE);</span><br><span class="line">    &#125;</span><br><span class="line">    attach_shm();</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–å…±äº«å†…å­˜</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(shm[i]-&gt;message, <span class="number">0</span>, <span class="keyword">sizeof</span>(shm[i]-&gt;message));</span><br><span class="line">        shm[i]-&gt;front = <span class="number">0</span>;</span><br><span class="line">        shm[i]-&gt;rear = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åˆ›å»º3ä¸ªè¿›ç¨‹ï¼š1ä¸ªçˆ¶è¿›ç¨‹ + 1ä¸ªA + 1ä¸ªB</span></span><br><span class="line">    <span class="keyword">pid_t</span> child_pid[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        child_pid[i] = fork();</span><br><span class="line">        <span class="comment">//å­è¿›ç¨‹</span></span><br><span class="line">        <span class="keyword">if</span> (child_pid[i] == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//A</span></span><br><span class="line">    <span class="keyword">if</span> (i == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        processA();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//B</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (i == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        processB();</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//çˆ¶è¿›ç¨‹</span></span><br><span class="line">    <span class="keyword">if</span> (getpid() == ppid)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//ç­‰å¾…å­è¿›ç¨‹ç»“æŸ</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            waitpid(child_pid[i], <span class="literal">NULL</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        detach_shm();</span><br><span class="line">        <span class="comment">//åˆ é™¤å…±äº«å†…å­˜</span></span><br><span class="line">        <span class="keyword">if</span> (shmctl(shmid[<span class="number">0</span>], IPC_RMID, <span class="number">0</span>) == <span class="number">-1</span> || shmctl(shmid[<span class="number">1</span>], IPC_RMID, <span class="number">0</span>) == <span class="number">-1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;shmctl(IPC_RMID) failed\n&quot;</span>);</span><br><span class="line">            <span class="built_in">exit</span>(EXIT_FAILURE);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211122004416639.png"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211122004451249.png"></p>
<h2 id="3-3-å¿ƒå¾—å’Œä½“ä¼š"><a href="#3-3-å¿ƒå¾—å’Œä½“ä¼š" class="headerlink" title="3.3 å¿ƒå¾—å’Œä½“ä¼š"></a>3.3 å¿ƒå¾—å’Œä½“ä¼š</h2><p>é€šè¿‡3.1çš„å†…æ ¸æ¨¡å—å­¦ä¼šäº†ä¸€äº›å…³äºå†…æ ¸æ¨¡å—ï¼ŒKOæ–‡ä»¶ï¼ŒMakefileçš„çŸ¥è¯†ï¼Œæ‡‚äº†æ€ä¹ˆæ’å…¥å’Œè‡ªå®šä¹‰å†…æ ¸æ¨¡å—ï¼Œå½“ç„¶äº†ï¼ŒæŒæ¡çš„è¿˜æ˜¯å¾ˆæµ…è–„ï¼Œä¸è¿‡ä¸‡ä¸ˆé«˜æ¥¼å¹³åœ°èµ·ï¼Œä¹Ÿç®—æ˜¯æœ‰äº†ä¸€ç‚¹åŸºç¡€ã€‚ä¸å¾—ä¸è¯´Linuxçš„å¯ç©æ€§æ¯”Windowså’ŒmacOSå¥½å¤ªå¤šäº†ï¼Œä¸è¿‡ä¹Ÿè¦æœ‰èƒ½åŠ›æ‰èƒ½ç©èµ·æ¥ã€‚</p>
<p>ä¸Šå­¦æœŸå­¦äº†æ“ä½œç³»ç»Ÿï¼Œä¸€ç›´æ²¡ä»€ä¹ˆå®è·µçš„æœºä¼šï¼Œè¿™æ¬¡å†™äº†ä¸€ä¸‹pvæ“ä½œçš„é€»è¾‘ï¼Œå­¦ä¼šäº†å‡ ä¸ªosç›¸å…³çš„apiï¼Œè™½ç„¶ä¹Ÿæ˜¯ä¸€çŸ¥åŠè§£çš„çŠ¶æ€ï¼Œä¸è¿‡æ„Ÿè§‰å¯¹åº•å±‚çš„ä¸œè¥¿æ•¬æ„åˆå¤šäº†ä¸å°‘ã€‚</p>
]]></content>
      <categories>
        <category>å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>System Call</tag>
        <tag>IPC</tag>
      </tags>
  </entry>
  <entry>
    <title>ç™»å½•æ³¨å†Œç•Œé¢çš„è®¾è®¡ä¸å®ç°</title>
    <url>/2021/11/22/Login-sample/</url>
    <content><![CDATA[<h1 id="ç™»å½•æ³¨å†Œç•Œé¢çš„è®¾è®¡ä¸å®ç°è¯´æ˜æ–‡æ¡£"><a href="#ç™»å½•æ³¨å†Œç•Œé¢çš„è®¾è®¡ä¸å®ç°è¯´æ˜æ–‡æ¡£" class="headerlink" title="ç™»å½•æ³¨å†Œç•Œé¢çš„è®¾è®¡ä¸å®ç°è¯´æ˜æ–‡æ¡£"></a>ç™»å½•æ³¨å†Œç•Œé¢çš„è®¾è®¡ä¸å®ç°è¯´æ˜æ–‡æ¡£</h1><h2 id="ä¸€ã€è½¯ä»¶åç§°"><a href="#ä¸€ã€è½¯ä»¶åç§°" class="headerlink" title="ä¸€ã€è½¯ä»¶åç§°"></a>ä¸€ã€è½¯ä»¶åç§°</h2><p>â€‹    ç®€æ˜“ç™»å½•æ³¨å†Œç•Œé¢</p>
<blockquote>
<p>Githubé¡¹ç›®åœ°å€ï¼š<a href="https://github.com/lnm011223/Login">https://github.com/lnm011223/Login</a>  , é‡Œé¢è¿˜æœ‰ä¸ªsimpleåˆ†æ”¯</p>
</blockquote>
<h2 id="äºŒã€è½¯ä»¶å†…å®¹ç®€ä»‹"><a href="#äºŒã€è½¯ä»¶å†…å®¹ç®€ä»‹" class="headerlink" title="äºŒã€è½¯ä»¶å†…å®¹ç®€ä»‹"></a>äºŒã€è½¯ä»¶å†…å®¹ç®€ä»‹</h2><p>ä¸€ä¸ªæœ‰è¾ƒä¸ºç¾è§‚ï¼ˆä¸ªäººè®¤ä¸ºï¼‰çš„ç™»å½•ï¼Œæ³¨å†Œï¼Œé‡ç½®å¯†ç ï¼Œç”¨æˆ·ç•Œé¢çš„è½¯ä»¶ï¼Œç”¨äº†Sqliteå¢åˆ æŸ¥æ”¹ç”¨æˆ·ä¿¡æ¯ï¼Œæ¯”è¾ƒå®Œæ•´çš„æ¨¡æ‹Ÿäº†ç™»å½•ï¼Œæ³¨å†Œï¼Œå¿˜è®°å¯†ç ï¼Œä¸‹çº¿ï¼Œæ³¨é”€ç­‰åŠŸèƒ½ï¼Œé€‚é…äº†æ·±è‰²æ¨¡å¼ï¼ˆ2021å¹´æ€ä¹ˆä¼šè¿˜æœ‰appä¸æ”¯æŒæ·±è‰²æ¨¡å¼å•Šï¼‰ã€‚</p>
<p>å®ç°äº†ä¸€äº›äººæ€§åŒ–çš„å°ç»†èŠ‚ï¼Œæ¯”å¦‚ç‚¹å‡»å¿˜è®°å¯†ç ä¼šè‡ªåŠ¨å¡«å……åœ¨ç™»å½•ç•Œé¢è¾“å…¥çš„è´¦å·åœ¨é‡ç½®å¯†ç ç•Œé¢ï¼Œé‡ç½®å¯†ç æ—¶å¦‚æœè´¦å·å’Œé‚®ç®±ä¸åŒ¹é…ï¼Œä¼šè‡ªåŠ¨æ¸…é™¤é‚®ç®±çš„å·²è¾“å…¥å†…å®¹ï¼Œæ˜¾ç¤ºå¯†ç ,è®°ä½å¯†ç ï¼Œè¿˜æœ‰å„ç§é”™è¯¯æé†’ï¼Œç­‰ç­‰ã€‚</p>
<h2 id="ä¸‰ã€ç•Œé¢è®¾è®¡"><a href="#ä¸‰ã€ç•Œé¢è®¾è®¡" class="headerlink" title="ä¸‰ã€ç•Œé¢è®¾è®¡"></a>ä¸‰ã€ç•Œé¢è®¾è®¡</h2><h4 id="1-ç™»å½•ç•Œé¢"><a href="#1-ç™»å½•ç•Œé¢" class="headerlink" title="1.ç™»å½•ç•Œé¢"></a>1.ç™»å½•ç•Œé¢</h4><blockquote>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/Sign%20in.png" alt="Sign in"></p>
</blockquote>
<h4 id="2-é‡ç½®å¯†ç ç•Œé¢"><a href="#2-é‡ç½®å¯†ç ç•Œé¢" class="headerlink" title="2.é‡ç½®å¯†ç ç•Œé¢"></a>2.é‡ç½®å¯†ç ç•Œé¢</h4><blockquote>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/Reset.png" alt="Reset"></p>
</blockquote>
<h4 id="3-æ³¨å†Œç•Œé¢"><a href="#3-æ³¨å†Œç•Œé¢" class="headerlink" title="3.æ³¨å†Œç•Œé¢"></a>3.æ³¨å†Œç•Œé¢</h4><blockquote>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/Sign%20up.png" alt="Sign up"></p>
</blockquote>
<h4 id="4-ç”¨æˆ·ä¿¡æ¯ç•Œé¢"><a href="#4-ç”¨æˆ·ä¿¡æ¯ç•Œé¢" class="headerlink" title="4.ç”¨æˆ·ä¿¡æ¯ç•Œé¢"></a>4.ç”¨æˆ·ä¿¡æ¯ç•Œé¢</h4><blockquote>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/User.png" alt="User"></p>
</blockquote>
<h4 id="5-æ·±è‰²æ¨¡å¼åŠè‹±æ–‡é€‚é…å±•ç¤º"><a href="#5-æ·±è‰²æ¨¡å¼åŠè‹±æ–‡é€‚é…å±•ç¤º" class="headerlink" title="5.æ·±è‰²æ¨¡å¼åŠè‹±æ–‡é€‚é…å±•ç¤º"></a>5.æ·±è‰²æ¨¡å¼åŠè‹±æ–‡é€‚é…å±•ç¤º</h4><blockquote>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/dark%20and%20english.png" alt="dark and english"></p>
</blockquote>
<h2 id="å››ã€å…³é”®ä»£ç "><a href="#å››ã€å…³é”®ä»£ç " class="headerlink" title="å››ã€å…³é”®ä»£ç "></a>å››ã€å…³é”®ä»£ç </h2><h3 id="1-Activityé€»è¾‘"><a href="#1-Activityé€»è¾‘" class="headerlink" title="1.Activityé€»è¾‘"></a>1.Activityé€»è¾‘</h3><blockquote>
<p>1.MainActivity.kt</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lnm011223.login</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.<span class="keyword">annotation</span>.SuppressLint</span><br><span class="line"><span class="keyword">import</span> android.app.ActivityOptions</span><br><span class="line"><span class="keyword">import</span> android.content.Context</span><br><span class="line"><span class="keyword">import</span> android.content.Intent</span><br><span class="line"><span class="keyword">import</span> android.content.res.Configuration</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle</span><br><span class="line"><span class="keyword">import</span> android.os.Build</span><br><span class="line"><span class="keyword">import</span> android.text.method.HideReturnsTransformationMethod</span><br><span class="line"><span class="keyword">import</span> android.text.method.PasswordTransformationMethod</span><br><span class="line"><span class="keyword">import</span> android.transition.Explode</span><br><span class="line"><span class="keyword">import</span> android.view.Window</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast</span><br><span class="line"><span class="keyword">import</span> androidx.<span class="keyword">annotation</span>.RequiresApi</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AlertDialog</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowInsetsCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowInsetsControllerCompat</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.Fragment</span><br><span class="line"><span class="keyword">import</span> kotlinx.android.synthetic.main.activity_main.*</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> : <span class="type">BaseActivity</span></span>() &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressLint(<span class="meta-string">&quot;Range&quot;</span>)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">        <span class="comment">//éå¸¸é‡è¦ï¼Œæ²¡æœ‰è¿™å¥è¯ç›‘å¬æ— æ³•ç”Ÿæ•ˆ</span></span><br><span class="line"></span><br><span class="line">        setContentView(R.layout.activity_main)</span><br><span class="line"></span><br><span class="line">        <span class="comment">//icon color -&gt; black</span></span><br><span class="line">        <span class="comment">//activity.getWindow().getDecorView().getWindowInsetsController().setSystemBarsAppearance(APPEARANCE_LIGHT_STATUS_BARS, APPEARANCE_LIGHT_STATUS_BARS);</span></span><br><span class="line">        <span class="comment">//icon color -&gt; white</span></span><br><span class="line">        <span class="comment">//activity.getWindow().getDecorView().getWindowInsetsController().setSystemBarsAppearance(0, APPEARANCE_LIGHT_STATUS_BARS);</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> counter = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">val</span> insetsController = WindowCompat.getInsetsController(</span><br><span class="line">            window, window.decorView</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">if</span> (!isDarkTheme(<span class="keyword">this</span>))&#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//insetsController?.isAppearanceLightStatusBars = true</span></span><br><span class="line">            <span class="comment">//insetsController?.isAppearanceLightNavigationBars = true</span></span><br><span class="line">            insetsController?.apply &#123;</span><br><span class="line">                isAppearanceLightStatusBars = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        insetsController?.systemBarsBehavior = WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE</span><br><span class="line">        insetsController?.hide(WindowInsetsCompat.Type.navigationBars())</span><br><span class="line">        window.statusBarColor = Color.TRANSPARENT</span><br><span class="line">        <span class="keyword">val</span> dbhelper = MyDatabaseHelper(<span class="keyword">this</span>,<span class="string">&quot;accountdata.db&quot;</span>,<span class="number">1</span>)</span><br><span class="line">        create_text.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">val</span> intent = Intent(<span class="keyword">this</span>,signup_Activity::<span class="keyword">class</span>.java)</span><br><span class="line">            startActivity(intent)</span><br><span class="line">        &#125;</span><br><span class="line">        forgot.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">val</span> account = signin_accountEdit.text.toString()</span><br><span class="line">            <span class="keyword">val</span> intent = Intent(<span class="keyword">this</span>,forgotActivity::<span class="keyword">class</span>.java)</span><br><span class="line">            intent.putExtra(<span class="string">&quot;forgot_account&quot;</span>,account)</span><br><span class="line">            startActivity(intent)</span><br><span class="line">            finish()</span><br><span class="line">        &#125;</span><br><span class="line">        show_check.setOnCheckedChangeListener &#123; compoundButton, b -&gt;</span><br><span class="line">            <span class="keyword">if</span> (b)&#123;</span><br><span class="line">                signin_passwordEdit.setTransformationMethod(HideReturnsTransformationMethod.getInstance())</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                signin_passwordEdit.setTransformationMethod(PasswordTransformationMethod.getInstance())</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">val</span> prefs = getPreferences(Context.MODE_PRIVATE)</span><br><span class="line">        <span class="keyword">val</span> isremember = prefs.getBoolean(<span class="string">&quot;remember_password&quot;</span>,<span class="literal">false</span>)</span><br><span class="line">        <span class="keyword">if</span> (isremember) &#123;</span><br><span class="line">            <span class="keyword">val</span> account_remember = prefs.getString(<span class="string">&quot;account&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line">            <span class="keyword">val</span> password_remember = prefs.getString(<span class="string">&quot;password&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line">            signin_accountEdit.setText(account_remember)</span><br><span class="line">            signin_passwordEdit.setText(password_remember)</span><br><span class="line">            remember_check.isChecked = <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">        signin_Button.setOnClickListener &#123;</span><br><span class="line">            counter--</span><br><span class="line">            <span class="keyword">var</span> flag1 = <span class="literal">true</span></span><br><span class="line">            <span class="keyword">val</span> account = signin_accountEdit.text.toString()</span><br><span class="line">            <span class="keyword">val</span> password = signin_passwordEdit.text.toString()</span><br><span class="line">            <span class="keyword">val</span> db = dbhelper.writableDatabase</span><br><span class="line">            <span class="keyword">val</span> cursor = db.query(<span class="string">&quot;accountdata&quot;</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">val</span> editor = prefs.edit()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (cursor.moveToFirst()) &#123;</span><br><span class="line">                <span class="keyword">do</span> &#123;</span><br><span class="line">                    <span class="keyword">val</span> account_exist = cursor.getString(cursor.getColumnIndex(<span class="string">&quot;account&quot;</span>))</span><br><span class="line">                    <span class="keyword">val</span> password_exist = cursor.getString(cursor.getColumnIndex(<span class="string">&quot;password&quot;</span>))</span><br><span class="line">                    <span class="keyword">val</span> email_exist = cursor.getString(cursor.getColumnIndex(<span class="string">&quot;email&quot;</span>))</span><br><span class="line">                    <span class="keyword">if</span> (account_exist==account &amp;&amp; password_exist==password &amp;&amp; account!= <span class="string">&quot;&quot;</span> &amp;&amp; password != <span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">                        flag1 = <span class="literal">false</span></span><br><span class="line">                        <span class="keyword">if</span> (remember_check.isChecked) &#123;</span><br><span class="line">                            editor.putBoolean(<span class="string">&quot;remember_password&quot;</span>,<span class="literal">true</span>)</span><br><span class="line">                            editor.putString(<span class="string">&quot;account&quot;</span>,account)</span><br><span class="line">                            editor.putString(<span class="string">&quot;password&quot;</span>,password)</span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                            editor.clear()</span><br><span class="line">                        &#125;</span><br><span class="line">                        editor.apply()</span><br><span class="line">                        <span class="keyword">val</span> intent = Intent(<span class="keyword">this</span>,userActivity::<span class="keyword">class</span>.java)</span><br><span class="line"></span><br><span class="line">                        intent.putExtra(<span class="string">&quot;user_name&quot;</span>,account)</span><br><span class="line">                        intent.putExtra(<span class="string">&quot;user_email&quot;</span>,email_exist)</span><br><span class="line">                        startActivity(intent)</span><br><span class="line">                        finish()</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;<span class="keyword">while</span> (cursor.moveToNext())</span><br><span class="line">            &#125;</span><br><span class="line">            cursor.close()</span><br><span class="line">            <span class="keyword">if</span> (flag1) &#123;</span><br><span class="line">                Toast.makeText(<span class="keyword">this</span>, <span class="string">&quot;å‰©ä½™å¯å°è¯•æ¬¡æ•°ä¸º <span class="variable">$counter</span> æ¬¡&quot;</span>, Toast.LENGTH_SHORT).show()</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (counter==<span class="number">0</span>) &#123;</span><br><span class="line">                AlertDialog.Builder(<span class="keyword">this</span>).apply &#123;</span><br><span class="line">                    setTitle(<span class="string">&quot;é”™è¯¯ï¼š&quot;</span>)</span><br><span class="line">                    setMessage(<span class="string">&quot;è´¦å·æˆ–å¯†ç é”™è¯¯ï¼Œè¯·æ£€æŸ¥æˆ–è€…é‡æ–°æ³¨å†Œ&quot;</span>)</span><br><span class="line">                    setCancelable(<span class="literal">false</span>)</span><br><span class="line">                    setPositiveButton(<span class="string">&quot;OK&quot;</span>) &#123; _, _ -&gt;</span><br><span class="line">                        ActivityCollector.finishAll()</span><br><span class="line">                        <span class="keyword">val</span> i = Intent(context, MainActivity::<span class="keyword">class</span>.java)</span><br><span class="line">                        context.startActivity(i)</span><br><span class="line">                        finish()</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    show()</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">isDarkTheme</span><span class="params">(context: <span class="type">Context</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        <span class="keyword">val</span> flag = context.resources.configuration.uiMode and Configuration.UI_MODE_NIGHT_MASK</span><br><span class="line">        <span class="keyword">return</span> flag == Configuration.UI_MODE_NIGHT_YES</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>2.signupActivity.kt</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lnm011223.login</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.ContentValues</span><br><span class="line"><span class="keyword">import</span> android.content.Context</span><br><span class="line"><span class="keyword">import</span> android.content.Intent</span><br><span class="line"><span class="keyword">import</span> android.content.res.Configuration</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AlertDialog</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowInsetsCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowInsetsControllerCompat</span><br><span class="line"><span class="keyword">import</span> kotlinx.android.synthetic.main.activity_main.*</span><br><span class="line"><span class="keyword">import</span> kotlinx.android.synthetic.main.activity_signup.*</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">signup_Activity</span> : <span class="type">BaseActivity</span></span>() &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">        setContentView(R.layout.activity_signup)</span><br><span class="line">        <span class="keyword">val</span> insetsController = WindowCompat.getInsetsController(</span><br><span class="line">            window, window.decorView</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">if</span> (!isDarkTheme(<span class="keyword">this</span>)) &#123;</span><br><span class="line"></span><br><span class="line">            insetsController?.isAppearanceLightStatusBars = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        insetsController?.hide(WindowInsetsCompat.Type.navigationBars())</span><br><span class="line">        insetsController?.systemBarsBehavior =</span><br><span class="line">            WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE</span><br><span class="line"></span><br><span class="line">        window.statusBarColor = Color.TRANSPARENT</span><br><span class="line"></span><br><span class="line">        <span class="keyword">val</span> dbhelper = MyDatabaseHelper(<span class="keyword">this</span>, <span class="string">&quot;accountdata.db&quot;</span>, <span class="number">1</span>)</span><br><span class="line">        already_text.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">val</span> intent = Intent(<span class="keyword">this</span>, MainActivity::<span class="keyword">class</span>.java)</span><br><span class="line">            startActivity(intent)</span><br><span class="line">            finish()</span><br><span class="line">        &#125;</span><br><span class="line">        signup_Button.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">val</span> db = dbhelper.writableDatabase</span><br><span class="line">            <span class="keyword">val</span> email = signup_emailEdit.text.toString()</span><br><span class="line">            <span class="keyword">val</span> account = signup_accountEdit.text.toString()</span><br><span class="line">            <span class="keyword">val</span> password = signup_passwordEdit.text.toString()</span><br><span class="line">            <span class="keyword">val</span> values = ContentValues().apply &#123;</span><br><span class="line">                <span class="comment">//ç»„è£…æ•°æ®</span></span><br><span class="line">                put(<span class="string">&quot;account&quot;</span>, account)</span><br><span class="line">                put(<span class="string">&quot;email&quot;</span>, email)</span><br><span class="line">                put(<span class="string">&quot;password&quot;</span>, password)</span><br><span class="line">            &#125;</span><br><span class="line">            db.insert(<span class="string">&quot;accountdata&quot;</span>, <span class="literal">null</span>, values)</span><br><span class="line">            AlertDialog.Builder(<span class="keyword">this</span>).apply &#123;</span><br><span class="line">                setTitle(<span class="string">&quot;æˆåŠŸï¼š&quot;</span>)</span><br><span class="line">                setMessage(<span class="string">&quot;å·²æˆåŠŸåˆ›å»ºè´¦æˆ·ï¼Œè¯·å›åˆ°ç™»å½•ç•Œé¢&quot;</span>)</span><br><span class="line"></span><br><span class="line">                setPositiveButton(<span class="string">&quot;OK&quot;</span>) &#123; _, _ -&gt;</span><br><span class="line">                    ActivityCollector.finishAll()</span><br><span class="line">                    <span class="keyword">val</span> i = Intent(context, MainActivity::<span class="keyword">class</span>.java)</span><br><span class="line">                    context.startActivity(i)</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                show()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">isDarkTheme</span><span class="params">(context: <span class="type">Context</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        <span class="keyword">val</span> flag = context.resources.configuration.uiMode and Configuration.UI_MODE_NIGHT_MASK</span><br><span class="line">        <span class="keyword">return</span> flag == Configuration.UI_MODE_NIGHT_YES</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>3.userActivity.kt</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lnm011223.login</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context</span><br><span class="line"><span class="keyword">import</span> android.content.Intent</span><br><span class="line"><span class="keyword">import</span> android.content.res.Configuration</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle</span><br><span class="line"><span class="keyword">import</span> android.util.Log</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AlertDialog</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowInsetsCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowInsetsControllerCompat</span><br><span class="line"><span class="keyword">import</span> kotlinx.android.synthetic.main.activity_user.*</span><br><span class="line"><span class="keyword">import</span> kotlin.math.log</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">userActivity</span> : <span class="type">BaseActivity</span></span>() &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">        setContentView(R.layout.activity_user)</span><br><span class="line">        <span class="keyword">val</span> insetsController = WindowCompat.getInsetsController(</span><br><span class="line">            window, window.decorView</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">if</span> (!isDarkTheme(<span class="keyword">this</span>))&#123;</span><br><span class="line"></span><br><span class="line">            insetsController?.isAppearanceLightStatusBars = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        insetsController?.hide(WindowInsetsCompat.Type.navigationBars())</span><br><span class="line">        insetsController?.systemBarsBehavior = WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE</span><br><span class="line"></span><br><span class="line">        window.statusBarColor = Color.TRANSPARENT</span><br><span class="line">        <span class="keyword">val</span> dbhelper = MyDatabaseHelper(<span class="keyword">this</span>, <span class="string">&quot;accountdata.db&quot;</span>, <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">val</span> user_nametext = intent.getStringExtra(<span class="string">&quot;user_name&quot;</span>)</span><br><span class="line">        <span class="keyword">val</span> user_emailtext = intent.getStringExtra(<span class="string">&quot;user_email&quot;</span>)</span><br><span class="line">        user_account.text = user_nametext</span><br><span class="line">        user_email.text = user_emailtext</span><br><span class="line">        signout_Button.setOnClickListener &#123;</span><br><span class="line">            ActivityCollector.finishAll()</span><br><span class="line">            <span class="keyword">val</span> i = Intent(<span class="keyword">this</span>, MainActivity::<span class="keyword">class</span>.java)</span><br><span class="line">            startActivity(i)</span><br><span class="line">        &#125;</span><br><span class="line">        delete_Button.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">val</span> db = dbhelper.writableDatabase</span><br><span class="line">            db.delete(<span class="string">&quot;accountdata&quot;</span>,<span class="string">&quot;account = ?&quot;</span>, arrayOf(user_nametext))</span><br><span class="line">            AlertDialog.Builder(<span class="keyword">this</span>).apply &#123;</span><br><span class="line">                setTitle(<span class="string">&quot;æˆåŠŸï¼š&quot;</span>)</span><br><span class="line">                setMessage(<span class="string">&quot;å·²åˆ é™¤è´¦å·ï¼&quot;</span>)</span><br><span class="line">                setCancelable(<span class="literal">false</span>)</span><br><span class="line">                setPositiveButton(<span class="string">&quot;OK&quot;</span>) &#123; _, _ -&gt;</span><br><span class="line">                    ActivityCollector.finishAll()</span><br><span class="line">                    <span class="keyword">val</span> i = Intent(context, MainActivity::<span class="keyword">class</span>.java)</span><br><span class="line">                    context.startActivity(i)</span><br><span class="line">                    finish()</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                show()</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">isDarkTheme</span><span class="params">(context: <span class="type">Context</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        <span class="keyword">val</span> flag = context.resources.configuration.uiMode and Configuration.UI_MODE_NIGHT_MASK</span><br><span class="line">        <span class="keyword">return</span> flag == Configuration.UI_MODE_NIGHT_YES</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>4.forgotActivity.kt</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lnm011223.login</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.<span class="keyword">annotation</span>.SuppressLint</span><br><span class="line"><span class="keyword">import</span> android.content.ContentValues</span><br><span class="line"><span class="keyword">import</span> android.content.Context</span><br><span class="line"><span class="keyword">import</span> android.content.Intent</span><br><span class="line"><span class="keyword">import</span> android.content.res.Configuration</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AlertDialog</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowInsetsCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowInsetsControllerCompat</span><br><span class="line"><span class="keyword">import</span> kotlinx.android.synthetic.main.activity_forgot.*</span><br><span class="line"><span class="keyword">import</span> kotlinx.android.synthetic.main.activity_main.*</span><br><span class="line"><span class="keyword">import</span> kotlinx.android.synthetic.main.activity_signup.*</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">forgotActivity</span> : <span class="type">AppCompatActivity</span></span>() &#123;</span><br><span class="line">    <span class="meta">@SuppressLint(<span class="meta-string">&quot;Range&quot;</span>)</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">        setContentView(R.layout.activity_forgot)</span><br><span class="line">        <span class="keyword">val</span> insetsController = WindowCompat.getInsetsController(</span><br><span class="line">            window, window.decorView</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">if</span> (!isDarkTheme(<span class="keyword">this</span>))&#123;</span><br><span class="line"></span><br><span class="line">            insetsController?.isAppearanceLightStatusBars = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        insetsController?.hide(WindowInsetsCompat.Type.navigationBars())</span><br><span class="line">        insetsController?.systemBarsBehavior = WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE</span><br><span class="line"></span><br><span class="line">        window.statusBarColor = Color.TRANSPARENT</span><br><span class="line">        <span class="keyword">val</span> dbhelper = MyDatabaseHelper(<span class="keyword">this</span>,<span class="string">&quot;accountdata.db&quot;</span>,<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">val</span> forgot_user= intent.getStringExtra(<span class="string">&quot;forgot_account&quot;</span>)</span><br><span class="line">        forgot_accountEdit.setText(forgot_user)</span><br><span class="line">        forgot_Button.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">var</span> flag1 = <span class="literal">true</span></span><br><span class="line">            <span class="keyword">val</span> email = forgot_emailEdit.text.toString()</span><br><span class="line">            <span class="keyword">val</span> account = forgot_accountEdit.text.toString()</span><br><span class="line">            <span class="keyword">val</span> password = forgot_passwordEdit.text.toString()</span><br><span class="line">            <span class="keyword">val</span> password1 = forgot_passwordEdit1.text.toString()</span><br><span class="line">            <span class="keyword">val</span> db = dbhelper.writableDatabase</span><br><span class="line">            <span class="keyword">val</span> cursor = db.query(<span class="string">&quot;accountdata&quot;</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">if</span> (cursor.moveToFirst()) &#123;</span><br><span class="line">                <span class="keyword">do</span> &#123;</span><br><span class="line">                    <span class="keyword">val</span> account_exist = cursor.getString(cursor.getColumnIndex(<span class="string">&quot;account&quot;</span>))</span><br><span class="line">                    <span class="keyword">val</span> password_exist = cursor.getString(cursor.getColumnIndex(<span class="string">&quot;password&quot;</span>))</span><br><span class="line">                    <span class="keyword">val</span> email_exist = cursor.getString(cursor.getColumnIndex(<span class="string">&quot;email&quot;</span>))</span><br><span class="line">                    <span class="keyword">if</span> (account_exist==account &amp;&amp; email_exist==email &amp;&amp; account!= <span class="string">&quot;&quot;</span> &amp;&amp; email != <span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">                        flag1 = <span class="literal">false</span></span><br><span class="line">                        <span class="keyword">if</span> (password==password1 &amp;&amp; password != <span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line"></span><br><span class="line">                            <span class="keyword">val</span> values = ContentValues()</span><br><span class="line">                            values.put(<span class="string">&quot;password&quot;</span>,password)</span><br><span class="line">                            db.update(<span class="string">&quot;accountdata&quot;</span>,values,<span class="string">&quot;account = ?&quot;</span>, arrayOf(account))</span><br><span class="line">                            AlertDialog.Builder(<span class="keyword">this</span>).apply &#123;</span><br><span class="line">                                setTitle(<span class="string">&quot;æˆåŠŸï¼š&quot;</span>)</span><br><span class="line">                                setMessage(<span class="string">&quot;å·²æˆåŠŸé‡ç½®å¯†ç ï¼Œè¯·å›åˆ°ç™»å½•ç•Œé¢&quot;</span>)</span><br><span class="line"></span><br><span class="line">                                setPositiveButton(<span class="string">&quot;OK&quot;</span>) &#123; _, _ -&gt;</span><br><span class="line">                                    ActivityCollector.finishAll()</span><br><span class="line">                                    <span class="keyword">val</span> i = Intent(context, MainActivity::<span class="keyword">class</span>.java)</span><br><span class="line">                                    context.startActivity(i)</span><br><span class="line"></span><br><span class="line">                                &#125;</span><br><span class="line"></span><br><span class="line">                                show()</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                            AlertDialog.Builder(<span class="keyword">this</span>).apply &#123;</span><br><span class="line">                                setTitle(<span class="string">&quot;é”™è¯¯ï¼š&quot;</span>)</span><br><span class="line">                                setMessage(<span class="string">&quot;ä¸¤æ¬¡å¯†ç ä¸ä¸€æ ·ï¼&quot;</span>)</span><br><span class="line"></span><br><span class="line">                                setPositiveButton(<span class="string">&quot;OK&quot;</span>) &#123; _, _ -&gt;</span><br><span class="line">                                    forgot_passwordEdit1.setText(<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line">                                &#125;</span><br><span class="line"></span><br><span class="line">                                show()</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;<span class="keyword">while</span> (cursor.moveToNext())</span><br><span class="line">            &#125;</span><br><span class="line">            cursor.close()</span><br><span class="line">            <span class="keyword">if</span> (flag1) &#123;</span><br><span class="line">                AlertDialog.Builder(<span class="keyword">this</span>).apply &#123;</span><br><span class="line">                    setTitle(<span class="string">&quot;é”™è¯¯ï¼š&quot;</span>)</span><br><span class="line">                    setMessage(<span class="string">&quot;é‚®ç®±ä¸è´¦å·ä¸åŒ¹é…ï¼Œè¯·æ£€æŸ¥ä¿¡æ¯ï¼&quot;</span>)</span><br><span class="line"></span><br><span class="line">                    setPositiveButton(<span class="string">&quot;OK&quot;</span>) &#123; _, _ -&gt;</span><br><span class="line">                        forgot_emailEdit.setText(<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    show()</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">isDarkTheme</span><span class="params">(context: <span class="type">Context</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        <span class="keyword">val</span> flag = context.resources.configuration.uiMode and Configuration.UI_MODE_NIGHT_MASK</span><br><span class="line">        <span class="keyword">return</span> flag == Configuration.UI_MODE_NIGHT_YES</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-å¸ƒå±€æ–‡ä»¶"><a href="#2-å¸ƒå±€æ–‡ä»¶" class="headerlink" title="2.å¸ƒå±€æ–‡ä»¶"></a>2.å¸ƒå±€æ–‡ä»¶</h3><blockquote>
<p>1.activity_main.xml</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:fitsSystemWindows</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/signin_text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;300dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;@string/welcome_back&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#2196F3&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;24sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;@+id/signin_image&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">&quot;0.497&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/signin_image&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;290dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;428dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">&quot;0.495&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:srcCompat</span>=<span class="string">&quot;@drawable/ic_undraw_secure_login_pdn4&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:ignore</span>=<span class="string">&quot;MissingConstraints&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:layout_editor_absoluteY</span>=<span class="string">&quot;-105dp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/linearLayout&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;345dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;190dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginHorizontal</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/signin_text&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;90dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;@string/account&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#2196F3&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;14sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/signin_accountEdit&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:inputType</span>=<span class="string">&quot;textPersonName&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:padding</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:backgroundTint</span>=<span class="string">&quot;#2196F3&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@drawable/bg_edittext_normal&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:paddingStart</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">                /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;115dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;@string/password&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;#2196F3&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;14sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/switch_button&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;@string/show&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:gravity</span>=<span class="string">&quot;end&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;#2196F3&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;14sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">androidx.appcompat.widget.AppCompatCheckBox</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/show_check&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:buttonTint</span>=<span class="string">&quot;#2196F3&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/signin_passwordEdit&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@drawable/bg_edittext_normal&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:padding</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:backgroundTint</span>=<span class="string">&quot;#2196F3&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:inputType</span>=<span class="string">&quot;textPassword&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:paddingStart</span>=<span class="string">&quot;15dp&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;@string/remember&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;#2196F3&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;14sp&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">androidx.appcompat.widget.AppCompatCheckBox</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/remember_check&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:buttonTint</span>=<span class="string">&quot;#2196F3&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/forgot&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;@string/forgot_password&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;#2196F3&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_gravity</span>=<span class="string">&quot;end&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:gravity</span>=<span class="string">&quot;end&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                     /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.google.android.material.button.MaterialButton</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/signin_Button&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;120dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;28dp&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">android:backgroundTint</span>=<span class="string">&quot;#2196F3&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;@string/sign_in&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textAllCaps</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:backgroundTint</span>=<span class="string">&quot;#2196F3&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">&quot;0.498&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/linearLayout&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:cornerRadius</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingVertical</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">&quot;@style/Widget.MaterialComponents.Button.UnelevatedButton&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;52dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">&quot;0.497&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/signin_Button&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;@string/new_user&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;#2196F3&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/create_text&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;@string/create_an_account&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;#2196F3&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>2.activity_forgot.xml</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.forgotActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/forgot_image&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;290dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;428dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:srcCompat</span>=<span class="string">&quot;@drawable/ic_undraw_forgot_password_re_hxwm&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/forgot_text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;300dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;@string/update_password&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#536DFE&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;24sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;@+id/forgot_image&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">&quot;0.497&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/linearLayout&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;345dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;275dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginHorizontal</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/forgot_text&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;90dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;@string/email&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#536DFE&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;14sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/forgot_emailEdit&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:inputType</span>=<span class="string">&quot;textPersonName&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:padding</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:backgroundTint</span>=<span class="string">&quot;#536DFE&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@drawable/bg_edittext_normal&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:paddingStart</span>=<span class="string">&quot;15dp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;90dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;@string/account&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#536DFE&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;14sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/forgot_accountEdit&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:inputType</span>=<span class="string">&quot;textPersonName&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:padding</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:backgroundTint</span>=<span class="string">&quot;#536DFE&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@drawable/bg_edittext_normal&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:paddingStart</span>=<span class="string">&quot;15dp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;@string/new_password&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#536DFE&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;14sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/forgot_passwordEdit&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@drawable/bg_edittext_normal&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:padding</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:backgroundTint</span>=<span class="string">&quot;#536DFE&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:inputType</span>=<span class="string">&quot;textPassword&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:paddingStart</span>=<span class="string">&quot;15dp&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;@string/verify_new_password&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#536DFE&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;14sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/forgot_passwordEdit1&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@drawable/bg_edittext_normal&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:padding</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:backgroundTint</span>=<span class="string">&quot;#536DFE&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:inputType</span>=<span class="string">&quot;textPassword&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:paddingStart</span>=<span class="string">&quot;15dp&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.google.android.material.button.MaterialButton</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/forgot_Button&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;120dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;28dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:cornerRadius</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:backgroundTint</span>=<span class="string">&quot;#536DFE&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;@string/update&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textAllCaps</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:backgroundTint</span>=<span class="string">&quot;#8bc34a&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">&quot;0.498&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/linearLayout&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingVertical</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">&quot;@style/Widget.MaterialComponents.Button.UnelevatedButton&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>3.activity_user.xml</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.userActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/user_image&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;290dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;428dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">&quot;0.495&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:srcCompat</span>=<span class="string">&quot;@drawable/ic_undraw_access_account_re_8spm&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:ignore</span>=<span class="string">&quot;MissingConstraints&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:layout_editor_absoluteY</span>=<span class="string">&quot;-58dp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/user_text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;@string/user_information&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#F9A826&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;24sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;@+id/user_image&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">&quot;0.497&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/user_image&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/linearLayout2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;289dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;120dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/bg_usertext_normal&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:backgroundTint</span>=<span class="string">&quot;#F9A826&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:padding</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/user_text&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;@string/account&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#F9A826&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/user_account&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;@string/email&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#F9A826&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/user_email&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.google.android.material.button.MaterialButton</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/signout_Button&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">&quot;@style/Widget.MaterialComponents.Button.UnelevatedButton&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;120dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:backgroundTint</span>=<span class="string">&quot;#F9A826&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingVertical</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;@string/sign_out&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textAllCaps</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:backgroundTint</span>=<span class="string">&quot;#F9A826&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:cornerRadius</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toStartOf</span>=<span class="string">&quot;@+id/delete_Button&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/linearLayout2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.google.android.material.button.MaterialButton</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:strokeWidth</span>=<span class="string">&quot;2dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:strokeColor</span>=<span class="string">&quot;#F9A826&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#F9A826&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/delete_Button&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">&quot;@style/Widget.MaterialComponents.Button.UnelevatedButton&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;120dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:backgroundTint</span>=<span class="string">&quot;#00000000&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingVertical</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;@string/delete_account&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textAllCaps</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:backgroundTint</span>=<span class="string">&quot;#F9A826&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:cornerRadius</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toEndOf</span>=<span class="string">&quot;@id/signout_Button&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/linearLayout2&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>4.activity_signup.xml</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.signup_Activity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/signup_image&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;290dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;428dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:srcCompat</span>=<span class="string">&quot;@drawable/ic_undraw_my_password_d_6_kg__1_&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/signup_text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;300dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;@string/create_account&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#8bc34a&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;24sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;@+id/signup_image&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">&quot;0.497&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/linearLayout&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;345dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;200dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginHorizontal</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/signup_text&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;90dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;@string/email&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#8bc34a&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;14sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/signup_emailEdit&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:inputType</span>=<span class="string">&quot;textPersonName&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:padding</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:backgroundTint</span>=<span class="string">&quot;#8bc34a&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@drawable/bg_edittext_normal&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:paddingStart</span>=<span class="string">&quot;15dp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;90dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;@string/account&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#8bc34a&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;14sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/signup_accountEdit&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:inputType</span>=<span class="string">&quot;textPersonName&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:padding</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:backgroundTint</span>=<span class="string">&quot;#8bc34a&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@drawable/bg_edittext_normal&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:paddingStart</span>=<span class="string">&quot;15dp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;90dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;@string/password&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#8bc34a&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;14sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/signup_passwordEdit&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@drawable/bg_edittext_normal&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:padding</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:backgroundTint</span>=<span class="string">&quot;#8bc34a&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:inputType</span>=<span class="string">&quot;textPassword&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:paddingStart</span>=<span class="string">&quot;15dp&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.google.android.material.button.MaterialButton</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/signup_Button&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;120dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;28dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:cornerRadius</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:backgroundTint</span>=<span class="string">&quot;#8bc34a&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;@string/sign_up&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textAllCaps</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:backgroundTint</span>=<span class="string">&quot;#8bc34a&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">&quot;0.498&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/linearLayout&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingVertical</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">&quot;@style/Widget.MaterialComponents.Button.UnelevatedButton&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;52dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">&quot;0.497&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/signup_Button&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;@string/already_have_an_account&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;#8bc34a&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/already_text&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;@string/sign_in&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;#8bc34a&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-Sqliteé€»è¾‘"><a href="#3-Sqliteé€»è¾‘" class="headerlink" title="3.Sqliteé€»è¾‘"></a>3.Sqliteé€»è¾‘</h3><blockquote>
<p>MyDatabaseHelper.kt</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lnm011223.login</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context</span><br><span class="line"><span class="keyword">import</span> android.database.sqlite.SQLiteDatabase</span><br><span class="line"><span class="keyword">import</span> android.database.sqlite.SQLiteOpenHelper</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDatabaseHelper</span></span>(<span class="keyword">val</span> context: Context,name: String,version: <span class="built_in">Int</span>): SQLiteOpenHelper(context,name,<span class="literal">null</span>,version) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> account_creat = <span class="string">&quot;create table accountdata (&quot;</span> +</span><br><span class="line">            <span class="string">&quot;id integer primary key autoincrement,&quot;</span> +</span><br><span class="line">            <span class="string">&quot;account text,&quot;</span> +</span><br><span class="line">            <span class="string">&quot;email text,&quot;</span> +</span><br><span class="line">            <span class="string">&quot;password text)&quot;</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(db: <span class="type">SQLiteDatabase</span>)</span></span> &#123;</span><br><span class="line">        db.execSQL(account_creat)</span><br><span class="line">        Toast.makeText(context,<span class="string">&quot;Create succeeded&quot;</span>,Toast.LENGTH_SHORT).show()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onUpgrade</span><span class="params">(db: <span class="type">SQLiteDatabase</span>?, oldVersion: <span class="type">Int</span>, newVersion: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="äº”ã€è½¯ä»¶æ“ä½œæµç¨‹"><a href="#äº”ã€è½¯ä»¶æ“ä½œæµç¨‹" class="headerlink" title="äº”ã€è½¯ä»¶æ“ä½œæµç¨‹"></a>äº”ã€è½¯ä»¶æ“ä½œæµç¨‹</h2><p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211116193524392.png" alt="image-20211116193524392"></p>
<h2 id="å…­ã€éš¾ç‚¹å’Œè§£å†³æ–¹æ¡ˆ"><a href="#å…­ã€éš¾ç‚¹å’Œè§£å†³æ–¹æ¡ˆ" class="headerlink" title="å…­ã€éš¾ç‚¹å’Œè§£å†³æ–¹æ¡ˆ"></a>å…­ã€éš¾ç‚¹å’Œè§£å†³æ–¹æ¡ˆ</h2><h4 id="1-çŠ¶æ€æ å›¾æ ‡é¢œè‰²åœ¨ç™½è‰²èƒŒæ™¯ä»¥åŠæ·±è‰²æ¨¡å¼ä¸‹çš„é€‚é…"><a href="#1-çŠ¶æ€æ å›¾æ ‡é¢œè‰²åœ¨ç™½è‰²èƒŒæ™¯ä»¥åŠæ·±è‰²æ¨¡å¼ä¸‹çš„é€‚é…" class="headerlink" title="1.çŠ¶æ€æ å›¾æ ‡é¢œè‰²åœ¨ç™½è‰²èƒŒæ™¯ä»¥åŠæ·±è‰²æ¨¡å¼ä¸‹çš„é€‚é…"></a>1.çŠ¶æ€æ å›¾æ ‡é¢œè‰²åœ¨ç™½è‰²èƒŒæ™¯ä»¥åŠæ·±è‰²æ¨¡å¼ä¸‹çš„é€‚é…</h4><p>è§£å†³æ–¹æ¡ˆï¼š</p>
<p>å¯ä»¥ç”¨API31æ‰æœ‰çš„<code>insetsController</code>åŠŸèƒ½ï¼Œå†å†™ä¸ª<code>isDarkTheme</code>å‡½æ•°åˆ¤æ–­æ˜¯å¦åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> insetsController = WindowCompat.getInsetsController(</span><br><span class="line">            window, window.decorView</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">if</span> (!isDarkTheme(<span class="keyword">this</span>))&#123;</span><br><span class="line"></span><br><span class="line">            insetsController?.isAppearanceLightStatusBars = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        insetsController?.systemBarsBehavior = WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE</span><br><span class="line">        insetsController?.hide(WindowInsetsCompat.Type.navigationBars())</span><br><span class="line">        window.statusBarColor = Color.TRANSPARENT</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">isDarkTheme</span><span class="params">(context: <span class="type">Context</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        <span class="keyword">val</span> flag = context.resources.configuration.uiMode and Configuration.UI_MODE_NIGHT_MASK</span><br><span class="line">        <span class="keyword">return</span> flag == Configuration.UI_MODE_NIGHT_YES</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-ç”¨æˆ·ä¿¡æ¯çš„å¤„ç†"><a href="#2-ç”¨æˆ·ä¿¡æ¯çš„å¤„ç†" class="headerlink" title="2.ç”¨æˆ·ä¿¡æ¯çš„å¤„ç†"></a>2.ç”¨æˆ·ä¿¡æ¯çš„å¤„ç†</h4><p>è§£å†³æ–¹æ¡ˆï¼š</p>
<p>å¯ä»¥åˆ©ç”¨Sqliteå¤„ç†ç”¨æˆ·ä¿¡æ¯ï¼Œå¢åˆ æŸ¥æ”¹åˆ†åˆ«å¯¹åº”æ³¨å†Œï¼Œæ³¨é”€ï¼Œç™»å½•ï¼Œé‡ç½®å¯†ç </p>
<h4 id="3-ç”¨æˆ·ä¸‹çº¿ç­‰æ“ä½œ"><a href="#3-ç”¨æˆ·ä¸‹çº¿ç­‰æ“ä½œ" class="headerlink" title="3.ç”¨æˆ·ä¸‹çº¿ç­‰æ“ä½œ"></a>3.ç”¨æˆ·ä¸‹çº¿ç­‰æ“ä½œ</h4><p>è§£å†³æ–¹æ¡ˆï¼š</p>
<p>å¯ä»¥ä½¿æ‰€æœ‰activityé‡æ–°ç»§æ‰¿ä¸€ä¸ª<code>baseactivity</code>çˆ¶ç±»ï¼Œé‡å†™ç›¸å…³å‡½æ•°</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lnm011223.login</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context</span><br><span class="line"><span class="keyword">import</span> android.content.res.Configuration</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle</span><br><span class="line"><span class="keyword">import</span> android.os.PersistableBundle</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowInsetsCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowInsetsControllerCompat</span><br><span class="line"></span><br><span class="line"><span class="keyword">open</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseActivity</span> : <span class="type">AppCompatActivity</span></span>() &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?, persistentState: <span class="type">PersistableBundle</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">        ActivityCollector.addActivity(<span class="keyword">this</span>)</span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onDestroy</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy()</span><br><span class="line">        ActivityCollector.removeActivity(<span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="ä¸ƒã€ä¸è¶³ä¹‹å¤„"><a href="#ä¸ƒã€ä¸è¶³ä¹‹å¤„" class="headerlink" title="ä¸ƒã€ä¸è¶³ä¹‹å¤„"></a>ä¸ƒã€ä¸è¶³ä¹‹å¤„</h2><ul>
<li>1.ç”¨æˆ·ä¿¡æ¯ä»¥æ˜æ–‡æ–¹å¼å­˜åœ¨æœ¬åœ°çš„æ•°æ®é‡Œï¼Œä¸å®‰å…¨ï¼Œå¯ä»¥åŠ æ··æ·†çš„åŠŸèƒ½</li>
<li>2.ä¸€ä¸ªçœŸæ­£çš„ç™»å½•åŠŸèƒ½åº”è¯¥æ˜¯ä»æœåŠ¡å™¨åŒ¹é…æ•°æ®ï¼Œå¯æƒœæˆ‘æš‚æ—¶æ²¡æœ‰ä¹°æœåŠ¡å™¨</li>
<li>3.è¿˜æ˜¯æœ‰å¾ˆå¤šå°ç»†èŠ‚æ²¡æœ‰é¡¾åŠåˆ°ï¼Œæ¯”å¦‚ä¸€äº›æ–‡å­—çš„é…è‰²æ‡’å¾—å»å¤„ç†äº†</li>
<li>4.å®é™…ä¸Šè¿˜æ˜¯æœ‰ç‚¹é€»è¾‘æ¼æ´çš„ï¼Œä½†æ˜¯ä¹Ÿè¶³å¤Ÿç”¨äº†</li>
</ul>
<h2 id="å…«ã€ä»Šåè®¾æƒ³"><a href="#å…«ã€ä»Šåè®¾æƒ³" class="headerlink" title="å…«ã€ä»Šåè®¾æƒ³"></a>å…«ã€ä»Šåè®¾æƒ³</h2><p>è¿™æ¬¡é”»ç‚¼äº† ä¸€ä¸‹è‡ªå®šä¹‰å¸ƒå±€æ–‡ä»¶ï¼Œsqliteæ“ä½œçš„èƒ½åŠ›ï¼Œæœ¬æ¥æƒ³ç”¨Roomè¿›è¡Œå¢åˆ æŸ¥æ”¹çš„ï¼Œä¸è¿‡æœ‰ç‚¹éº»çƒ¦</p>
<p>å¯ä»¥ç»§ç»­å®Œå–„å°ç»†èŠ‚ï¼Œå¹¶æ¥å…¥æœåŠ¡å™¨å­˜å‚¨ç”¨æˆ·ä¿¡æ¯</p>
]]></content>
      <categories>
        <category>ä½œä¸š</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>UI</tag>
      </tags>
  </entry>
  <entry>
    <title>æ—¥è®°æœ¬çš„å®ç°</title>
    <url>/2021/12/05/DiaryApp/</url>
    <content><![CDATA[<h1 id="æ—¥è®°æœ¬çš„è®¾è®¡ä¸å®ç°è¯´æ˜æ–‡æ¡£"><a href="#æ—¥è®°æœ¬çš„è®¾è®¡ä¸å®ç°è¯´æ˜æ–‡æ¡£" class="headerlink" title="æ—¥è®°æœ¬çš„è®¾è®¡ä¸å®ç°è¯´æ˜æ–‡æ¡£"></a>æ—¥è®°æœ¬çš„è®¾è®¡ä¸å®ç°è¯´æ˜æ–‡æ¡£</h1><h2 id="ä¸€ã€è½¯ä»¶åç§°"><a href="#ä¸€ã€è½¯ä»¶åç§°" class="headerlink" title="ä¸€ã€è½¯ä»¶åç§°"></a>ä¸€ã€è½¯ä»¶åç§°</h2><p>â€‹    ç®€æ˜“æ—¥è®°æœ¬</p>
<blockquote>
<p>GitHubé¡¹ç›®åœ°å€ï¼š<a href="https://github.com/lnm011223/My_diary/">https://github.com/lnm011223/My_diary/</a></p>
</blockquote>
<h2 id="äºŒã€è½¯ä»¶å†…å®¹ç®€ä»‹"><a href="#äºŒã€è½¯ä»¶å†…å®¹ç®€ä»‹" class="headerlink" title="äºŒã€è½¯ä»¶å†…å®¹ç®€ä»‹"></a>äºŒã€è½¯ä»¶å†…å®¹ç®€ä»‹</h2><p>ä¸€ä¸ªæ¯”è¾ƒç¾è§‚çš„æ—¥è®°æœ¬ï¼Œæœ‰ç®€å•çš„è®°å½•ï¼Œä¿®æ”¹ï¼Œåˆ é™¤ï¼ŒæŸ¥çœ‹æ—¥è®°çš„åŠŸèƒ½ï¼Œå¯¹åº”äº†sqliteçš„å¢åˆ æŸ¥æ”¹ï¼ˆæœ¬æ¥æƒ³ç”¨roomçš„ï¼Œä¸è¿‡å†™å®Œäº†å‘ç°æœ‰é—®é¢˜ï¼Œæ‡’å¾—debugäº†ï¼Œè¿˜æ˜¯sqliteé¡ºæ‰‹ï¼‰ã€‚</p>
<p>è¿™æ¬¡å†™çš„è¿˜æ˜¯æ¯”è¾ƒç—›è‹¦çš„ï¼Œrecycleviewå’Œå„ç§ä¸ç†Ÿæ‚‰çš„ä¸œè¥¿åŠ èµ·æ¥ï¼Œå¸ƒå±€ä¹Ÿå¼„äº†ä¸ªæ¯”è¾ƒå¤æ‚çš„å¸ƒå±€ï¼Œä¸€æ­¥æ­¥è°ƒæ•´åˆ°ç°åœ¨çš„æ ·å­ï¼Œè¿™æ¬¡çš„é…è‰²å’Œå¸ƒå±€å‚è€ƒäº†æˆ‘åœ¨iOSä¸Šç”¨çš„ä¸€ä¸ªæ—¥è®°è½¯ä»¶ã€‚</p>
<p>æœ‰ä¸€äº›æœ‰è¶£çš„å°åŠŸèƒ½å•¦ï¼Œæ¯”å¦‚äº”ä¸ªemojiå›¾æ ‡ï¼Œç‚¹æŒ‰åæ‰ä¼šå˜äº®</p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211205210854751.png"></p>
<h2 id="ä¸‰ã€ç•Œé¢è®¾è®¡"><a href="#ä¸‰ã€ç•Œé¢è®¾è®¡" class="headerlink" title="ä¸‰ã€ç•Œé¢è®¾è®¡"></a>ä¸‰ã€ç•Œé¢è®¾è®¡</h2><h4 id="1-æ—¥è®°åˆ—è¡¨"><a href="#1-æ—¥è®°åˆ—è¡¨" class="headerlink" title="1.æ—¥è®°åˆ—è¡¨"></a>1.æ—¥è®°åˆ—è¡¨</h4><blockquote>
<img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211205233951208.png" alt="" style="zoom: 25%;" />
</blockquote>
<h4 id="2-æ–°å»ºæ—¥è®°"><a href="#2-æ–°å»ºæ—¥è®°" class="headerlink" title="2.æ–°å»ºæ—¥è®°"></a>2.æ–°å»ºæ—¥è®°</h4><blockquote>
<img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211205234105432.png" alt="" style="zoom:25%;" />
</blockquote>
<h4 id="3-ä¿®æ”¹æ—¥å†"><a href="#3-ä¿®æ”¹æ—¥å†" class="headerlink" title="3.ä¿®æ”¹æ—¥å†"></a>3.ä¿®æ”¹æ—¥å†</h4><blockquote>
<img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211205234142498.png" alt="" style="zoom:25%;" />
</blockquote>
<p>4.åˆ é™¤æ—¥å†</p>
<blockquote>
<img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211205234217125.png" alt="" style="zoom:25%;" />
</blockquote>
<h2 id="å››ã€å…³é”®ä»£ç "><a href="#å››ã€å…³é”®ä»£ç " class="headerlink" title="å››ã€å…³é”®ä»£ç "></a>å››ã€å…³é”®ä»£ç </h2><h3 id="1-Activityé€»è¾‘"><a href="#1-Activityé€»è¾‘" class="headerlink" title="1.Activityé€»è¾‘"></a>1.Activityé€»è¾‘</h3><blockquote>
<p>1.MainActivity.kt</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lnm011223.my_diary</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context</span><br><span class="line"><span class="keyword">import</span> android.content.Intent</span><br><span class="line"><span class="keyword">import</span> android.content.res.Configuration</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle</span><br><span class="line"><span class="keyword">import</span> com.google.android.material.bottomnavigation.BottomNavigationView</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity</span><br><span class="line"><span class="keyword">import</span> androidx.core.net.toUri</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowInsetsCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowInsetsControllerCompat</span><br><span class="line"><span class="keyword">import</span> androidx.navigation.findNavController</span><br><span class="line"><span class="keyword">import</span> androidx.navigation.ui.AppBarConfiguration</span><br><span class="line"><span class="keyword">import</span> androidx.navigation.ui.setupActionBarWithNavController</span><br><span class="line"><span class="keyword">import</span> androidx.navigation.ui.setupWithNavController</span><br><span class="line"><span class="keyword">import</span> com.lnm011223.my_diary.databinding.ActivityMainBinding</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> : <span class="type">AppCompatActivity</span></span>() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">lateinit</span> <span class="keyword">var</span> binding: ActivityMainBinding</span><br><span class="line">    <span class="keyword">var</span> image_uri = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">var</span> mood_id:<span class="built_in">Int</span> = R.drawable.mood_1</span><br><span class="line">    <span class="keyword">var</span> datetext:String = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">var</span> diarytext:String = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line"></span><br><span class="line">        binding = ActivityMainBinding.inflate(layoutInflater)</span><br><span class="line">        setContentView(binding.root)</span><br><span class="line">        <span class="keyword">val</span> dbHelper = MyDatabaseHelper(MyApplication.context,<span class="string">&quot;DiaryData.db&quot;</span>,<span class="number">1</span>)</span><br><span class="line">        dbHelper.writableDatabase</span><br><span class="line"></span><br><span class="line">        <span class="keyword">val</span> navView: BottomNavigationView = binding.navView</span><br><span class="line"></span><br><span class="line">        <span class="keyword">val</span> navController = findNavController(R.id.nav_host_fragment_activity_main)</span><br><span class="line">        <span class="comment">// Passing each menu ID as a set of Ids because each</span></span><br><span class="line">        <span class="comment">// menu should be considered as top level destinations.</span></span><br><span class="line">        <span class="comment">//val appBarConfiguration = AppBarConfiguration(</span></span><br><span class="line">        <span class="comment">//    setOf(</span></span><br><span class="line">        <span class="comment">//        R.id.navigation_home, R.id.navigation_dashboard, R.id.navigation_notifications</span></span><br><span class="line">        <span class="comment">//    )</span></span><br><span class="line">        <span class="comment">//)</span></span><br><span class="line">        <span class="comment">//setupActionBarWithNavController(navController, appBarConfiguration)</span></span><br><span class="line">        navView.setupWithNavController(navController)</span><br><span class="line">        <span class="keyword">val</span> insetsController = WindowCompat.getInsetsController(</span><br><span class="line">            window, window.decorView</span><br><span class="line">        )</span><br><span class="line">        window.statusBarColor = Color.parseColor(<span class="string">&quot;#F3F3EC&quot;</span>)</span><br><span class="line">        window.navigationBarColor = Color.parseColor(<span class="string">&quot;#ffffff&quot;</span>)</span><br><span class="line">        insetsController?.systemBarsBehavior = WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE</span><br><span class="line">        insetsController?.hide(WindowInsetsCompat.Type.navigationBars())</span><br><span class="line">        <span class="keyword">if</span> (!isDarkTheme(<span class="keyword">this</span>))&#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//insetsController?.isAppearanceLightStatusBars = true</span></span><br><span class="line">            <span class="comment">//insetsController?.isAppearanceLightNavigationBars = true</span></span><br><span class="line">            insetsController?.apply &#123;</span><br><span class="line">                isAppearanceLightStatusBars = <span class="literal">true</span></span><br><span class="line">                isAppearanceLightNavigationBars = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        binding.fab.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">val</span> intent = Intent(<span class="keyword">this</span>,AddActivity::<span class="keyword">class</span>.java)</span><br><span class="line">            startActivityForResult(intent,<span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onActivityResult</span><span class="params">(requestCode: <span class="type">Int</span>, resultCode: <span class="type">Int</span>, <span class="keyword">data</span>: <span class="type">Intent</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, <span class="keyword">data</span>)</span><br><span class="line">        <span class="keyword">when</span> (requestCode) &#123;</span><br><span class="line">            <span class="number">1</span> -&gt; <span class="keyword">if</span> (resultCode == RESULT_OK) &#123;</span><br><span class="line">                image_uri = <span class="keyword">data</span>?.getStringExtra(<span class="string">&quot;image_uri&quot;</span>).toString()</span><br><span class="line">                mood_id = <span class="keyword">data</span>?.getIntExtra(<span class="string">&quot;mood_id&quot;</span>,R.drawable.mood_1)!!</span><br><span class="line">                datetext = <span class="keyword">data</span>.getStringExtra(<span class="string">&quot;date_text&quot;</span>).toString()</span><br><span class="line">                diarytext = <span class="keyword">data</span>.getStringExtra(<span class="string">&quot;diary_text1&quot;</span>).toString()</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">isDarkTheme</span><span class="params">(context: <span class="type">Context</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        <span class="keyword">val</span> flag = context.resources.configuration.uiMode and Configuration.UI_MODE_NIGHT_MASK</span><br><span class="line">        <span class="keyword">return</span> flag == Configuration.UI_MODE_NIGHT_YES</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>2.AddActivity.kt</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lnm011223.my_diary</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.<span class="keyword">annotation</span>.SuppressLint</span><br><span class="line"><span class="keyword">import</span> android.app.Activity</span><br><span class="line"><span class="keyword">import</span> android.content.ContentValues</span><br><span class="line"><span class="keyword">import</span> android.content.Context</span><br><span class="line"><span class="keyword">import</span> android.content.Intent</span><br><span class="line"><span class="keyword">import</span> android.content.res.Configuration</span><br><span class="line"><span class="keyword">import</span> android.graphics.BitmapFactory</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color</span><br><span class="line"><span class="keyword">import</span> android.net.Uri</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowInsetsCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowInsetsControllerCompat</span><br><span class="line"><span class="keyword">import</span> com.lnm011223.my_diary.databinding.ActivityAddBinding</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat</span><br><span class="line"><span class="keyword">import</span> java.util.*</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AddActivity</span> : <span class="type">AppCompatActivity</span></span>() &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">lateinit</span> <span class="keyword">var</span> binding: ActivityAddBinding</span><br><span class="line">    <span class="keyword">var</span> mood_flag:<span class="built_in">Int</span> = R.drawable.mood_1</span><br><span class="line">    <span class="keyword">var</span> uri1: String = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="meta">@SuppressLint(<span class="meta-string">&quot;SimpleDateFormat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">val</span> formAlbum = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> flag1 = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> flag2 = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> flag3 = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> flag4 = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> flag5 = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">        binding = ActivityAddBinding.inflate(layoutInflater)</span><br><span class="line">        setContentView(binding.root)</span><br><span class="line">        binding.dateText.text = SimpleDateFormat(<span class="string">&quot;MM æœˆ dd æ—¥ E&quot;</span>).format(Date())</span><br><span class="line">        <span class="keyword">val</span> insetsController = WindowCompat.getInsetsController(</span><br><span class="line">            window, window.decorView</span><br><span class="line">        )</span><br><span class="line">        window.statusBarColor = Color.parseColor(<span class="string">&quot;#F3F3EC&quot;</span>)</span><br><span class="line">        window.navigationBarColor = Color.parseColor(<span class="string">&quot;#F3F3EC&quot;</span>)</span><br><span class="line">        insetsController?.systemBarsBehavior = WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE</span><br><span class="line">        insetsController?.hide(WindowInsetsCompat.Type.navigationBars())</span><br><span class="line">        <span class="keyword">if</span> (!isDarkTheme(<span class="keyword">this</span>))&#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//insetsController?.isAppearanceLightStatusBars = true</span></span><br><span class="line">            <span class="comment">//insetsController?.isAppearanceLightNavigationBars = true</span></span><br><span class="line">            insetsController?.apply &#123;</span><br><span class="line">                isAppearanceLightStatusBars = <span class="literal">true</span></span><br><span class="line">                isAppearanceLightNavigationBars = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">val</span> dbHelper = MyDatabaseHelper(MyApplication.context,<span class="string">&quot;DiaryData.db&quot;</span>,<span class="number">1</span>)</span><br><span class="line">        dbHelper.writableDatabase</span><br><span class="line"></span><br><span class="line">        binding.imageShow.setOnClickListener &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">val</span> intent = Intent(Intent.ACTION_OPEN_DOCUMENT)</span><br><span class="line">            intent.addCategory(Intent.CATEGORY_OPENABLE)</span><br><span class="line">            intent.type = <span class="string">&quot;image/*&quot;</span></span><br><span class="line">            startActivityForResult(intent,formAlbum)</span><br><span class="line">        &#125;</span><br><span class="line">        binding.mood1Image.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">if</span> (flag1 == <span class="literal">false</span>) &#123;</span><br><span class="line">                binding.mood1Image.setImageResource(R.drawable.mood_1)</span><br><span class="line">                flag1 = <span class="literal">true</span></span><br><span class="line">                changeOther(binding.mood1Image,flag1)</span><br><span class="line">                mood_flag = R.drawable.mood_1</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                binding.mood1Image.setImageResource(R.drawable.mood_1_last)</span><br><span class="line">                flag1 = <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        binding.mood2Image.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">if</span> (flag2 == <span class="literal">false</span>) &#123;</span><br><span class="line">                binding.mood2Image.setImageResource(R.drawable.mood_2)</span><br><span class="line">                flag2 = <span class="literal">true</span></span><br><span class="line">                changeOther(binding.mood2Image,flag2)</span><br><span class="line">                mood_flag = R.drawable.mood_2</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                binding.mood2Image.setImageResource(R.drawable.mood_2_last)</span><br><span class="line">                flag2 = <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        binding.mood3Image.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">if</span> (flag3 == <span class="literal">false</span>) &#123;</span><br><span class="line">                binding.mood3Image.setImageResource(R.drawable.mood_3)</span><br><span class="line">                flag3 = <span class="literal">true</span></span><br><span class="line">                changeOther(binding.mood3Image,flag3)</span><br><span class="line">                mood_flag = R.drawable.mood_3</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                binding.mood3Image.setImageResource(R.drawable.mood_3_last)</span><br><span class="line">                flag3 = <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        binding.mood4Image.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">if</span> (flag4 == <span class="literal">false</span>) &#123;</span><br><span class="line">                binding.mood4Image.setImageResource(R.drawable.mood_4)</span><br><span class="line">                flag4 = <span class="literal">true</span></span><br><span class="line">                changeOther(binding.mood4Image,flag4)</span><br><span class="line">                mood_flag = R.drawable.mood_4</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                binding.mood4Image.setImageResource(R.drawable.mood_4_last)</span><br><span class="line">                flag4 = <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        binding.mood5Image.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">if</span> (flag5 == <span class="literal">false</span>) &#123;</span><br><span class="line">                binding.mood5Image.setImageResource(R.drawable.mood_5)</span><br><span class="line">                flag5 = <span class="literal">true</span></span><br><span class="line">                changeOther(binding.mood5Image,flag5)</span><br><span class="line">                mood_flag = R.drawable.mood_5</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                binding.mood5Image.setImageResource(R.drawable.mood_5_last)</span><br><span class="line">                flag5 = <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        binding.completeButton.setOnClickListener &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">val</span> diary_text = binding.diarytextEdit.text.toString()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">val</span> intent = Intent()</span><br><span class="line">            <span class="keyword">val</span> db = dbHelper.writableDatabase</span><br><span class="line">            <span class="keyword">val</span> diary_value = ContentValues().apply &#123;</span><br><span class="line">                put(<span class="string">&quot;imageuri&quot;</span>,uri1)</span><br><span class="line">                put(<span class="string">&quot;moodid&quot;</span>,mood_flag)</span><br><span class="line">                put(<span class="string">&quot;datetext&quot;</span>,SimpleDateFormat(<span class="string">&quot;MM æœˆ dd æ—¥ E&quot;</span>).format(Date()))</span><br><span class="line">                put(<span class="string">&quot;diarytext&quot;</span>,diary_text)</span><br><span class="line">            &#125;</span><br><span class="line">            db.insert(<span class="string">&quot;diarydata&quot;</span>,<span class="literal">null</span>,diary_value)</span><br><span class="line"></span><br><span class="line">            intent.apply &#123;</span><br><span class="line">                putExtra(<span class="string">&quot;image_uri&quot;</span>,uri1)</span><br><span class="line">                putExtra(<span class="string">&quot;mood_id&quot;</span>,mood_flag)</span><br><span class="line">                putExtra(<span class="string">&quot;date_text&quot;</span>,SimpleDateFormat(<span class="string">&quot;dd E&quot;</span>).format(Date()))</span><br><span class="line">                putExtra(<span class="string">&quot;diary_text1&quot;</span>,diary_text)</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            setResult(RESULT_OK,intent)</span><br><span class="line">            finish()</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onActivityResult</span><span class="params">(requestCode: <span class="type">Int</span>, resultCode: <span class="type">Int</span>, <span class="keyword">data</span>: <span class="type">Intent</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, <span class="keyword">data</span>)</span><br><span class="line">        <span class="keyword">when</span> (requestCode) &#123;</span><br><span class="line">            formAlbum -&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (resultCode == Activity.RESULT_OK &amp;&amp; <span class="keyword">data</span> != <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">data</span>.<span class="keyword">data</span>?.let &#123; uri -&gt;</span><br><span class="line">                        uri1 = uri.toString()</span><br><span class="line">                        <span class="keyword">val</span> bitmap = getBitmapFromuri(uri)</span><br><span class="line">                        binding.imageShow.setImageURI(uri)</span><br><span class="line">                        binding.imageShow.setPadding(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">getBitmapFromuri</span><span class="params">(uri: <span class="type">Uri</span>)</span></span> = contentResolver.openFileDescriptor(uri,<span class="string">&quot;r&quot;</span>)?.use &#123; BitmapFactory.decodeFileDescriptor(it.fileDescriptor) &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">isDarkTheme</span><span class="params">(context: <span class="type">Context</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        <span class="keyword">val</span> flag = context.resources.configuration.uiMode and Configuration.UI_MODE_NIGHT_MASK</span><br><span class="line">        <span class="keyword">return</span> flag == Configuration.UI_MODE_NIGHT_YES</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">changeOther</span><span class="params">(imageView: <span class="type">ImageView</span>,flag:<span class="type">Boolean</span>)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (flag==<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">when</span> (imageView) &#123;</span><br><span class="line">                binding.mood1Image -&gt; &#123;</span><br><span class="line">                    binding.apply &#123;</span><br><span class="line">                        mood2Image.setImageResource(R.drawable.mood_2_last)</span><br><span class="line">                        mood3Image.setImageResource(R.drawable.mood_3_last)</span><br><span class="line">                        mood4Image.setImageResource(R.drawable.mood_4_last)</span><br><span class="line">                        mood5Image.setImageResource(R.drawable.mood_5_last)</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                    flag2 = <span class="literal">false</span></span><br><span class="line">                    flag3 = <span class="literal">false</span></span><br><span class="line">                    flag4 = <span class="literal">false</span></span><br><span class="line">                    flag5 = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                binding.mood2Image -&gt; &#123;</span><br><span class="line">                    binding.apply &#123;</span><br><span class="line">                        mood1Image.setImageResource(R.drawable.mood_1_last)</span><br><span class="line">                        mood3Image.setImageResource(R.drawable.mood_3_last)</span><br><span class="line">                        mood4Image.setImageResource(R.drawable.mood_4_last)</span><br><span class="line">                        mood5Image.setImageResource(R.drawable.mood_5_last)</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                    flag1 = <span class="literal">false</span></span><br><span class="line">                    flag3 = <span class="literal">false</span></span><br><span class="line">                    flag4 = <span class="literal">false</span></span><br><span class="line">                    flag5 = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                binding.mood3Image -&gt; &#123;</span><br><span class="line">                    binding.apply &#123;</span><br><span class="line">                        mood2Image.setImageResource(R.drawable.mood_2_last)</span><br><span class="line">                        mood1Image.setImageResource(R.drawable.mood_1_last)</span><br><span class="line">                        mood4Image.setImageResource(R.drawable.mood_4_last)</span><br><span class="line">                        mood5Image.setImageResource(R.drawable.mood_5_last)</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                    flag2 = <span class="literal">false</span></span><br><span class="line">                    flag1 = <span class="literal">false</span></span><br><span class="line">                    flag4 = <span class="literal">false</span></span><br><span class="line">                    flag5 = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                binding.mood4Image -&gt; &#123;</span><br><span class="line">                    binding.apply &#123;</span><br><span class="line">                        mood2Image.setImageResource(R.drawable.mood_2_last)</span><br><span class="line">                        mood3Image.setImageResource(R.drawable.mood_3_last)</span><br><span class="line">                        mood1Image.setImageResource(R.drawable.mood_1_last)</span><br><span class="line">                        mood5Image.setImageResource(R.drawable.mood_5_last)</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                    flag2 = <span class="literal">false</span></span><br><span class="line">                    flag3 = <span class="literal">false</span></span><br><span class="line">                    flag1 = <span class="literal">false</span></span><br><span class="line">                    flag5 = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                binding.mood5Image -&gt; &#123;</span><br><span class="line">                    binding.apply &#123;</span><br><span class="line">                        mood2Image.setImageResource(R.drawable.mood_2_last)</span><br><span class="line">                        mood3Image.setImageResource(R.drawable.mood_3_last)</span><br><span class="line">                        mood4Image.setImageResource(R.drawable.mood_4_last)</span><br><span class="line">                        mood1Image.setImageResource(R.drawable.mood_1_last)</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                    flag2 = <span class="literal">false</span></span><br><span class="line">                    flag3 = <span class="literal">false</span></span><br><span class="line">                    flag4 = <span class="literal">false</span></span><br><span class="line">                    flag1 = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>3.ReviseActivity.kt</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lnm011223.my_diary</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.<span class="keyword">annotation</span>.SuppressLint</span><br><span class="line"><span class="keyword">import</span> android.app.Activity</span><br><span class="line"><span class="keyword">import</span> android.content.ContentValues</span><br><span class="line"><span class="keyword">import</span> android.content.Context</span><br><span class="line"><span class="keyword">import</span> android.content.Intent</span><br><span class="line"><span class="keyword">import</span> android.content.res.Configuration</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView</span><br><span class="line"><span class="keyword">import</span> androidx.core.net.toUri</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowInsetsCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowInsetsControllerCompat</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.lnm011223.my_diary.databinding.ActivityReviseBinding</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat</span><br><span class="line"><span class="keyword">import</span> java.util.*</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReviseActivity</span> : <span class="type">AppCompatActivity</span></span>() &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">lateinit</span> <span class="keyword">var</span> binding: ActivityReviseBinding</span><br><span class="line">    <span class="keyword">var</span> mood_flag:<span class="built_in">Int</span> = R.drawable.mood_1</span><br><span class="line">    <span class="keyword">var</span> uri1: String = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="meta">@SuppressLint(<span class="meta-string">&quot;SimpleDateFormat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">val</span> formAlbum = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> flag1 = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> flag2 = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> flag3 = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> flag4 = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> flag5 = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">        binding = ActivityReviseBinding.inflate(layoutInflater)</span><br><span class="line">        setContentView(binding.root)</span><br><span class="line">        <span class="keyword">val</span> dbHelper = MyDatabaseHelper(MyApplication.context,<span class="string">&quot;DiaryData.db&quot;</span>,<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">val</span> db = dbHelper.writableDatabase</span><br><span class="line">        <span class="keyword">val</span> insetsController = WindowCompat.getInsetsController(</span><br><span class="line">            window, window.decorView</span><br><span class="line">        )</span><br><span class="line">        window.statusBarColor = Color.parseColor(<span class="string">&quot;#F3F3EC&quot;</span>)</span><br><span class="line">        window.navigationBarColor = Color.parseColor(<span class="string">&quot;#F3F3EC&quot;</span>)</span><br><span class="line">        insetsController?.systemBarsBehavior = WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE</span><br><span class="line">        insetsController?.hide(WindowInsetsCompat.Type.navigationBars())</span><br><span class="line">        <span class="keyword">if</span> (!isDarkTheme(<span class="keyword">this</span>))&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            insetsController?.apply &#123;</span><br><span class="line">                isAppearanceLightStatusBars = <span class="literal">true</span></span><br><span class="line">                isAppearanceLightNavigationBars = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">val</span> datetext = intent.getStringExtra(<span class="string">&quot;datetext&quot;</span>)</span><br><span class="line">        <span class="keyword">var</span> diarytext = intent.getStringExtra(<span class="string">&quot;diarytext&quot;</span>)</span><br><span class="line">        <span class="keyword">var</span> imageuri = intent.getStringExtra(<span class="string">&quot;imageuri&quot;</span>)?.toUri()</span><br><span class="line">        <span class="comment">//val moodid = intent.getIntExtra(&quot;moodid&quot;,R.drawable.mood_1)</span></span><br><span class="line">        binding.dateText.text = datetext</span><br><span class="line">        binding.diarytextEdit.setText(diarytext)</span><br><span class="line">        binding.imageShow.setImageURI(imageuri)</span><br><span class="line">        <span class="keyword">val</span> diarytext_backup = intent.getStringExtra(<span class="string">&quot;diarytext&quot;</span>)</span><br><span class="line"></span><br><span class="line">        binding.completeButton.setOnClickListener &#123;</span><br><span class="line">            diarytext = binding.diarytextEdit.text.toString()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">val</span> diary_value = ContentValues().apply &#123;</span><br><span class="line">                put(<span class="string">&quot;imageuri&quot;</span>,uri1)</span><br><span class="line">                put(<span class="string">&quot;moodid&quot;</span>,mood_flag)</span><br><span class="line"></span><br><span class="line">                put(<span class="string">&quot;diarytext&quot;</span>,diarytext)</span><br><span class="line">            &#125;</span><br><span class="line">            db.update(<span class="string">&quot;diarydata&quot;</span>,diary_value,<span class="string">&quot;diarytext = ?&quot;</span>, arrayOf(diarytext_backup))</span><br><span class="line">            finish()</span><br><span class="line">        &#125;</span><br><span class="line">        binding.imageShow.setOnClickListener &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">val</span> intent = Intent(Intent.ACTION_OPEN_DOCUMENT)</span><br><span class="line">            intent.addCategory(Intent.CATEGORY_OPENABLE)</span><br><span class="line">            intent.type = <span class="string">&quot;image/*&quot;</span></span><br><span class="line">            startActivityForResult(intent,formAlbum)</span><br><span class="line">        &#125;</span><br><span class="line">        binding.mood1Image.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">if</span> (flag1 == <span class="literal">false</span>) &#123;</span><br><span class="line">                binding.mood1Image.setImageResource(R.drawable.mood_1)</span><br><span class="line">                flag1 = <span class="literal">true</span></span><br><span class="line">                changeOther(binding.mood1Image,flag1)</span><br><span class="line">                mood_flag = R.drawable.mood_1</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                binding.mood1Image.setImageResource(R.drawable.mood_1_last)</span><br><span class="line">                flag1 = <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        binding.mood2Image.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">if</span> (flag2 == <span class="literal">false</span>) &#123;</span><br><span class="line">                binding.mood2Image.setImageResource(R.drawable.mood_2)</span><br><span class="line">                flag2 = <span class="literal">true</span></span><br><span class="line">                changeOther(binding.mood2Image,flag2)</span><br><span class="line">                mood_flag = R.drawable.mood_2</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                binding.mood2Image.setImageResource(R.drawable.mood_2_last)</span><br><span class="line">                flag2 = <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        binding.mood3Image.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">if</span> (flag3 == <span class="literal">false</span>) &#123;</span><br><span class="line">                binding.mood3Image.setImageResource(R.drawable.mood_3)</span><br><span class="line">                flag3 = <span class="literal">true</span></span><br><span class="line">                changeOther(binding.mood3Image,flag3)</span><br><span class="line">                mood_flag = R.drawable.mood_3</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                binding.mood3Image.setImageResource(R.drawable.mood_3_last)</span><br><span class="line">                flag3 = <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        binding.mood4Image.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">if</span> (flag4 == <span class="literal">false</span>) &#123;</span><br><span class="line">                binding.mood4Image.setImageResource(R.drawable.mood_4)</span><br><span class="line">                flag4 = <span class="literal">true</span></span><br><span class="line">                changeOther(binding.mood4Image,flag4)</span><br><span class="line">                mood_flag = R.drawable.mood_4</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                binding.mood4Image.setImageResource(R.drawable.mood_4_last)</span><br><span class="line">                flag4 = <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        binding.mood5Image.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">if</span> (flag5 == <span class="literal">false</span>) &#123;</span><br><span class="line">                binding.mood5Image.setImageResource(R.drawable.mood_5)</span><br><span class="line">                flag5 = <span class="literal">true</span></span><br><span class="line">                changeOther(binding.mood5Image,flag5)</span><br><span class="line">                mood_flag = R.drawable.mood_5</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                binding.mood5Image.setImageResource(R.drawable.mood_5_last)</span><br><span class="line">                flag5 = <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">isDarkTheme</span><span class="params">(context: <span class="type">Context</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        <span class="keyword">val</span> flag = context.resources.configuration.uiMode and Configuration.UI_MODE_NIGHT_MASK</span><br><span class="line">        <span class="keyword">return</span> flag == Configuration.UI_MODE_NIGHT_YES</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">changeOther</span><span class="params">(imageView: <span class="type">ImageView</span>, flag:<span class="type">Boolean</span>)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (flag==<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">when</span> (imageView) &#123;</span><br><span class="line">                binding.mood1Image -&gt; &#123;</span><br><span class="line">                    binding.apply &#123;</span><br><span class="line">                        mood2Image.setImageResource(R.drawable.mood_2_last)</span><br><span class="line">                        mood3Image.setImageResource(R.drawable.mood_3_last)</span><br><span class="line">                        mood4Image.setImageResource(R.drawable.mood_4_last)</span><br><span class="line">                        mood5Image.setImageResource(R.drawable.mood_5_last)</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                    flag2 = <span class="literal">false</span></span><br><span class="line">                    flag3 = <span class="literal">false</span></span><br><span class="line">                    flag4 = <span class="literal">false</span></span><br><span class="line">                    flag5 = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                binding.mood2Image -&gt; &#123;</span><br><span class="line">                    binding.apply &#123;</span><br><span class="line">                        mood1Image.setImageResource(R.drawable.mood_1_last)</span><br><span class="line">                        mood3Image.setImageResource(R.drawable.mood_3_last)</span><br><span class="line">                        mood4Image.setImageResource(R.drawable.mood_4_last)</span><br><span class="line">                        mood5Image.setImageResource(R.drawable.mood_5_last)</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                    flag1 = <span class="literal">false</span></span><br><span class="line">                    flag3 = <span class="literal">false</span></span><br><span class="line">                    flag4 = <span class="literal">false</span></span><br><span class="line">                    flag5 = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                binding.mood3Image -&gt; &#123;</span><br><span class="line">                    binding.apply &#123;</span><br><span class="line">                        mood2Image.setImageResource(R.drawable.mood_2_last)</span><br><span class="line">                        mood1Image.setImageResource(R.drawable.mood_1_last)</span><br><span class="line">                        mood4Image.setImageResource(R.drawable.mood_4_last)</span><br><span class="line">                        mood5Image.setImageResource(R.drawable.mood_5_last)</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                    flag2 = <span class="literal">false</span></span><br><span class="line">                    flag1 = <span class="literal">false</span></span><br><span class="line">                    flag4 = <span class="literal">false</span></span><br><span class="line">                    flag5 = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                binding.mood4Image -&gt; &#123;</span><br><span class="line">                    binding.apply &#123;</span><br><span class="line">                        mood2Image.setImageResource(R.drawable.mood_2_last)</span><br><span class="line">                        mood3Image.setImageResource(R.drawable.mood_3_last)</span><br><span class="line">                        mood1Image.setImageResource(R.drawable.mood_1_last)</span><br><span class="line">                        mood5Image.setImageResource(R.drawable.mood_5_last)</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                    flag2 = <span class="literal">false</span></span><br><span class="line">                    flag3 = <span class="literal">false</span></span><br><span class="line">                    flag1 = <span class="literal">false</span></span><br><span class="line">                    flag5 = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                binding.mood5Image -&gt; &#123;</span><br><span class="line">                    binding.apply &#123;</span><br><span class="line">                        mood2Image.setImageResource(R.drawable.mood_2_last)</span><br><span class="line">                        mood3Image.setImageResource(R.drawable.mood_3_last)</span><br><span class="line">                        mood4Image.setImageResource(R.drawable.mood_4_last)</span><br><span class="line">                        mood1Image.setImageResource(R.drawable.mood_1_last)</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                    flag2 = <span class="literal">false</span></span><br><span class="line">                    flag3 = <span class="literal">false</span></span><br><span class="line">                    flag4 = <span class="literal">false</span></span><br><span class="line">                    flag1 = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onActivityResult</span><span class="params">(requestCode: <span class="type">Int</span>, resultCode: <span class="type">Int</span>, <span class="keyword">data</span>: <span class="type">Intent</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, <span class="keyword">data</span>)</span><br><span class="line">        <span class="keyword">when</span> (requestCode) &#123;</span><br><span class="line">            formAlbum -&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (resultCode == Activity.RESULT_OK &amp;&amp; <span class="keyword">data</span> != <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">data</span>.<span class="keyword">data</span>?.let &#123; uri -&gt;</span><br><span class="line">                        uri1 = uri.toString()</span><br><span class="line"></span><br><span class="line">                        binding.imageShow.setImageURI(uri)</span><br><span class="line">                        binding.imageShow.setPadding(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>4.DashboardFragment.kt</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lnm011223.my_diary.ui.dashboard</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.<span class="keyword">annotation</span>.SuppressLint</span><br><span class="line"><span class="keyword">import</span> android.app.Application</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater</span><br><span class="line"><span class="keyword">import</span> android.view.View</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup</span><br><span class="line"><span class="keyword">import</span> androidx.core.net.toUri</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.Fragment</span><br><span class="line"><span class="keyword">import</span> androidx.lifecycle.ViewModelProvider</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.LinearLayoutManager</span><br><span class="line"><span class="keyword">import</span> com.lnm011223.my_diary.*</span><br><span class="line"><span class="keyword">import</span> com.lnm011223.my_diary.databinding.FragmentDashboardBinding</span><br><span class="line"><span class="keyword">import</span> kotlin.concurrent.thread</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DashboardFragment</span> : <span class="type">Fragment</span></span>() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">lateinit</span> <span class="keyword">var</span> dashboardViewModel: DashboardViewModel</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> _binding: FragmentDashboardBinding? = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> diaryList = ArrayList&lt;Diary&gt;()</span><br><span class="line">    <span class="keyword">val</span> dbHelper = MyDatabaseHelper(MyApplication.context,<span class="string">&quot;DiaryData.db&quot;</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This property is only valid between onCreateView and</span></span><br><span class="line">    <span class="comment">// onDestroyView.</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> binding <span class="keyword">get</span>() = _binding!!</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreateView</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">        inflater: <span class="type">LayoutInflater</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        container: <span class="type">ViewGroup</span>?,</span></span></span><br><span class="line"><span class="params"><span class="function">        savedInstanceState: <span class="type">Bundle</span>?</span></span></span><br><span class="line"><span class="params"><span class="function">    )</span></span>: View? &#123;</span><br><span class="line">        dashboardViewModel =</span><br><span class="line">            ViewModelProvider(<span class="keyword">this</span>).<span class="keyword">get</span>(DashboardViewModel::<span class="keyword">class</span>.java)</span><br><span class="line"></span><br><span class="line">        _binding = FragmentDashboardBinding.inflate(inflater, container, <span class="literal">false</span>)</span><br><span class="line">        <span class="keyword">val</span> root: View = binding.root</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> root</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onDestroyView</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroyView()</span><br><span class="line">        _binding = <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressLint(<span class="meta-string">&quot;NotifyDataSetChanged&quot;</span>)</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onStart</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onStart()</span><br><span class="line">        initDiary()</span><br><span class="line">        <span class="keyword">val</span> layoutManager = LinearLayoutManager(context)</span><br><span class="line">        binding.diaryRecycle.layoutManager = layoutManager</span><br><span class="line">        <span class="keyword">val</span> adapter = DiaryAdapter(diaryList)</span><br><span class="line">        binding.diaryRecycle.adapter = adapter</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onActivityCreated</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onActivityCreated(savedInstanceState)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@SuppressLint(<span class="meta-string">&quot;Range&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">initDiary</span><span class="params">()</span></span>&#123;</span><br><span class="line">        thread &#123;</span><br><span class="line">            diaryList.clear()</span><br><span class="line">            <span class="keyword">val</span> db = dbHelper.writableDatabase</span><br><span class="line">            <span class="keyword">val</span> cursor = db.query(<span class="string">&quot;diarydata&quot;</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">if</span> (cursor.moveToFirst()) &#123;</span><br><span class="line">                <span class="keyword">do</span> &#123;</span><br><span class="line">                    <span class="keyword">val</span> datetext = cursor.getString(cursor.getColumnIndex(<span class="string">&quot;datetext&quot;</span>))</span><br><span class="line">                    <span class="keyword">val</span> imageuri = cursor.getString(cursor.getColumnIndex(<span class="string">&quot;imageuri&quot;</span>))</span><br><span class="line">                    <span class="keyword">val</span> moodid = cursor.getInt(cursor.getColumnIndex(<span class="string">&quot;moodid&quot;</span>))</span><br><span class="line">                    <span class="keyword">val</span> diarytext = cursor.getString(cursor.getColumnIndex(<span class="string">&quot;diarytext&quot;</span>))</span><br><span class="line">                    diaryList.add(Diary(datetext,moodid,imageuri.toUri(),diarytext))</span><br><span class="line">                &#125;<span class="keyword">while</span> (cursor.moveToNext())</span><br><span class="line">            &#125;</span><br><span class="line">            cursor.close()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-Recycleviewç›¸å…³"><a href="#2-Recycleviewç›¸å…³" class="headerlink" title="2.Recycleviewç›¸å…³"></a>2.Recycleviewç›¸å…³</h3><blockquote>
<p>1.Diary.kt</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lnm011223.my_diary</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.net.Uri</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Diary</span></span>(<span class="keyword">val</span> date_text:String, <span class="keyword">val</span> moon:<span class="built_in">Int</span>, <span class="keyword">val</span> diary_image:Uri, <span class="keyword">val</span> diary_text: String)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>2.DiaryAdapter.kt</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lnm011223.my_diary</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.AlertDialog</span><br><span class="line"><span class="keyword">import</span> android.content.Intent</span><br><span class="line"><span class="keyword">import</span> android.graphics.BitmapFactory</span><br><span class="line"><span class="keyword">import</span> android.net.Uri</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater</span><br><span class="line"><span class="keyword">import</span> android.view.View</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.RecyclerView</span><br><span class="line"><span class="keyword">import</span> android.graphics.Bitmap</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DiaryAdapter</span></span>(<span class="keyword">val</span> diaryList: List&lt;Diary&gt;) : RecyclerView.Adapter&lt;DiaryAdapter.ViewHolder&gt;()&#123;</span><br><span class="line">    <span class="keyword">inner</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewHolder</span></span>(view: View) : RecyclerView.ViewHolder(view) &#123;</span><br><span class="line">        <span class="keyword">val</span> diarycard_mood : ImageView = view.findViewById(R.id.diarycard_mood)</span><br><span class="line">        <span class="keyword">val</span> diarycard_image : ImageView = view.findViewById(R.id.diarycard_image)</span><br><span class="line">        <span class="keyword">val</span> diarycard_date : TextView = view.findViewById(R.id.diarycard_date)</span><br><span class="line">        <span class="keyword">val</span> diarycard_text : TextView = view.findViewById(R.id.diarycard_text)</span><br><span class="line">        <span class="keyword">val</span> delete_button : ImageView = view.findViewById(R.id.delete_image)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">getItemCount</span><span class="params">()</span></span> = diaryList.size</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreateViewHolder</span><span class="params">(parent: <span class="type">ViewGroup</span>, viewType: <span class="type">Int</span>)</span></span>: ViewHolder &#123;</span><br><span class="line">        <span class="keyword">val</span> view = LayoutInflater.from(parent.context)</span><br><span class="line">            .inflate(R.layout.diary_card,parent,<span class="literal">false</span>)</span><br><span class="line">        <span class="keyword">val</span> viewHolder = ViewHolder(view)</span><br><span class="line">        viewHolder.delete_button.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">val</span> dbHelper = MyDatabaseHelper(MyApplication.context,<span class="string">&quot;DiaryData.db&quot;</span>,<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">val</span> db = dbHelper.writableDatabase</span><br><span class="line">            <span class="keyword">val</span> position = viewHolder.adapterPosition</span><br><span class="line">            <span class="keyword">val</span> diary = diaryList[position]</span><br><span class="line">            AlertDialog.Builder(parent.context).apply &#123;</span><br><span class="line">                setTitle(<span class="string">&quot;ç¡®è®¤ï¼š&quot;</span>)</span><br><span class="line">                setMessage(<span class="string">&quot;çœŸçš„è¦åˆ é™¤è¿™æ¡è®°å½•å—ï¼Ÿ&quot;</span>)</span><br><span class="line">                setNegativeButton(<span class="string">&quot;å¦&quot;</span>) &#123; _, _ -&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                setPositiveButton(<span class="string">&quot;æ˜¯&quot;</span>) &#123; _, _ -&gt;</span><br><span class="line">                    db.delete(<span class="string">&quot;diarydata&quot;</span>, <span class="string">&quot;diarytext = ?&quot;</span>, arrayOf(diary.diary_text))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                show()</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        viewHolder.itemView.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">val</span> position = viewHolder.adapterPosition</span><br><span class="line">            <span class="keyword">val</span> diary = diaryList[position]</span><br><span class="line"></span><br><span class="line">            <span class="keyword">val</span> intent = Intent(parent.context,ReviseActivity::<span class="keyword">class</span>.java)</span><br><span class="line">            intent.apply &#123;</span><br><span class="line">                putExtra(<span class="string">&quot;datetext&quot;</span>,diary.date_text)</span><br><span class="line">                putExtra(<span class="string">&quot;diarytext&quot;</span>,diary.diary_text)</span><br><span class="line">                putExtra(<span class="string">&quot;imageuri&quot;</span>,diary.diary_image.toString())</span><br><span class="line">                putExtra(<span class="string">&quot;moonid&quot;</span>,diary.moon)</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            parent.context.startActivity(intent)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> viewHolder</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onBindViewHolder</span><span class="params">(holder: <span class="type">ViewHolder</span>, position: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> diary = diaryList[position]</span><br><span class="line">        holder.diarycard_mood.setImageResource(diary.moon)</span><br><span class="line">        holder.diarycard_date.text = diary.date_text.substring(<span class="number">5</span>,<span class="number">7</span>)+<span class="string">&quot; &quot;</span>+diary.date_text.substring(<span class="number">10</span>,<span class="number">12</span>)</span><br><span class="line">        holder.diarycard_text.text = diary.diary_text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        holder.diarycard_image.setImageURI(diary.diary_image)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>3.diary_card.xml        //recycleviewçš„æ ¸å¿ƒ</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginVertical</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.google.android.material.card.MaterialCardView</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;264dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginHorizontal</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:cardCornerRadius</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:cardElevation</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_margin</span>=<span class="string">&quot;15dp&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/diarycard_mood&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;50dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;57dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:src</span>=<span class="string">&quot;@mipmap/ic_launcher&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintBottom_toTopOf</span>=<span class="string">&quot;@+id/materialCardView&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintVertical_bias</span>=<span class="string">&quot;0.0&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">com.google.android.material.card.MaterialCardView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/materialCardView&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;63dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;140dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:backgroundTint</span>=<span class="string">&quot;#eeeeee&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:cardCornerRadius</span>=<span class="string">&quot;4dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:cardElevation</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/diarycard_date&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_marginHorizontal</span>=<span class="string">&quot;6dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_marginVertical</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;01 å‘¨äº”&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;#707070&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">com.google.android.material.card.MaterialCardView</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/delete_image&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;24dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:src</span>=<span class="string">&quot;@drawable/ic_delete&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/materialCardView&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/imageView2&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;3dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;234dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@drawable/button_drawable&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:backgroundTint</span>=<span class="string">&quot;#eeeeee&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintStart_toEndOf</span>=<span class="string">&quot;@+id/materialCardView&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/diarycard_text&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;255dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:maxLines</span>=<span class="string">&quot;2&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;dddd&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#707070&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintStart_toEndOf</span>=<span class="string">&quot;@+id/imageView2&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">tools:layout_editor_absoluteY</span>=<span class="string">&quot;0dp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">com.google.android.material.card.MaterialCardView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;255dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;190dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;6dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:backgroundTint</span>=<span class="string">&quot;#eeeeee&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:scaleType</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:cardCornerRadius</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:cardElevation</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintStart_toEndOf</span>=<span class="string">&quot;@+id/imageView2&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/diarycard_text&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintVertical_bias</span>=<span class="string">&quot;1.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/diarycard_image&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:scaleType</span>=<span class="string">&quot;center&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">com.google.android.material.card.MaterialCardView</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">com.google.android.material.card.MaterialCardView</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-Sqliteç›¸å…³"><a href="#3-Sqliteç›¸å…³" class="headerlink" title="3.Sqliteç›¸å…³"></a>3.Sqliteç›¸å…³</h3><blockquote>
<p>MyDatabaseHelper.kt</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lnm011223.my_diary</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context</span><br><span class="line"><span class="keyword">import</span> android.database.sqlite.SQLiteDatabase</span><br><span class="line"><span class="keyword">import</span> android.database.sqlite.SQLiteOpenHelper</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDatabaseHelper</span></span>(<span class="keyword">val</span> context: Context, name: String, version: <span class="built_in">Int</span>): SQLiteOpenHelper(context,name,<span class="literal">null</span>,version) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> account_creat = <span class="string">&quot;create table diarydata (&quot;</span> +</span><br><span class="line">            <span class="string">&quot;id integer primary key autoincrement,&quot;</span> +</span><br><span class="line">            <span class="string">&quot;datetext text,&quot;</span> +</span><br><span class="line">            <span class="string">&quot;moodid integer,&quot;</span> +</span><br><span class="line">            <span class="string">&quot;imageuri text,&quot;</span> +</span><br><span class="line">            <span class="string">&quot;diarytext text)&quot;</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(db: <span class="type">SQLiteDatabase</span>)</span></span> &#123;</span><br><span class="line">        db.execSQL(account_creat)</span><br><span class="line">        Toast.makeText(context,<span class="string">&quot;Create succeeded&quot;</span>,Toast.LENGTH_SHORT).show()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onUpgrade</span><span class="params">(db: <span class="type">SQLiteDatabase</span>?, oldVersion: <span class="type">Int</span>, newVersion: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-å¸ƒå±€æ–‡ä»¶"><a href="#4-å¸ƒå±€æ–‡ä»¶" class="headerlink" title="4.å¸ƒå±€æ–‡ä»¶"></a>4.å¸ƒå±€æ–‡ä»¶</h3><blockquote>
<p>1.activity_main.xml</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    xmlns:app=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span><br><span class="line">    xmlns:tools=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span><br><span class="line">    android:id=<span class="string">&quot;@+id/container&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:background=<span class="string">&quot;#F3F3EC&quot;</span></span><br><span class="line"></span><br><span class="line">    &gt;</span><br><span class="line"></span><br><span class="line">    &lt;fragment</span><br><span class="line">        android:id=<span class="string">&quot;@+id/nav_host_fragment_activity_main&quot;</span></span><br><span class="line">        android:name=<span class="string">&quot;androidx.navigation.fragment.NavHostFragment&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        app:defaultNavHost=<span class="string">&quot;true&quot;</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">&quot;@+id/bottomAppBar&quot;</span></span><br><span class="line">        app:layout_constraintTop_toTopOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">        app:navGraph=<span class="string">&quot;@navigation/mobile_navigation&quot;</span></span><br><span class="line">        tools:layout_editor_absoluteX=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        android:layout_marginBottom=<span class="string">&quot;56dp&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;com.google.android.material.bottomappbar.BottomAppBar</span><br><span class="line">        android:id=<span class="string">&quot;@+id/bottomAppBar&quot;</span></span><br><span class="line"></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_gravity=<span class="string">&quot;bottom&quot;</span></span><br><span class="line">        app:backgroundTint=<span class="string">&quot;#ffffff&quot;</span></span><br><span class="line"></span><br><span class="line">        app:contentInsetEnd=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        app:contentInsetStart=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        app:elevation=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        app:fabAlignmentMode=<span class="string">&quot;end&quot;</span></span><br><span class="line">        app:layout_constraintBottom_toBottomOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">        &gt;</span><br><span class="line"></span><br><span class="line">        &lt;com.google.android.material.bottomnavigation.BottomNavigationView</span><br><span class="line">            android:layout_gravity=<span class="string">&quot;bottom&quot;</span></span><br><span class="line">            app:labelVisibilityMode=<span class="string">&quot;selected&quot;</span></span><br><span class="line">            android:id=<span class="string">&quot;@+id/nav_view&quot;</span></span><br><span class="line">            android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:layout_marginStart=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">            android:layout_marginEnd=<span class="string">&quot;100dp&quot;</span></span><br><span class="line">            android:elevation=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">            app:elevation=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">            app:backgroundTint=<span class="string">&quot;@android:color/transparent&quot;</span></span><br><span class="line">            app:layout_constraintBottom_toBottomOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">            app:layout_constraintLeft_toLeftOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">            app:layout_constraintRight_toRightOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">            app:menu=<span class="string">&quot;@menu/bottom_nav_menu&quot;</span></span><br><span class="line">            app:itemIconTint=<span class="string">&quot;@color/selector_color&quot;</span></span><br><span class="line">            app:itemTextColor=<span class="string">&quot;@color/selector_color&quot;</span></span><br><span class="line">            /&gt;</span><br><span class="line">    &lt;/com.google.android.material.bottomappbar.BottomAppBar&gt;</span><br><span class="line"></span><br><span class="line">    &lt;com.google.android.material.floatingactionbutton.FloatingActionButton</span><br><span class="line">        android:id=<span class="string">&quot;@+id/fab&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:backgroundTint=<span class="string">&quot;#B8D68A&quot;</span></span><br><span class="line">        app:borderWidth=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        android:src=<span class="string">&quot;@drawable/ic_baseline_add_24&quot;</span></span><br><span class="line"></span><br><span class="line">        app:tint=<span class="string">&quot;#000000&quot;</span></span><br><span class="line"></span><br><span class="line">        app:elevation=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        app:layout_anchor=<span class="string">&quot;@id/bottomAppBar&quot;</span> /&gt;</span><br><span class="line">&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>2.activity_add.xml</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    xmlns:app=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span><br><span class="line">    xmlns:tools=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:background=<span class="string">&quot;#F3F3EC&quot;</span></span><br><span class="line"></span><br><span class="line">    android:fitsSystemWindows=<span class="string">&quot;true&quot;</span></span><br><span class="line">    tools:context=<span class="string">&quot;.AddActivity&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id=<span class="string">&quot;@+id/date_text&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:textColor=<span class="string">&quot;#707070&quot;</span></span><br><span class="line">        android:textSize=<span class="string">&quot;20sp&quot;</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">&quot;@+id/card_mood&quot;</span></span><br><span class="line">        app:layout_constraintEnd_toEndOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">        app:layout_constraintTop_toTopOf=<span class="string">&quot;parent&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;com.google.android.material.card.MaterialCardView</span><br><span class="line">        android:id=<span class="string">&quot;@+id/card_mood&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_marginHorizontal=<span class="string">&quot;15dp&quot;</span></span><br><span class="line">        android:layout_marginBottom=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">        android:elevation=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        app:cardCornerRadius=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">        app:cardElevation=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">&quot;@+id/photo_card&quot;</span></span><br><span class="line">        app:layout_constraintEnd_toEndOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">&quot;parent&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">        &lt;androidx.constraintlayout.widget.ConstraintLayout</span><br><span class="line">            android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:layout_margin=<span class="string">&quot;10dp&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">            &lt;TextView</span><br><span class="line">                android:id=<span class="string">&quot;@+id/textView&quot;</span></span><br><span class="line">                android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line"></span><br><span class="line">                android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:text=<span class="string">&quot;ä»Šå¤©çš„å¿ƒæƒ…&quot;</span></span><br><span class="line">                android:textColor=<span class="string">&quot;#707070&quot;</span></span><br><span class="line">                android:textSize=<span class="string">&quot;16sp&quot;</span></span><br><span class="line">                android:textStyle=<span class="string">&quot;bold&quot;</span></span><br><span class="line">                app:layout_constraintStart_toStartOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">                app:layout_constraintTop_toTopOf=<span class="string">&quot;parent&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:layout_marginTop=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">                android:id=<span class="string">&quot;@+id/mood1_image&quot;</span></span><br><span class="line">                android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line"></span><br><span class="line">                android:backgroundTint=<span class="string">&quot;#00000000&quot;</span></span><br><span class="line">                android:src=<span class="string">&quot;@drawable/mood_1_last&quot;</span></span><br><span class="line">                app:layout_constraintStart_toStartOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">                app:layout_constraintBottom_toBottomOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line"></span><br><span class="line">                app:layout_constraintTop_toBottomOf=<span class="string">&quot;@+id/textView&quot;</span></span><br><span class="line">                app:layout_constraintVertical_bias=<span class="string">&quot;1.0&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:id=<span class="string">&quot;@+id/mood2_image&quot;</span></span><br><span class="line">                android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line"></span><br><span class="line">                android:layout_marginStart=<span class="string">&quot;15dp&quot;</span></span><br><span class="line">                android:layout_marginEnd=<span class="string">&quot;15dp&quot;</span></span><br><span class="line">                android:backgroundTint=<span class="string">&quot;#00000000&quot;</span></span><br><span class="line">                android:src=<span class="string">&quot;@drawable/mood_2_last&quot;</span></span><br><span class="line">                app:layout_constraintStart_toEndOf=<span class="string">&quot;@+id/mood1_image&quot;</span></span><br><span class="line">                tools:layout_editor_absoluteY=<span class="string">&quot;37dp&quot;</span></span><br><span class="line">                app:layout_constraintBottom_toBottomOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line"></span><br><span class="line">                app:layout_constraintTop_toBottomOf=<span class="string">&quot;@+id/textView&quot;</span></span><br><span class="line">                app:layout_constraintVertical_bias=<span class="string">&quot;1.0&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:id=<span class="string">&quot;@+id/mood3_image&quot;</span></span><br><span class="line">                android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:layout_marginHorizontal=<span class="string">&quot;20dp&quot;</span></span><br><span class="line">                android:layout_marginStart=<span class="string">&quot;20dp&quot;</span></span><br><span class="line">                android:layout_marginEnd=<span class="string">&quot;20dp&quot;</span></span><br><span class="line">                android:backgroundTint=<span class="string">&quot;#00000000&quot;</span></span><br><span class="line">                android:src=<span class="string">&quot;@drawable/mood_3_last&quot;</span></span><br><span class="line">                app:layout_constraintBottom_toBottomOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">                app:layout_constraintEnd_toStartOf=<span class="string">&quot;@+id/mood4_image&quot;</span></span><br><span class="line">                app:layout_constraintHorizontal_bias=<span class="string">&quot;0.512&quot;</span></span><br><span class="line">                app:layout_constraintStart_toEndOf=<span class="string">&quot;@+id/mood2_image&quot;</span></span><br><span class="line">                app:layout_constraintTop_toBottomOf=<span class="string">&quot;@+id/textView&quot;</span></span><br><span class="line">                app:layout_constraintVertical_bias=<span class="string">&quot;1.0&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:id=<span class="string">&quot;@+id/mood4_image&quot;</span></span><br><span class="line">                android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line"></span><br><span class="line">                android:layout_marginEnd=<span class="string">&quot;15dp&quot;</span></span><br><span class="line">                android:backgroundTint=<span class="string">&quot;#00000000&quot;</span></span><br><span class="line">                android:src=<span class="string">&quot;@drawable/mood_4_last&quot;</span></span><br><span class="line">                app:layout_constraintEnd_toStartOf=<span class="string">&quot;@+id/mood5_image&quot;</span></span><br><span class="line">                tools:layout_editor_absoluteY=<span class="string">&quot;37dp&quot;</span></span><br><span class="line">                app:layout_constraintBottom_toBottomOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line"></span><br><span class="line">                app:layout_constraintTop_toBottomOf=<span class="string">&quot;@+id/textView&quot;</span></span><br><span class="line">                app:layout_constraintVertical_bias=<span class="string">&quot;1.0&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:id=<span class="string">&quot;@+id/mood5_image&quot;</span></span><br><span class="line">                android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line"></span><br><span class="line">                android:backgroundTint=<span class="string">&quot;#00000000&quot;</span></span><br><span class="line">                android:src=<span class="string">&quot;@drawable/mood_5_last&quot;</span></span><br><span class="line">                app:layout_constraintEnd_toEndOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">                tools:layout_editor_absoluteY=<span class="string">&quot;37dp&quot;</span></span><br><span class="line">                app:layout_constraintBottom_toBottomOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line"></span><br><span class="line">                app:layout_constraintTop_toBottomOf=<span class="string">&quot;@+id/textView&quot;</span></span><br><span class="line">                app:layout_constraintVertical_bias=<span class="string">&quot;1.0&quot;</span>/&gt;</span><br><span class="line">        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;/com.google.android.material.card.MaterialCardView&gt;</span><br><span class="line"></span><br><span class="line">    &lt;com.google.android.material.card.MaterialCardView</span><br><span class="line">        android:id=<span class="string">&quot;@+id/photo_card&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_marginHorizontal=<span class="string">&quot;15dp&quot;</span></span><br><span class="line">        android:layout_marginBottom=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">        android:elevation=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        app:cardCornerRadius=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">        app:cardElevation=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">&quot;@+id/card_text&quot;</span></span><br><span class="line">        app:layout_constraintEnd_toEndOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">&quot;parent&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">        &lt;LinearLayout</span><br><span class="line">            android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:orientation=<span class="string">&quot;vertical&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">            &lt;TextView</span><br><span class="line">                android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:layout_marginHorizontal=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">                android:layout_marginTop=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">                android:text=<span class="string">&quot;ä»Šå¤©çš„ç…§ç‰‡&quot;</span></span><br><span class="line">                android:textColor=<span class="string">&quot;#707070&quot;</span></span><br><span class="line">                android:textSize=<span class="string">&quot;16sp&quot;</span></span><br><span class="line">                android:textStyle=<span class="string">&quot;bold&quot;</span></span><br><span class="line"></span><br><span class="line">                /&gt;</span><br><span class="line">            &lt;com.google.android.material.card.MaterialCardView</span><br><span class="line">                android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">                android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:backgroundTint=<span class="string">&quot;#eeeeee&quot;</span></span><br><span class="line">                android:layout_marginHorizontal=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">                android:layout_marginTop=<span class="string">&quot;7dp&quot;</span></span><br><span class="line">                android:layout_marginBottom=<span class="string">&quot;15dp&quot;</span></span><br><span class="line">                app:cardElevation=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">                app:cardCornerRadius=<span class="string">&quot;10dp&quot;</span>&gt;</span><br><span class="line">                &lt;ImageView</span><br><span class="line">                    android:id=<span class="string">&quot;@+id/image_show&quot;</span></span><br><span class="line">                    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">                    android:layout_height=<span class="string">&quot;300dp&quot;</span></span><br><span class="line">                    android:scaleType=<span class="string">&quot;center&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    android:src=<span class="string">&quot;@drawable/ic_baseline_camera_alt_24&quot;</span></span><br><span class="line"></span><br><span class="line">                    android:padding=<span class="string">&quot;65dp&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    /&gt;</span><br><span class="line">            &lt;/com.google.android.material.card.MaterialCardView&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &lt;/LinearLayout&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;/com.google.android.material.card.MaterialCardView&gt;</span><br><span class="line"></span><br><span class="line">    &lt;com.google.android.material.card.MaterialCardView</span><br><span class="line">        android:id=<span class="string">&quot;@+id/card_text&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;100dp&quot;</span></span><br><span class="line">        android:layout_marginHorizontal=<span class="string">&quot;15dp&quot;</span></span><br><span class="line">        android:layout_marginBottom=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">        android:elevation=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        app:cardCornerRadius=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">        app:cardElevation=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">&quot;@+id/complete_Button&quot;</span></span><br><span class="line">        app:layout_constraintEnd_toEndOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">&quot;parent&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:layout_marginHorizontal=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">            android:layout_marginTop=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">            android:text=<span class="string">&quot;ä¸€è¡Œæ—¥è®°&quot;</span></span><br><span class="line">            android:textColor=<span class="string">&quot;#707070&quot;</span></span><br><span class="line">            android:textSize=<span class="string">&quot;16sp&quot;</span></span><br><span class="line">            android:textStyle=<span class="string">&quot;bold&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;com.google.android.material.textfield.TextInputEditText</span><br><span class="line">            android:id=<span class="string">&quot;@+id/diarytext_edit&quot;</span></span><br><span class="line">            android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:layout_gravity=<span class="string">&quot;bottom&quot;</span></span><br><span class="line">            android:layout_marginHorizontal=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">            android:layout_marginBottom=<span class="string">&quot;15dp&quot;</span></span><br><span class="line">            android:background=<span class="string">&quot;@drawable/button_drawable&quot;</span></span><br><span class="line">            android:backgroundTint=<span class="string">&quot;#eeeeee&quot;</span></span><br><span class="line">            android:maxLines=<span class="string">&quot;2&quot;</span></span><br><span class="line">            android:hint=<span class="string">&quot;è¯·è¾“å…¥å†…å®¹&quot;</span></span><br><span class="line">            android:paddingStart=<span class="string">&quot;10dp&quot;</span> /&gt;</span><br><span class="line">    &lt;/com.google.android.material.card.MaterialCardView&gt;</span><br><span class="line"></span><br><span class="line">    &lt;com.google.android.material.button.MaterialButton</span><br><span class="line">        android:id=<span class="string">&quot;@+id/complete_Button&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;50dp&quot;</span></span><br><span class="line">        android:backgroundTint=<span class="string">&quot;#3EB06A&quot;</span></span><br><span class="line">        android:insetTop=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        android:insetBottom=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        android:text=<span class="string">&quot;åˆ¶ä½œå®Œæˆ&quot;</span></span><br><span class="line">        android:textSize=<span class="string">&quot;18dp&quot;</span></span><br><span class="line">        android:textStyle=<span class="string">&quot;bold&quot;</span></span><br><span class="line">        app:cornerRadius=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        app:elevation=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        app:layout_constraintBottom_toBottomOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">        tools:layout_editor_absoluteX=<span class="string">&quot;0dp&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>3.activity_revise.xml</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    xmlns:app=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span><br><span class="line">    xmlns:tools=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:background=<span class="string">&quot;#F3F3EC&quot;</span></span><br><span class="line"></span><br><span class="line">    android:fitsSystemWindows=<span class="string">&quot;true&quot;</span></span><br><span class="line">    tools:context=<span class="string">&quot;.ReviseActivity&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id=<span class="string">&quot;@+id/date_text&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:textColor=<span class="string">&quot;#707070&quot;</span></span><br><span class="line">        android:textSize=<span class="string">&quot;20sp&quot;</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">&quot;@+id/card_mood&quot;</span></span><br><span class="line">        app:layout_constraintEnd_toEndOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">        app:layout_constraintTop_toTopOf=<span class="string">&quot;parent&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;com.google.android.material.card.MaterialCardView</span><br><span class="line">        android:id=<span class="string">&quot;@+id/card_mood&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_marginHorizontal=<span class="string">&quot;15dp&quot;</span></span><br><span class="line">        android:layout_marginBottom=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">        android:elevation=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        app:cardCornerRadius=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">        app:cardElevation=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">&quot;@+id/photo_card&quot;</span></span><br><span class="line">        app:layout_constraintEnd_toEndOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">&quot;parent&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">        &lt;androidx.constraintlayout.widget.ConstraintLayout</span><br><span class="line">            android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:layout_margin=<span class="string">&quot;10dp&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">            &lt;TextView</span><br><span class="line">                android:id=<span class="string">&quot;@+id/textView&quot;</span></span><br><span class="line">                android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line"></span><br><span class="line">                android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:text=<span class="string">&quot;ä»Šå¤©çš„å¿ƒæƒ…&quot;</span></span><br><span class="line">                android:textColor=<span class="string">&quot;#707070&quot;</span></span><br><span class="line">                android:textSize=<span class="string">&quot;16sp&quot;</span></span><br><span class="line">                android:textStyle=<span class="string">&quot;bold&quot;</span></span><br><span class="line">                app:layout_constraintStart_toStartOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">                app:layout_constraintTop_toTopOf=<span class="string">&quot;parent&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:layout_marginTop=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">                android:id=<span class="string">&quot;@+id/mood1_image&quot;</span></span><br><span class="line">                android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line"></span><br><span class="line">                android:backgroundTint=<span class="string">&quot;#00000000&quot;</span></span><br><span class="line">                android:src=<span class="string">&quot;@drawable/mood_1_last&quot;</span></span><br><span class="line">                app:layout_constraintStart_toStartOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">                app:layout_constraintBottom_toBottomOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line"></span><br><span class="line">                app:layout_constraintTop_toBottomOf=<span class="string">&quot;@+id/textView&quot;</span></span><br><span class="line">                app:layout_constraintVertical_bias=<span class="string">&quot;1.0&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:id=<span class="string">&quot;@+id/mood2_image&quot;</span></span><br><span class="line">                android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line"></span><br><span class="line">                android:layout_marginStart=<span class="string">&quot;15dp&quot;</span></span><br><span class="line">                android:layout_marginEnd=<span class="string">&quot;15dp&quot;</span></span><br><span class="line">                android:backgroundTint=<span class="string">&quot;#00000000&quot;</span></span><br><span class="line">                android:src=<span class="string">&quot;@drawable/mood_2_last&quot;</span></span><br><span class="line">                app:layout_constraintStart_toEndOf=<span class="string">&quot;@+id/mood1_image&quot;</span></span><br><span class="line">                tools:layout_editor_absoluteY=<span class="string">&quot;37dp&quot;</span></span><br><span class="line">                app:layout_constraintBottom_toBottomOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line"></span><br><span class="line">                app:layout_constraintTop_toBottomOf=<span class="string">&quot;@+id/textView&quot;</span></span><br><span class="line">                app:layout_constraintVertical_bias=<span class="string">&quot;1.0&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:id=<span class="string">&quot;@+id/mood3_image&quot;</span></span><br><span class="line">                android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:layout_marginHorizontal=<span class="string">&quot;20dp&quot;</span></span><br><span class="line">                android:layout_marginStart=<span class="string">&quot;20dp&quot;</span></span><br><span class="line">                android:layout_marginEnd=<span class="string">&quot;20dp&quot;</span></span><br><span class="line">                android:backgroundTint=<span class="string">&quot;#00000000&quot;</span></span><br><span class="line">                android:src=<span class="string">&quot;@drawable/mood_3_last&quot;</span></span><br><span class="line">                app:layout_constraintBottom_toBottomOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">                app:layout_constraintEnd_toStartOf=<span class="string">&quot;@+id/mood4_image&quot;</span></span><br><span class="line">                app:layout_constraintHorizontal_bias=<span class="string">&quot;0.512&quot;</span></span><br><span class="line">                app:layout_constraintStart_toEndOf=<span class="string">&quot;@+id/mood2_image&quot;</span></span><br><span class="line">                app:layout_constraintTop_toBottomOf=<span class="string">&quot;@+id/textView&quot;</span></span><br><span class="line">                app:layout_constraintVertical_bias=<span class="string">&quot;1.0&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:id=<span class="string">&quot;@+id/mood4_image&quot;</span></span><br><span class="line">                android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line"></span><br><span class="line">                android:layout_marginEnd=<span class="string">&quot;15dp&quot;</span></span><br><span class="line">                android:backgroundTint=<span class="string">&quot;#00000000&quot;</span></span><br><span class="line">                android:src=<span class="string">&quot;@drawable/mood_4_last&quot;</span></span><br><span class="line">                app:layout_constraintEnd_toStartOf=<span class="string">&quot;@+id/mood5_image&quot;</span></span><br><span class="line">                tools:layout_editor_absoluteY=<span class="string">&quot;37dp&quot;</span></span><br><span class="line">                app:layout_constraintBottom_toBottomOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line"></span><br><span class="line">                app:layout_constraintTop_toBottomOf=<span class="string">&quot;@+id/textView&quot;</span></span><br><span class="line">                app:layout_constraintVertical_bias=<span class="string">&quot;1.0&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:id=<span class="string">&quot;@+id/mood5_image&quot;</span></span><br><span class="line">                android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line"></span><br><span class="line">                android:backgroundTint=<span class="string">&quot;#00000000&quot;</span></span><br><span class="line">                android:src=<span class="string">&quot;@drawable/mood_5_last&quot;</span></span><br><span class="line">                app:layout_constraintEnd_toEndOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">                tools:layout_editor_absoluteY=<span class="string">&quot;37dp&quot;</span></span><br><span class="line">                app:layout_constraintBottom_toBottomOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line"></span><br><span class="line">                app:layout_constraintTop_toBottomOf=<span class="string">&quot;@+id/textView&quot;</span></span><br><span class="line">                app:layout_constraintVertical_bias=<span class="string">&quot;1.0&quot;</span>/&gt;</span><br><span class="line">        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;/com.google.android.material.card.MaterialCardView&gt;</span><br><span class="line"></span><br><span class="line">    &lt;com.google.android.material.card.MaterialCardView</span><br><span class="line">        android:id=<span class="string">&quot;@+id/photo_card&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_marginHorizontal=<span class="string">&quot;15dp&quot;</span></span><br><span class="line">        android:layout_marginBottom=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">        android:elevation=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        app:cardCornerRadius=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">        app:cardElevation=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">&quot;@+id/card_text&quot;</span></span><br><span class="line">        app:layout_constraintEnd_toEndOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">&quot;parent&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">        &lt;LinearLayout</span><br><span class="line">            android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:orientation=<span class="string">&quot;vertical&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">            &lt;TextView</span><br><span class="line">                android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:layout_marginHorizontal=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">                android:layout_marginTop=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">                android:text=<span class="string">&quot;ä»Šå¤©çš„ç…§ç‰‡&quot;</span></span><br><span class="line">                android:textColor=<span class="string">&quot;#707070&quot;</span></span><br><span class="line">                android:textSize=<span class="string">&quot;16sp&quot;</span></span><br><span class="line">                android:textStyle=<span class="string">&quot;bold&quot;</span></span><br><span class="line"></span><br><span class="line">                /&gt;</span><br><span class="line">            &lt;com.google.android.material.card.MaterialCardView</span><br><span class="line">                android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">                android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:backgroundTint=<span class="string">&quot;#eeeeee&quot;</span></span><br><span class="line">                android:layout_marginHorizontal=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">                android:layout_marginTop=<span class="string">&quot;7dp&quot;</span></span><br><span class="line">                android:layout_marginBottom=<span class="string">&quot;15dp&quot;</span></span><br><span class="line">                app:cardElevation=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">                app:cardCornerRadius=<span class="string">&quot;10dp&quot;</span>&gt;</span><br><span class="line">                &lt;ImageView</span><br><span class="line">                    android:id=<span class="string">&quot;@+id/image_show&quot;</span></span><br><span class="line">                    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">                    android:layout_height=<span class="string">&quot;300dp&quot;</span></span><br><span class="line">                    android:scaleType=<span class="string">&quot;center&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    android:src=<span class="string">&quot;@drawable/ic_baseline_camera_alt_24&quot;</span></span><br><span class="line"></span><br><span class="line">                    android:padding=<span class="string">&quot;65dp&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    /&gt;</span><br><span class="line">            &lt;/com.google.android.material.card.MaterialCardView&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &lt;/LinearLayout&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;/com.google.android.material.card.MaterialCardView&gt;</span><br><span class="line"></span><br><span class="line">    &lt;com.google.android.material.card.MaterialCardView</span><br><span class="line">        android:id=<span class="string">&quot;@+id/card_text&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;100dp&quot;</span></span><br><span class="line">        android:layout_marginHorizontal=<span class="string">&quot;15dp&quot;</span></span><br><span class="line">        android:layout_marginBottom=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">        android:elevation=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        app:cardCornerRadius=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">        app:cardElevation=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">&quot;@+id/complete_Button&quot;</span></span><br><span class="line">        app:layout_constraintEnd_toEndOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">&quot;parent&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:layout_marginHorizontal=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">            android:layout_marginTop=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">            android:text=<span class="string">&quot;ä¸€è¡Œæ—¥è®°&quot;</span></span><br><span class="line">            android:textColor=<span class="string">&quot;#707070&quot;</span></span><br><span class="line">            android:textSize=<span class="string">&quot;16sp&quot;</span></span><br><span class="line">            android:textStyle=<span class="string">&quot;bold&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;com.google.android.material.textfield.TextInputEditText</span><br><span class="line">            android:id=<span class="string">&quot;@+id/diarytext_edit&quot;</span></span><br><span class="line">            android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:layout_gravity=<span class="string">&quot;bottom&quot;</span></span><br><span class="line">            android:layout_marginHorizontal=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">            android:layout_marginBottom=<span class="string">&quot;15dp&quot;</span></span><br><span class="line">            android:background=<span class="string">&quot;@drawable/button_drawable&quot;</span></span><br><span class="line">            android:backgroundTint=<span class="string">&quot;#eeeeee&quot;</span></span><br><span class="line">            android:maxLines=<span class="string">&quot;2&quot;</span></span><br><span class="line">            android:hint=<span class="string">&quot;è¯·è¾“å…¥å†…å®¹&quot;</span></span><br><span class="line">            android:paddingStart=<span class="string">&quot;10dp&quot;</span> /&gt;</span><br><span class="line">    &lt;/com.google.android.material.card.MaterialCardView&gt;</span><br><span class="line"></span><br><span class="line">    &lt;com.google.android.material.button.MaterialButton</span><br><span class="line">        android:id=<span class="string">&quot;@+id/complete_Button&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;50dp&quot;</span></span><br><span class="line">        android:backgroundTint=<span class="string">&quot;#3EB06A&quot;</span></span><br><span class="line">        android:insetTop=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        android:insetBottom=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        android:text=<span class="string">&quot;ä¿®æ”¹å®Œæˆ&quot;</span></span><br><span class="line">        android:textSize=<span class="string">&quot;18dp&quot;</span></span><br><span class="line">        android:textStyle=<span class="string">&quot;bold&quot;</span></span><br><span class="line">        app:cornerRadius=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        app:elevation=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        app:layout_constraintBottom_toBottomOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">        tools:layout_editor_absoluteX=<span class="string">&quot;0dp&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span><br></pre></td></tr></table></figure>





<h2 id="äº”ã€è½¯ä»¶æ“ä½œæµç¨‹"><a href="#äº”ã€è½¯ä»¶æ“ä½œæµç¨‹" class="headerlink" title="äº”ã€è½¯ä»¶æ“ä½œæµç¨‹"></a>äº”ã€è½¯ä»¶æ“ä½œæµç¨‹</h2><p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211206000220688.png"></p>
<h2 id="å…­ã€éš¾ç‚¹å’Œè§£å†³æ–¹æ¡ˆ"><a href="#å…­ã€éš¾ç‚¹å’Œè§£å†³æ–¹æ¡ˆ" class="headerlink" title="å…­ã€éš¾ç‚¹å’Œè§£å†³æ–¹æ¡ˆ"></a>å…­ã€éš¾ç‚¹å’Œè§£å†³æ–¹æ¡ˆ</h2><p>å¯¹äºæˆ‘ä¸ªäººè€Œè¨€æœ¬æ¬¡çš„éš¾ç‚¹ä¸»è¦æ˜¯å¸ƒå±€çš„é—®é¢˜ä»¥åŠå¯¹recycleviewçš„ä¸ç†Ÿæ‚‰ï¼Œå’Œä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„bugï¼Œå¯¼è‡´ä½“éªŒæå·®ï¼Œç°åœ¨é¡¹ç›®é‡Œä¹Ÿé—ç•™äº†ä¸€äº›åƒåœ¾ä»£ç </p>
<h4 id="1-æ—¥è®°åˆ—è¡¨åˆ·æ–°é—®é¢˜"><a href="#1-æ—¥è®°åˆ—è¡¨åˆ·æ–°é—®é¢˜" class="headerlink" title="1.æ—¥è®°åˆ—è¡¨åˆ·æ–°é—®é¢˜"></a>1.æ—¥è®°åˆ—è¡¨åˆ·æ–°é—®é¢˜</h4><p>è§£å†³æ–¹æ¡ˆï¼šåˆ©ç”¨Fragmentçš„ç”Ÿå‘½å‘¨æœŸï¼ŒæŠŠåŠ è½½Recycleviewæ”¾åœ¨<code>onstart( )</code>æ–¹æ³•é‡Œï¼Œæ¯å½“fragmentå˜ä¸ºå¯è§çŠ¶æ€ï¼Œä¾¿ä¼šæ‰§è¡Œä¸€æ¬¡åŠ è½½ï¼ˆå³åˆ›å»ºå®Œæ–°æ—¥è®°å’Œä¿®æ”¹å®Œæ—¥è®°å›åˆ°è¿™ä¸ªåˆ—è¡¨fragmentå°±ä¼šåŠ è½½å‡ºæ¥ï¼‰</p>
<h4 id="2-contextè·å–é—®é¢˜"><a href="#2-contextè·å–é—®é¢˜" class="headerlink" title="2.contextè·å–é—®é¢˜"></a>2.contextè·å–é—®é¢˜</h4><p>è§£å†³æ–¹æ¡ˆï¼šæœ‰çš„æ—¶å€™thisç”¨ä½œcontextä¼šç¿»è½¦ï¼Œæ‰€ä»¥å¯ä»¥å¼„ä¸ªå…¨å±€çš„context</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lnm011223.my_diary</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.<span class="keyword">annotation</span>.SuppressLint</span><br><span class="line"><span class="keyword">import</span> android.app.Application</span><br><span class="line"><span class="keyword">import</span> android.content.Context</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApplication</span> : <span class="type">Application</span></span>() &#123;</span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span>&#123;</span><br><span class="line">        <span class="meta">@SuppressLint(<span class="meta-string">&quot;StaticFieldLeak&quot;</span>)</span></span><br><span class="line">        <span class="keyword">lateinit</span> <span class="keyword">var</span> context: Context</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate()</span><br><span class="line">        context = applicationContext</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-recycleviewç‚¹å‡»é—®é¢˜"><a href="#3-recycleviewç‚¹å‡»é—®é¢˜" class="headerlink" title="3.recycleviewç‚¹å‡»é—®é¢˜"></a>3.recycleviewç‚¹å‡»é—®é¢˜</h4><p>è§£å†³æ–¹æ¡ˆï¼šä¸€å®šè¦è®°å¾—contextçš„å‚æ•°æ˜¯<code>parent.context</code>,ä¸ç„¶ä¼šç›´æ¥é—ªé€€</p>
<h2 id="ä¸ƒã€ä¸è¶³ä¹‹å¤„"><a href="#ä¸ƒã€ä¸è¶³ä¹‹å¤„" class="headerlink" title="ä¸ƒã€ä¸è¶³ä¹‹å¤„"></a>ä¸ƒã€ä¸è¶³ä¹‹å¤„</h2><p>è™½ç„¶ç›®å‰ç¨‹åºè·‘çš„æ•ˆæœè¿˜æ˜¯ä¸é”™çš„ï¼Œä½†æ˜¯ä¹Ÿåªæ˜¯åœ¨æ•°æ®é‡å°‘çš„æ—¶å€™ï¼Œå› ä¸ºè¿™ä¸ªåˆ—è¡¨åŠ è½½æ˜¯ä¸€æ¬¡åŠ è½½å…¨éƒ¨ï¼Œæ‰€ä»¥æ•°æ®å¤šçš„æ—¶å€™ï¼Œè‚¯å®šä¼šå¯¼è‡´å¡é¡¿ä»¥åŠéš¾æ‰¾åˆ°æƒ³è¦çš„è®°å½•ã€‚è€Œä¸”ç°åœ¨æ—¥è®°èƒ½è®°å½•çš„ä¸œè¥¿ä¹Ÿåªæœ‰æ—¶é—´ï¼Œæ–‡å­—ï¼Œå›¾ç‰‡ä»¥åŠå¿ƒæƒ…ï¼Œå†…å®¹æ¯”è¾ƒå°‘ã€‚</p>
<h2 id="å…«ã€ä»Šåè®¾æƒ³"><a href="#å…«ã€ä»Šåè®¾æƒ³" class="headerlink" title="å…«ã€ä»Šåè®¾æƒ³"></a>å…«ã€ä»Šåè®¾æƒ³</h2><p>1.å¯ä»¥åŠ å…¥æŒ‰å¹´ä»½æœˆä»½åˆ†ç±»çš„åŠŸèƒ½ï¼Œå°±ä¸ç”¨ä¸€æ¬¡æ€§åŠ è½½å…¨éƒ¨è®°å½•</p>
<p>2.å¯ä»¥åŠ å…¥å®šæ—¶æé†’åŠŸèƒ½ï¼Œæ¯å¤©è‡ªå®šä¹‰æ—¶é—´æé†’ç”¨æˆ·è¯¥å†™æ—¥è®°äº†</p>
<p>3.åŠ å…¥æŒ‰å…·ä½“æ—¥æœŸæŸ¥çœ‹æ—¥è®°çš„åŠŸèƒ½</p>
]]></content>
      <categories>
        <category>ä½œä¸š</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>UI</tag>
      </tags>
  </entry>
  <entry>
    <title>é”ä¸Reflexç©ºæƒ³</title>
    <url>/2021/12/08/Linux-4th/</url>
    <content><![CDATA[<h2 id="4-1-ç¨‹åºåˆ†æé¢˜ï¼šé”"><a href="#4-1-ç¨‹åºåˆ†æé¢˜ï¼šé”" class="headerlink" title="4.1 ç¨‹åºåˆ†æé¢˜ï¼šé”"></a>4.1 ç¨‹åºåˆ†æé¢˜ï¼šé”</h2><blockquote>
<ul>
<li>åŸºäºæ ‡å¿—(flag)çš„é”å®ç°æ–¹å¼ï¼š</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> __<span class="title">lock_t</span> &#123;</span> <span class="keyword">int</span> flag; &#125; <span class="keyword">lock_t</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">lock_t</span> *mutex)</span> </span>&#123;</span><br><span class="line">     <span class="comment">// 0 -&gt; lock is available, 1 -&gt; held</span></span><br><span class="line">     mutex-&gt;flag = <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">lock</span><span class="params">(<span class="keyword">lock_t</span> *mutex)</span> </span>&#123;</span><br><span class="line">     <span class="keyword">while</span> (mutex-&gt;flag == <span class="number">1</span>) <span class="comment">// TEST the flag   </span></span><br><span class="line">     ; <span class="comment">// spin-wait (do nothing)</span></span><br><span class="line">     mutex-&gt;flag = <span class="number">1</span>;         <span class="comment">// now SET it!             </span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">unlock</span><span class="params">(<span class="keyword">lock_t</span> *mutex)</span> </span>&#123;</span><br><span class="line">    mutex-&gt;flag = <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="4-1-1"><a href="#4-1-1" class="headerlink" title="4.1.1"></a>4.1.1</h3><blockquote>
<p>ç¬¬10è¡Œçš„æ³¨é‡Šï¼Œspin-waitï¼Œæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</p>
</blockquote>
<p>è‡ªæ—‹ç­‰å¾…ï¼Œå½“æ‰§è¡Œlockæ—¶ï¼Œå°±ä¼šä»€ä¹ˆéƒ½ä¸å¹²ï¼Œä¸æ–­çš„æ£€æµ‹flag</p>
<h3 id="4-1-2"><a href="#4-1-2" class="headerlink" title="4.1.2"></a>4.1.2</h3><blockquote>
<p>å‡è®¾æ²¡æœ‰åº•å±‚ç¡¬ä»¶æˆ–æ“ä½œç³»ç»Ÿçš„ç›¸å…³æ”¯æŒï¼Œè¯¥é”ç”¨äºè¿›ç¨‹é—´çš„äº’æ–¥åˆ™å…¶å®ç°æ–¹å¼ ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿè¯·è¯¦ç»†è¯´æ˜ã€‚</p>
</blockquote>
<p>æ²¡æœ‰åº•å±‚ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„æ”¯æŒï¼Œæ— æ³•ä¿è¯æ“ä½œåŸå­æ€§ï¼Œå°±æ˜¯æ‰§è¡Œå®ŒAè¿›ç¨‹çš„æŸä¸€è¡Œä»£ç ï¼Œå°±æœ‰å»æ‰§è¡ŒBè¿›ç¨‹çš„ï¼Œæ²¡æœ‰å®Œæ•´çš„æ‰§è¡Œå®Œä¸€ä¸ªè¿›ç¨‹çš„ä»£ç ï¼Œä¾‹å¦‚ä¸Šé¢çš„ä»£ç ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸¤ä¸ªè¿›ç¨‹åŒæ—¶è¢«é”ã€‚</p>
<p>åŸæœ¬åº”è¯¥ä¸€ä½“çš„flagè®¾ç½®å’Œæ£€æµ‹çš„åŸå­æ€§æ— æ³•å¾—åˆ°ä¿è¯ï¼Œå¯èƒ½ä¼šè¢«åˆ†å¼€æ‰§è¡Œã€‚</p>
<hr>
<blockquote>
<ul>
<li><p>Test-and-SetåŸå­æŒ‡ä»¤çš„å®ç°é€»è¾‘</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">TestAndSet</span><span class="params">(<span class="keyword">int</span> *old_ptr, <span class="keyword">int</span> <span class="keyword">new</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> old = *old_ptr; <span class="comment">//fetch old value at old_ptr</span></span><br><span class="line">    *old_ptr = <span class="keyword">new</span>;     <span class="comment">//store â€˜newâ€™ into old_ptr</span></span><br><span class="line">    <span class="keyword">return</span> old;         <span class="comment">//return the old value</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>åŸºäºTest-and-SetæŒ‡ä»¤çš„é”å®ç°æ–¹å¼ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> __<span class="title">lock_t</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> flag;</span><br><span class="line">&#125; <span class="keyword">lock_t</span>;</span><br><span class="line">        </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">lock_t</span> *lock)</span> </span>&#123;</span><br><span class="line">     <span class="comment">// 0: lock is available, 1: lock is held</span></span><br><span class="line">     lock-&gt;flag = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">lock</span><span class="params">(<span class="keyword">lock_t</span> *lock)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (TestAndSet(&amp;lock-&gt;flag, <span class="number">1</span>) == <span class="number">1</span>)</span><br><span class="line">    ; <span class="comment">// spin-wait (do nothing)</span></span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">unlock</span><span class="params">(<span class="keyword">lock_t</span> *lock)</span> </span>&#123;</span><br><span class="line">    lock-&gt;flag = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<h3 id="4-1-3"><a href="#4-1-3" class="headerlink" title="4.1.3"></a>4.1.3</h3><blockquote>
<p>â€œåŸºäº Test-and-Setâ€æŒ‡ä»¤çš„é”å®ç°æ–¹å¼ï¼Œæ˜¯å¦å¯ä»¥è§£å†³ 4.1.2 ä¸­ï¼Œâ€œåŸºäºæ ‡å¿— ï¼ˆflagï¼‰çš„é”å®ç°æ–¹å¼â€æ‰€å­˜åœ¨çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆ?</p>
</blockquote>
<p>ä¸€ä¸ªTest-and-Set(TAS)æŒ‡ä»¤åŒ…æ‹¬ä¸¤ä¸ªå­æ­¥éª¤ï¼Œ<strong>æŠŠç»™å®šçš„å†…å­˜åœ°å€è®¾ç½®ä¸º1ï¼Œç„¶åè¿”å›ä¹‹å‰çš„æ—§å€¼ã€‚</strong><br>è¿™ä¸¤ä¸ªå­æ­¥éª¤åœ¨ç¡¬ä»¶ä¸Šå®ç°ä¸ºä¸€ä¸ª<strong>åŸå­æ“ä½œ</strong>ï¼Œæ‰§è¡ŒæœŸé—´ä¸ä¼šè¢«å…¶ä»–å¤„ç†å™¨æ‰“æ–­ã€‚</p>
<p>å½“ç¬¬ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¿™æ®µä»£ç æ—¶ï¼ŒTASæŒ‡ä»¤ä¼šç«‹å³æŠŠlockè®¾ç½®ä¸º1ï¼Œå¹¶è¿”å›0 ï¼Œçº¿ç¨‹é€€å‡ºwhileå¾ªç¯è¿›å…¥ä¸´ç•ŒåŒºã€‚<br>å¦‚æœå¦ä¸€ä¸ªçº¿ç¨‹å°è¯•è¿›å…¥ä¸´ç•ŒåŒºï¼ŒTASä¼šæŠŠlockè®¾ç½®ä¸º1ï¼Œä½†æ˜¯ä¹Ÿä¼šè¿”å›1(ç”±ç¬¬ä¸€ä¸ªçº¿ç¨‹çš„TASæŒ‡ä»¤è®¾ç½®ä¸º1)ï¼Œ<br>æ­¤æ—¶ç¬¬äºŒä¸ªçº¿ç¨‹ä¼šä¸€ç›´whileå¾ªç¯(å¿™ç­‰å¾…)ï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªçº¿ç¨‹é€€å‡ºä¸´ç•ŒåŒºä»£ç ï¼Œæ‰§è¡Œäº†lock=0ï¼Œå³é‡Šæ”¾äº†é”ã€‚</p>
<p>æ‰€ä»¥TASæ“ä½œè¦ä¹ˆåŒæ—¶å®Œæˆæ£€æµ‹å’Œè®¾ç½®æ“ä½œï¼Œè¦ä¹ˆå°±éƒ½ä¸åšï¼Œå¯ä»¥è§£å†³ä¸Šä¸€ä¸ªæ–¹å¼å­˜åœ¨çš„é—®é¢˜ã€‚</p>
<h3 id="4-1-4"><a href="#4-1-4" class="headerlink" title="4.1.4"></a>4.1.4</h3><blockquote>
<p>å‡è®¾ç³»ç»Ÿä¸­æœ‰ 2 ä¸ªçº¿ç¨‹ X å’Œ Yï¼ˆä¼˜å…ˆçº§ç›¸åŒï¼‰ï¼Œå®ƒä»¬ä¹‹é—´é€šè¿‡â€œCPU æ—¶é—´ç‰‡è½®è½¬ è°ƒåº¦ç­–ç•¥â€æ¥åˆ†äº«åº•å±‚å”¯ä¸€çš„ä¸€ä¸ª CPU èµ„æºã€‚å…¶ä¸­ï¼ŒX åœ¨æŸä¸ªæ—¶åˆ»é€šè¿‡å›¾ 3 çš„ lock()è·å– åˆ°äº†é”ï¼Œå¹¶ä¸”éœ€è¦è¿è¡Œ 10 ä¸ªæ—¶é—´ç‰‡æ‰ä¼šè°ƒç”¨ unlock()æ¥é‡Šæ”¾é”ã€‚è¯·é—®ï¼Œåœ¨æ­¤æ—¶é—´æ®µå†…ï¼ŒY ä¼šåˆ†åˆ°æ—¶é—´ç‰‡å—? å¦‚æœå¯ä»¥åˆ†åˆ°ï¼Œé‚£ä¹ˆ Y æ˜¯ä¸ªä»€ä¹ˆè¿è¡Œå½¢æ€? æ­¤è¿è¡Œå½¢æ€ä¼šå¸¦æ¥ä»€ä¹ˆæ ·çš„è´Ÿé¢æ•ˆæœ?</p>
</blockquote>
<p>å› ä¸ºè°ƒåº¦è§„åˆ™å·²ç»æŒ‡å®šä¸ºæ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ï¼Œè€Œä¸”CPUèµ„æºåªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥å½“Xåœ¨æŸä¸ªæ—¶åˆ»é€šè¿‡lockè·å¾—äº†é”ï¼Œåœ¨Xçš„æ—¶é—´ç‰‡ç»“æŸä»¥åï¼ŒXå°±ä¼šè¢«CPUç§»åˆ°å°±ç»ªé˜Ÿåˆ—çš„é˜Ÿå°¾ï¼Œæ­¤æ—¶Yä¾¿ä¼šå¼€å§‹æ‰§è¡Œï¼Œä½†æ˜¯Xè¿˜å æ®ç€é”ï¼Œæ‰€ä»¥å³ä½¿Yåˆ†åˆ°äº†æ—¶é—´ç‰‡ï¼Œä¹Ÿåªä¼šå› ä¸ºæ²¡æœ‰è·å–åˆ°é”è€Œä¸€ç›´å¾ªç¯ç­‰å¾…ï¼Œå ç”¨ç€CPUï¼Œç›´åˆ°æ—¶é—´ç‰‡ç”¨å®Œï¼Œç„¶ååˆè½®åˆ°Xï¼Œä¸æ–­å¾ªç¯è¿™ä¸ªè¿‡ç¨‹ï¼Œç­‰Xè¿è¡Œå®Œ10ä¸ªæ—¶é—´ç‰‡ï¼Œå°±èƒ½è¿è¡ŒYäº†ã€‚è¿™ä¼šé€ æˆCPUåˆ©ç”¨ç‡ä½çš„é—®é¢˜ï¼Œè€Œä¸”æ‰§è¡Œç­‰å¾…çš„ç©ºæŒ‡ä»¤ä¹Ÿä¼šå¸¦æ¥é¢å¤–çš„å¼€é”€ï¼Œé€ æˆèµ„æºæµªè´¹ã€‚</p>
<hr>
<blockquote>
<p>åŸºäºLinuxçš„â€œFutexâ€é”å®ç°æ–¹å¼ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mutex_lock</span><span class="params">(<span class="keyword">int</span> *mutex)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> v;</span><br><span class="line">  <span class="comment">/* Bit 31 was clear, we got the mutex (the fastpath) */</span></span><br><span class="line">  <span class="keyword">if</span> (atomic_bit_test_set(mutex, <span class="number">31</span>) == <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  atomic_increment(mutex);</span><br><span class="line">  <span class="keyword">while</span> (<span class="number">1</span>) &#123;   </span><br><span class="line">    <span class="keyword">if</span> (atomic_bit_test_set(mutex, <span class="number">31</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">      atomic_decrement(mutex);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* We have to waitFirst make sure the futex value</span></span><br><span class="line"><span class="comment">    we are monitoring is truly negative (locked). */</span></span><br><span class="line">    v = *mutex;</span><br><span class="line">    <span class="keyword">if</span> (v &gt;= <span class="number">0</span>)</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    futex_wait(mutex, v);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mutex_unlock</span><span class="params">(<span class="keyword">int</span> *mutex)</span> </span>&#123;</span><br><span class="line">  <span class="comment">/* Adding 0x80000000 to counter results in 0 if and</span></span><br><span class="line"><span class="comment">  only if there are not other interested threads */</span></span><br><span class="line">  <span class="keyword">if</span> (atomic_add_zero(mutex, <span class="number">0x80000000</span>))  </span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* There are other threads waiting for this mutex,</span></span><br><span class="line"><span class="comment">   wake one of them up. */</span></span><br><span class="line">  futex_wake(mutex); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="4-1-5"><a href="#4-1-5" class="headerlink" title="4.1.5"></a>4.1.5</h3><blockquote>
<p>è¯¥å›¾ä¸­çš„ç¬¬ 4ï½5 è¡Œï¼Œå’Œå›¾ä¸­çš„ç¬¬ 8ï½11 è¡Œï¼Œå…·ä½“å®ç°ä»€ä¹ˆä½œç”¨? å®ƒä»¬æ˜¯å¦æœ‰åŠŸ èƒ½å†—ä½™å’Œå†²çª? å¯ä»¥å»æ‰å½“ä¸­çš„ä¸€ä¸ªå—? ä¸ºä»€ä¹ˆ? </p>
</blockquote>
<ul>
<li>4ï½5è¡Œï¼Œä¸€ä¸ªå°è¯•è·å–é”çš„è¿‡ç¨‹ï¼Œè‡ªæ—‹ä¸€æ¬¡ï¼Œè‹¥èƒ½è·å–ï¼Œåˆ™è¯¥çº¿ç¨‹ç›´æ¥è¿”å›</li>
<li>8ï½11è¡Œï¼Œåœ¨è¢«<code>futex_wait</code>æ²‰ç¡çš„çº¿ç¨‹ç»è¿‡<code>unlock</code>åè¢«<code>futex_wake</code>å”¤é†’ï¼Œå†é€šè¿‡TASæ“ä½œè·å¾—é”</li>
<li>ä¸èƒ½å»æ‰å…¶ä¸­çš„ä¸€ä¸ªï¼Œåœ¨è¿™ä¸¤æ®µä»£ç ä¸­æœ‰ä¸€å¥<code>atomic_increment(mutex);</code>ï¼Œè¿™å¥è¯çš„ä½œç”¨æ˜¯ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œ<code>futex_lock</code>æ—¶ï¼Œå¦‚æœä¸€å¼€å§‹æ²¡æœ‰åœ¨4ï½4è¡Œè·å¾—é”ï¼Œåˆ™éœ€è¦ç­‰å¾…ï¼Œå¹¶åŠ å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—ï¼Œ8ï½11è¡Œçš„ä»£ç çš„ä½œç”¨æ˜¯è®©è¢«å”¤é†’çš„çº¿ç¨‹è·å–åˆ°é”é€€å‡ºï¼Œä¸¤è€…æ˜¯äº’ç›¸é…åˆçš„ã€‚</li>
</ul>
<h3 id="4-1-6"><a href="#4-1-6" class="headerlink" title="4.1.6"></a>4.1.6</h3><blockquote>
<p>åœ¨ç¬¬ 24ï½25 è¡Œä¸­çš„ if è¯­å¥æ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„? å¦‚æœæ¡ä»¶è¯­å¥ <code>atomic_add_zero (mutex, 0x80000000)</code> ä¸ºçœŸï¼Œä¸ºä»€ä¹ˆè¦ç›´æ¥ returnï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥æ‰§è¡Œç¬¬ 29 è¡Œç¨‹åºå‘¢? </p>
</blockquote>
<ul>
<li><p>å‡å¦‚æ²¡æœ‰è¿™ä¸ª<code>if (v &gt;= 0)</code>è¯­å¥ï¼Œè‹¥çº¿ç¨‹Aæ²¡æœ‰è·å–åˆ°é”ï¼Œå½“å®ƒè¿˜æ²¡æ‰§è¡Œåˆ°<code>futex_wait</code>æ—¶ï¼Œçº¿ç¨‹C<code>unlock</code>äº†ï¼Œæ­¤æ—¶ç­‰å¾…é˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™mutexåˆ°æœ€é«˜ä½ä¸º0ï¼Œ<code>futex_wake</code>ä¸ä¼šè¢«è°ƒç”¨ï¼Œæ­¤æ—¶çº¿ç¨‹Bä¼šè¿›å…¥<code>futex_wait</code>,ä¼šå¯¼è‡´çº¿ç¨‹Bæ— æ³•è¢«å”¤é†’ã€‚</p>
<p>æœ‰äº†è¿™ä¸ªifè¯­å¥ä»¥åï¼Œå½“æœ€é«˜ä½å˜ä¸º0ä»¥åï¼Œmuetxä¹Ÿä¼šå˜ä¸º0ï¼Œçº¿ç¨‹Bä¼šè¿›å…¥ifè¯­å¥åæ‰§è¡Œ<code>continue</code>ï¼Œåœ¨æ¥ä¸‹æ¥çš„å¾ªç¯é‡Œï¼ŒBä¼šè·å¾—Cé‡Šæ”¾çš„é”ï¼Œå°±ä¸ä¼šé˜»å¡ã€‚</p>
</li>
<li><p>è‹¥<code>atomic_add_zero(mutex, 0x80000000)</code>ä¸ºçœŸï¼Œåˆ™è¯´æ˜ç­‰å¾…é˜Ÿåˆ—é•¿åº¦ä¸º0ï¼Œæ­¤æ—¶å°±æ²¡æœ‰çº¿ç¨‹éœ€è¦<code>futex_wake</code>äº†ï¼Œç›´æ¥<code>return</code>å¯ä»¥å‡å°‘ç³»ç»Ÿè°ƒç”¨çš„å¼€é”€ã€‚</p>
</li>
</ul>
<h3 id="4-1-7"><a href="#4-1-7" class="headerlink" title="4.1.7"></a>4.1.7</h3><blockquote>
<p>å›¾ 4 æ‰€å±•ç¤ºçš„ Futex é”å®ç°æ–¹å¼ï¼Œæ˜¯å¦æ”¹è¿›äº† 4.1.4 é—®é¢˜ä¸­æåˆ°çš„è´Ÿé¢æ•ˆæœï¼Œä¸ºä»€ä¹ˆ?</p>
</blockquote>
<p>å¯ä»¥æ”¹è¿›ä¸Šé¢æåˆ°çš„è´Ÿé¢æ•ˆæœï¼Œåˆ©ç”¨<code>futex_wait</code>å¯ä»¥è®©æ²¡æœ‰é”çš„çº¿ç¨‹ç¡çœ ï¼Œè®©æœ‰é”çš„çº¿ç¨‹å ç”¨CPUï¼Œæ›´å¿«å®Œæˆä»»åŠ¡ï¼Œé¿å…CPUä¸å¿…è¦çš„æµªè´¹ï¼Œé¿å…ä¸å¿…è¦çš„çº¿ç¨‹è¿›å…¥CPUè°ƒåº¦ï¼Œå¯ä»¥æé«˜æ€§èƒ½ã€‚</p>
<hr>
<h2 id="4-2-è¿ç”¨ç³»ç»Ÿæ€ç»´å¯¹çƒ­é—¨è®¡ç®—æœºæŠ€æœ¯è¿›è¡Œåˆ†æå’Œä»‹ç»"><a href="#4-2-è¿ç”¨ç³»ç»Ÿæ€ç»´å¯¹çƒ­é—¨è®¡ç®—æœºæŠ€æœ¯è¿›è¡Œåˆ†æå’Œä»‹ç»" class="headerlink" title="4.2 è¿ç”¨ç³»ç»Ÿæ€ç»´å¯¹çƒ­é—¨è®¡ç®—æœºæŠ€æœ¯è¿›è¡Œåˆ†æå’Œä»‹ç»"></a>4.2 è¿ç”¨ç³»ç»Ÿæ€ç»´å¯¹çƒ­é—¨è®¡ç®—æœºæŠ€æœ¯è¿›è¡Œåˆ†æå’Œä»‹ç»</h2><blockquote>
<p>4.2.1 OKï¼Œç°åœ¨è½®åˆ°å„ä½åŒå­¦è¿ç”¨ç³»ç»Ÿæ€ç»´å¯¹è‹±ä¼Ÿè¾¾å…¬å¸çš„å¦å¤–ä¸€ä¸ªäº®ç‚¹ æ¸¸æˆæŠ€æœ¯ Nvidia Reflex è¿›è¡Œåˆ†æå’Œä»‹ç»ã€‚</p>
</blockquote>
<p>å¿«ä¹æ¸¸æˆæœ€é‡è¦çš„è‡ªç„¶æ˜¯ç”»è´¨å’Œæµç•…åº¦å•¦ï¼Œä¸è¿‡è¦æƒ³æ‰“å‡ºå¥½çš„æ“ä½œï¼ŒæŠ›å¼€ä¸ªäººæŠ€æœ¯ä¸è°ˆï¼Œä½å»¶è¿Ÿæ‰æ˜¯ç‹é“ã€‚åœ¨ç©ç½‘ç»œæ¸¸æˆæ—¶ï¼Œå¦‚æœç½‘ç»œä¸å¥½ï¼Œå°±ä¼šé€ æˆé«˜å»¶è¿Ÿï¼Œæ¯”å¦‚ä¸Šä¸€ç§’æ•Œäººè¿˜åœ¨è¿™ä¸ªä½ç½®ï¼Œä½ ä¸¢äº†ä¸€ä¸ªæŠ€èƒ½è¿‡å»ï¼Œä¸‹ä¸€ç§’ä½ å‘ç°æ•Œäººå…¶å®æ—©å°±å»äº†å¦ä¸€ä¸ªä½ç½®ã€‚åˆæ¯”å¦‚ä½ çªç„¶å‘ç°æ— è®ºæ€ä¹ˆæ“ä½œï¼Œè§’è‰²éƒ½å®šä½ä¸åŠ¨äº†ï¼Œéƒ½æ˜¯é«˜å»¶è¿Ÿçš„è¡¨ç°ï¼Œè¿™ç§äººæˆ‘ä»¬ä¸€èˆ¬ç§°ä¹‹ä¸ºé«˜pingæˆ˜å£«ã€‚</p>
<p>å•æœºæ¸¸æˆè‡ªç„¶ä¸å­˜åœ¨ç½‘ç»œå»¶è¿Ÿï¼Œä½†æ˜¯è®¾å¤‡æ‰€å¸¦æ¥çš„ç³»ç»Ÿå»¶è¿Ÿæ˜¯æ— æ³•é¿å…çš„ ã€‚ä»ç‚¹å‡»é”®ç›˜æˆ–é¼ æ ‡åˆ°å±å¹•ä¸Šæ¸²æŸ“å‡ºæ¥ï¼Œè¦ç»è¿‡å¥½å‡ ä¸ªæ­¥éª¤ã€‚</p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211209105637773.png"></p>
<p>è‹±ä¼Ÿè¾¾æ¨å‡ºçš„è¿™ä¸ª Nvidia Reflex æŠ€æœ¯ä¸»è¦è§£å†³çš„æ˜¯å›¾é‡ŒPCè¿™ä¸ªéƒ¨åˆ†çš„é—®é¢˜ã€‚ Nvidia Reflexä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p>
<blockquote>
<ul>
<li><strong>ä½å»¶è¿ŸæŠ€æœ¯ï¼š</strong><ul>
<li><strong>NVIDIA Reflex SDK</strong> â€“ å¼€å‘è€… SDKï¼Œç”¨äºå¯ç”¨ NVIDIA Reflex ä½å»¶è¿Ÿæ¨¡å¼ï¼Œä»è€Œåœ¨ GPU å¯†é›†å‹åœºæ™¯ä¸­é™ä½å»¶è¿Ÿ</li>
<li><strong>å»¶è¿Ÿä¼˜åŒ–çš„é©±åŠ¨æ§åˆ¶é¢æ¿è®¾ç½®</strong> â€“ å¢å¼ºçš„â€œé¦–é€‰æœ€é«˜æ€§èƒ½â€æ¨¡å¼å’Œâ€œè¶…ä½å»¶è¿Ÿâ€æ¨¡å¼</li>
<li><strong>GeForce Experience æ€§èƒ½ä¼˜åŒ–</strong> â€“ ä¸€é”®å¼ GPU è¶…é¢‘è‡ªåŠ¨ä¼˜åŒ–å·¥å…·</li>
</ul>
</li>
<li><strong>å»¶è¿Ÿæµ‹é‡å·¥å…·ï¼š</strong><ul>
<li><strong>NVIDIA Reflex SDK æŒ‡æ ‡</strong> â€“ æ¸¸æˆå’Œæ¸²æŸ“å»¶è¿Ÿæ ‡è®°ä½¿å¼€å‘è€…èƒ½å¤Ÿåœ¨æ¸¸æˆä¸­æ˜¾ç¤ºå»¶è¿ŸæŒ‡æ ‡</li>
<li><strong>NVIDIA Reflex å»¶è¿Ÿåˆ†æå™¨</strong> â€“ 360Hz G-SYNC æ˜¾ç¤ºå™¨çš„æ–°åŠŸèƒ½ç‡å…ˆå®ç°äº†å®Œæ•´çš„ç«¯åˆ°ç«¯çš„ç³»ç»Ÿå»¶è¿Ÿæµ‹é‡</li>
<li><strong>GeForce Experience æ€§èƒ½ç›‘æ§</strong> â€“ æä¾›ä¾§æ å’Œæ¸¸æˆä¸­å åŠ æ˜¾ç¤ºï¼Œå¯æ˜¾ç¤ºåŒ…æ‹¬å»¶è¿Ÿåœ¨å†…çš„å®æ—¶æ€§èƒ½æŒ‡æ ‡</li>
</ul>
</li>
</ul>
</blockquote>
<p>è€Œé‡ç‚¹åˆ†æçš„è‚¯å®šæ˜¯<strong>NVIDIA Reflex SDK</strong>ï¼Œå…¶ä»–çš„åªä¸è¿‡æ˜¯ä¸€äº›è®¾ç½®ï¼Œå…³é”®éƒ¨åˆ†è¿˜æ˜¯è¿™ä¸ª<strong>SDK</strong>ã€‚</p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20211209201501001.png"></p>
<p>ä»è¿™å¼ å›¾å¯ä»¥çœ‹å‡ºï¼Œä»ç‚¹å‡»å¤–è®¾å¼€å§‹ï¼Œå…ˆç»è¿‡CPUå†ç»è¿‡æ¸²æŸ“é˜Ÿåˆ—ï¼Œå†é€šè¿‡GPUæ¸²æŸ“æ‰ä¼šå‘ˆç°åœ¨å±å¹•ä¸Šï¼ŒSDKå°±æ˜¯é€šè¿‡è°ƒæ§CPUå’ŒGPUçš„å¹³è¡¡æ¥æ›´å¿«çš„å¤„ç†æ¸²æŸ“é˜Ÿåˆ—é™ä½ç³»ç»Ÿå»¶è¿Ÿï¼Œä»è€Œæ¶ˆé™¤ GPU æ¸²æŸ“æ’é˜Ÿç°è±¡ã€‚</p>
<p>ç«æŠ€æ¸¸æˆç¬æ¯ä¸‡å˜ï¼Œå› æ­¤ä¼šåœ¨å—é™äºGPUå’Œå—é™äºCPUä¹‹é—´æ¥å›è½¬æ¢ã€‚æ ¹æ®è¿™ç¯‡æ–‡ç« å†™çš„ï¼Œåº”è¯¥æ˜¯åˆ†ä¸ºäº†ä¸¤ç§æƒ…å†µï¼š</p>
<ul>
<li>æ¸¸æˆå— GPU é™åˆ¶ï¼Œè¿™æ—¶å€™å°±ä¼šé¿å…GPUä½œä¸šå¤§é‡æ’é˜Ÿã€‚CPU å¤„ç†å¸§çš„é€Ÿåº¦å¿«äº GPU æ¸²æŸ“å¸§çš„é€Ÿåº¦ï¼Œé€ æˆäº†è¿™ç§ä½œä¸šç§¯å‹ï¼Œä»è€Œå¯¼è‡´æ¸²æŸ“å»¶è¿Ÿå¢åŠ ã€‚</li>
<li>æ¸¸æˆå— CPU é™åˆ¶ã€‚Reflex SDK å°†é€šè¿‡ä¿æŒè¾ƒé«˜çš„ GPU æ—¶é’Ÿé¢‘ç‡æ¥ç¡®ä¿è¾ƒä½çš„å»¶è¿Ÿã€‚</li>
</ul>
<p>æœ¬è´¨ä¸Šæ¥è¯´ï¼Œå…¶å®å°±æ˜¯å¼€å‘è€…åœ¨æ¸¸æˆä¸­ä½¿ç”¨äº†SDKï¼Œè¿™å¯ä»¥æ›´å¥½çš„æ§åˆ¶CPUçš„è¿è¡Œé€Ÿåº¦ï¼Œä½¿å…¶æ— æ³•æå‰è¿è¡Œï¼Œè¿™æ ·å°±ä¸ä¼šæäº¤æ›´å¤šçš„ä»»åŠ¡ç»™GPUï¼Œä½†æ˜¯åˆè¦åŠæ—¶çš„æäº¤ä½œä¸šï¼Œè®©GPUæ²¡æœ‰ç©ºé—²æ—¶é—´ï¼Œè®©CPUä½œä¸šæ—¶é—´ç¨å¾®å»¶åï¼Œå°±èƒ½é™ä½å»¶è¿Ÿï¼Œè¿™å°±å«å‡å°‘CPUåå‹ã€‚è€Œåœ¨æµç¨‹çš„å†…éƒ¨ï¼Œå‡ºç°å¸§ä¸å¸§ä¹‹é—´æ’é˜Ÿä¹Ÿæ˜¯å¸ç©ºè§æƒ¯çš„ã€‚ä¾‹å¦‚æ¸¸æˆå¼•æ“ä¸æ¸²æŸ“å™¨ä¸Šçš„æœ€ç»ˆGPUå·¥ä½œä¹‹é—´ï¼Œå®é™…ä¸Šæœ‰æ•°ä¸ªå¾…å¤„ç†çš„å¸§æ­£åœ¨æ’é˜Ÿï¼Œä»è€Œé€ æˆäº†å»¶è¿Ÿï¼Œè¿™æ—¶å€™å¯èƒ½æ˜¯GPUå¤„ç†å¸§çš„é€Ÿåº¦èµ¶ä¸ä¸ŠCPUæäº¤æ¸²æŸ“è¯·æ±‚çš„é€Ÿåº¦ï¼Œè¿™æ ·å°±é€ æˆäº†CPUçš„åå‹ã€‚å› æ­¤é€‚å½“çš„ä¸¢æ‰ä¸€äº›æ— æ•ˆçš„æ¸²æŸ“è¯·æ±‚å°±å¯ä»¥ä¼˜åŒ–å»¶è¿Ÿã€‚åŒæ ·ï¼Œåœ¨å—GPUé™åˆ¶ä¸‹ï¼ŒCPUä¹Ÿå¿…é¡»ç­‰å¾…ä¸Šä¸€å¸§å¤„ç†å®Œæˆåï¼Œæ‰èƒ½äº§ç”Ÿä¸‹ä¸€å¸§ã€‚</p>
<p>ä»ç½‘ä¸Šçœ‹åˆ°ä¸€å¼ æœ‰è¶£çš„å›¾</p>
<p><img src="https://pic3.zhimg.com/80/v2-ceb6933f2bfa1a2be3b24e82885e4b56_1440w.jpg" alt="img"></p>
<p>å…¶å®NVIDIA ReflexæŠ€æœ¯å°±æ˜¯ç”¨æ¥ç¼“è§£CPUä¸GPUä¹‹é—´çš„å°´å°¬å¤„å¢ƒï¼Œæ¶ˆé™¤GPUæ¸²æŸ“é˜Ÿåˆ—ã€‚æ¶ˆé™¤CPUæ¸²æŸ“çš„â€œæ— ç”¨å¸§â€ï¼Œæ¶ˆé™¤åå‹ï¼Œå¹¶å¯ç«‹åˆ»ä¼ é€è‡³æ˜¾å¡è¿›è¡Œæ¸²æŸ“ã€‚</p>
<p>åœ¨ä»¥å‰ï¼Œå¦‚æœæ²¡æœ‰Reflexï¼Œè¦æƒ³è·å¾—æ›´ä½çš„è¾“å…¥å»¶è¿Ÿï¼Œä½ éœ€è¦é€šè¿‡æ¸¸æˆè‡ªå¸¦çš„å¸§ç‡é™åˆ¶å™¨ï¼Œå› ä¸ºé€šè¿‡é™åˆ¶å¸§ç‡ï¼Œæˆ‘ä»¬æœºå™¨ä¸Šçš„GPUç“¶é¢ˆè¢«é‡Šæ”¾äº†ï¼ŒGPUæ¸²æŸ“çš„é€Ÿåº¦æ›´å¿«ï¼Œæ‰€ä»¥å‹åŠ›å°±ä¸ä¼šåˆ°CPUè¿™é‡Œã€‚åœ¨è¿™é‡ŒReflexå¯ä»¥ä¿è¯å¸§ç‡ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æœ‰æ•ˆåœ°å‡å°‘ä½ çš„è¾“å…¥å»¶è¿Ÿï¼Œå› ä¸ºå®ƒä¼šåŠ¨æ€åœ°è‡ªæˆ‘è°ƒæ•´ã€‚åŸç†æ˜¯ä¸€æ ·çš„ï¼Œé€šè¿‡è½¯ä»¶é©±åŠ¨å±‚é¢ï¼Œåè°ƒCPUå’ŒGPUçš„å…³ç³»æ˜¯éå¸¸é‡è¦çš„ï¼Œå°±åƒCPUå’Œå†…å­˜çš„å…³ç³»ä¸€æ ·ã€‚</p>
<p>ReflexæŠ€æœ¯å¯ä»¥æ›´å¥½çš„ä»æ¸¸æˆä¸­æ§åˆ¶CPUçš„è¿è¡Œé€Ÿåº¦ï¼ˆä¼°è®¡æ˜¯ç›´æ¥é€šè¿‡æ“ä½œç³»ç»Ÿæ¥æ“ä½œæˆ‘ä»¬CPUçš„å·¥ä½œæµç¨‹ï¼‰ï¼Œä½¿CPUä¸èƒ½è¶…å‰è¿è¡Œã€‚å¹¶å…è®¸CPUåŠæ—¶å‘GPUæäº¤ä½œä¸šï¼Œç„¶åè®©GPUåœ¨ä½œä¸šç®¡é“ä¸­æ²¡æœ‰ä»»ä½•ç©ºé—²çš„é—´éš™æ¥å¤„ç†ä½œä¸šã€‚è€Œä¸”ï¼Œé€šè¿‡ç¨å¾®æ¨è¿ŸCPUä½œä¸šçš„å¼€å§‹æ—¶é—´ï¼Œä¸ºå°½å¯èƒ½åœ°å¯¹æœ€åä¸€æ¯«ç§’çš„è¾“å…¥è¿›è¡Œé‡‡æ ·åˆ›é€ äº†æœºä¼šï¼Œä»è€Œè¿›ä¸€æ­¥å‡å°‘äº†å»¶è¿Ÿã€‚</p>
]]></content>
      <categories>
        <category>å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Reflex</tag>
      </tags>
  </entry>
  <entry>
    <title>é€šè®¯å½•çš„å®ç°</title>
    <url>/2021/12/23/My-contacts/</url>
    <content><![CDATA[<h1 id="é€šè®¯å½•çš„è®¾è®¡ä¸å®ç°è¯´æ˜æ–‡æ¡£"><a href="#é€šè®¯å½•çš„è®¾è®¡ä¸å®ç°è¯´æ˜æ–‡æ¡£" class="headerlink" title="é€šè®¯å½•çš„è®¾è®¡ä¸å®ç°è¯´æ˜æ–‡æ¡£"></a>é€šè®¯å½•çš„è®¾è®¡ä¸å®ç°è¯´æ˜æ–‡æ¡£</h1><h2 id="ä¸€ã€è½¯ä»¶åç§°"><a href="#ä¸€ã€è½¯ä»¶åç§°" class="headerlink" title="ä¸€ã€è½¯ä»¶åç§°"></a>ä¸€ã€è½¯ä»¶åç§°</h2><p>â€‹    ç®€æ˜“é€šè®¯å½•</p>
<blockquote>
<p>GitHubé¡¹ç›®åœ°å€ï¼š<a href="https://github.com/lnm011223/My_contact">https://github.com/lnm011223/My_contact</a></p>
</blockquote>
<h2 id="äºŒã€è½¯ä»¶å†…å®¹ç®€ä»‹"><a href="#äºŒã€è½¯ä»¶å†…å®¹ç®€ä»‹" class="headerlink" title="äºŒã€è½¯ä»¶å†…å®¹ç®€ä»‹"></a>äºŒã€è½¯ä»¶å†…å®¹ç®€ä»‹</h2><p>ä¸€ä¸ªçœŸçš„å¾ˆç®€å•çš„é€šè®¯å½•ï¼Œç´ æé…è‰²ä»€ä¹ˆçš„ç›´æ¥ç”¨äº†ä¸Šæ¬¡æ—¥è®°æœ¬çš„ï¼ˆä¸è¿‡æœ¬æ¥è¿™ä¸ªå®éªŒå°±æ²¡ä»€ä¹ˆè¦åšçš„ï¼Œä¹¦ä¸Šéƒ½æœ‰ï¼‰</p>
<p>å®ç°äº†çŸ­æŒ‰æ‰“ç”µè¯ï¼Œé•¿æŒ‰å‘çŸ­ä¿¡çš„åŠŸèƒ½ï¼Œå³ä¾§çš„æŒ‰é’®ç‚¹å‡»ä¹Ÿå¯ä»¥å®ç°æ‰“ç”µè¯å’Œå‘çŸ­ä¿¡</p>
<h2 id="ä¸‰ã€ç•Œé¢è®¾è®¡"><a href="#ä¸‰ã€ç•Œé¢è®¾è®¡" class="headerlink" title="ä¸‰ã€ç•Œé¢è®¾è®¡"></a>ä¸‰ã€ç•Œé¢è®¾è®¡</h2><h3 id="1-ç•Œé¢å±•ç¤º"><a href="#1-ç•Œé¢å±•ç¤º" class="headerlink" title="1.ç•Œé¢å±•ç¤º"></a>1.ç•Œé¢å±•ç¤º</h3><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/Screenshot_1640223080.png" alt="" style="zoom:50%;" />

<img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/Screenshot_1640223087.png" alt="" style="zoom:50%;" />

<h3 id="2-æƒé™è·å–"><a href="#2-æƒé™è·å–" class="headerlink" title="2.æƒé™è·å–"></a>2.æƒé™è·å–</h3><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/Screenshot_1640223091.png" style="zoom:50%;" />

<img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/Screenshot_1640223110.png" style="zoom:50%;" />

<img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/Screenshot_1640223178.png" style="zoom:50%;" />

<h2 id="å››ã€å…³é”®ä»£ç "><a href="#å››ã€å…³é”®ä»£ç " class="headerlink" title="å››ã€å…³é”®ä»£ç "></a>å››ã€å…³é”®ä»£ç </h2><h3 id="1-Activityé€»è¾‘"><a href="#1-Activityé€»è¾‘" class="headerlink" title="1.Activityé€»è¾‘"></a>1.Activityé€»è¾‘</h3><blockquote>
<p>1.MainActivity.kt</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lnm011223.my_contacts</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.Manifest</span><br><span class="line"><span class="keyword">import</span> android.<span class="keyword">annotation</span>.SuppressLint</span><br><span class="line"><span class="keyword">import</span> android.content.pm.PackageManager</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle</span><br><span class="line"><span class="keyword">import</span> android.provider.ContactsContract</span><br><span class="line"><span class="keyword">import</span> android.util.Log</span><br><span class="line"><span class="keyword">import</span> androidx.core.app.ActivityCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.content.ContextCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowInsetsCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowInsetsControllerCompat</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.LinearLayoutManager</span><br><span class="line"><span class="keyword">import</span> kotlinx.android.synthetic.main.activity_main.*</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> : <span class="type">AppCompatActivity</span></span>() &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> contactlist = ArrayList&lt;Contact&gt;()</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">        setContentView(R.layout.activity_main)</span><br><span class="line">        setSupportActionBar(toolbar)</span><br><span class="line">        <span class="keyword">val</span> layoutManager = LinearLayoutManager(<span class="keyword">this</span>)</span><br><span class="line">        contactview.layoutManager = layoutManager</span><br><span class="line">        <span class="keyword">val</span> adapter = ContactAdapter(contactlist)</span><br><span class="line">        contactview.adapter = adapter</span><br><span class="line">        Log.d(<span class="string">&quot;111&quot;</span>,<span class="string">&quot;111&quot;</span>)</span><br><span class="line">        <span class="keyword">val</span> insetsController = WindowCompat.getInsetsController(</span><br><span class="line">            window, window.decorView</span><br><span class="line">        )</span><br><span class="line">        insetsController?.systemBarsBehavior = WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE</span><br><span class="line">        insetsController?.hide(WindowInsetsCompat.Type.navigationBars())</span><br><span class="line">        <span class="keyword">if</span> (ContextCompat.checkSelfPermission(</span><br><span class="line">                <span class="keyword">this</span>,</span><br><span class="line">                Manifest.permission.READ_CONTACTS</span><br><span class="line">            ) != PackageManager.PERMISSION_GRANTED</span><br><span class="line">        ) &#123;</span><br><span class="line">            ActivityCompat.requestPermissions(<span class="keyword">this</span>, arrayOf(Manifest.permission.READ_CONTACTS), <span class="number">2</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            readContacts()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressLint(<span class="meta-string">&quot;Range&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">readContacts</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="comment">// æŸ¥è¯¢è”ç³»äººæ•°æ®</span></span><br><span class="line">        contentResolver.query(</span><br><span class="line">            ContactsContract.CommonDataKinds.Phone.CONTENT_URI,</span><br><span class="line">            <span class="literal">null</span>,</span><br><span class="line">            <span class="literal">null</span>,</span><br><span class="line">            <span class="literal">null</span>,</span><br><span class="line">            <span class="literal">null</span></span><br><span class="line">        )?.apply &#123;</span><br><span class="line">            <span class="keyword">while</span> (moveToNext()) &#123;</span><br><span class="line">                <span class="comment">// è·å–è”ç³»äººå§“å</span></span><br><span class="line">                <span class="keyword">val</span> displayName =</span><br><span class="line">                    getString(getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME))</span><br><span class="line">                <span class="comment">// è·å–è”ç³»äººæ‰‹æœºå·</span></span><br><span class="line">                <span class="keyword">val</span> number =</span><br><span class="line">                    getString(getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                contactlist.add(Contact(getavadar(), displayName, number))</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            close()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">getavadar</span><span class="params">()</span></span>= <span class="keyword">when</span> ((<span class="number">1.</span><span class="number">.5</span>).random()) &#123;</span><br><span class="line">            <span class="number">1</span> -&gt; R.drawable.mood_1</span><br><span class="line">            <span class="number">2</span> -&gt; R.drawable.mood_2</span><br><span class="line">            <span class="number">3</span> -&gt; R.drawable.mood_3</span><br><span class="line">            <span class="number">4</span> -&gt; R.drawable.mood_4</span><br><span class="line">            <span class="number">5</span> -&gt; R.drawable.mood_5</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span> -&gt; &#123;R.drawable.mood_1&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>2.SendActivity.kt</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lnm011223.my_contacts</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.Manifest</span><br><span class="line"><span class="keyword">import</span> android.content.pm.PackageManager</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle</span><br><span class="line"><span class="keyword">import</span> android.telephony.SmsManager</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast</span><br><span class="line"><span class="keyword">import</span> androidx.core.app.ActivityCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.content.ContextCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowInsetsCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.WindowInsetsControllerCompat</span><br><span class="line"><span class="keyword">import</span> kotlinx.android.synthetic.main.activity_send.*</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SendActivity</span> : <span class="type">AppCompatActivity</span></span>() &#123;</span><br><span class="line">    <span class="keyword">var</span> phonenumber = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">var</span> phonename = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">        setContentView(R.layout.activity_send)</span><br><span class="line">        <span class="keyword">val</span> insetsController = WindowCompat.getInsetsController(</span><br><span class="line">            window, window.decorView</span><br><span class="line">        )</span><br><span class="line">        insetsController?.systemBarsBehavior = WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE</span><br><span class="line">        insetsController?.hide(WindowInsetsCompat.Type.navigationBars())</span><br><span class="line">        toolbar.title = <span class="string">&quot;Send Message&quot;</span></span><br><span class="line">        phonenumber = intent.getStringExtra(<span class="string">&quot;number&quot;</span>).toString()</span><br><span class="line">        phonename = intent.getStringExtra(<span class="string">&quot;name&quot;</span>).toString()</span><br><span class="line">        phonenumbertext.text = phonenumber</span><br><span class="line">        phonetext.text = phonename</span><br><span class="line">        sendbutton.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">if</span> (ContextCompat.checkSelfPermission(<span class="keyword">this</span>, Manifest.permission.SEND_SMS) != PackageManager.PERMISSION_GRANTED) &#123;</span><br><span class="line">                ActivityCompat.requestPermissions(<span class="keyword">this</span>, arrayOf(Manifest.permission.SEND_SMS), <span class="number">1</span>)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">val</span> sms_text = sms_edit.text.toString()</span><br><span class="line">                <span class="keyword">if</span> (sms_text.isNotEmpty() &amp;&amp; phonenumber.isNotEmpty())&#123;</span><br><span class="line">                    <span class="keyword">val</span> smsManager = SmsManager.getDefault()</span><br><span class="line">                    smsManager.sendTextMessage(phonenumber,<span class="literal">null</span>,sms_text,<span class="literal">null</span>,<span class="literal">null</span>)</span><br><span class="line">                    Toast.makeText(<span class="keyword">this</span>,<span class="string">&quot;å‘é€æˆåŠŸ&quot;</span>, Toast.LENGTH_SHORT).show()</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    Toast.makeText(<span class="keyword">this</span>,<span class="string">&quot;å‘é€å†…å®¹ä¸èƒ½ä¸ºç©ºï¼&quot;</span>, Toast.LENGTH_SHORT).show()</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onRequestPermissionsResult</span><span class="params">(requestCode: <span class="type">Int</span>, permissions: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;, grantResults: <span class="type">IntArray</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults)</span><br><span class="line">        <span class="keyword">when</span> (requestCode) &#123;</span><br><span class="line">            <span class="number">1</span> -&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (grantResults.isNotEmpty() &amp;&amp; grantResults[<span class="number">0</span>] == PackageManager.PERMISSION_GRANTED) &#123;</span><br><span class="line">                    <span class="comment">//call()</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    Toast.makeText(<span class="keyword">this</span>, <span class="string">&quot;You denied the permission&quot;</span>, Toast.LENGTH_SHORT).show()</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-Recycleviewç›¸å…³"><a href="#2-Recycleviewç›¸å…³" class="headerlink" title="2.Recycleviewç›¸å…³"></a>2.Recycleviewç›¸å…³</h3><blockquote>
<p>1.contactç±»</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lnm011223.my_contacts</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Contact</span></span>(<span class="keyword">val</span> avadar: <span class="built_in">Int</span>,<span class="keyword">val</span> name: String,<span class="keyword">val</span> number: String)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>2.ContactAdapter</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lnm011223.my_contacts</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.Manifest</span><br><span class="line"><span class="keyword">import</span> android.app.Activity</span><br><span class="line"><span class="keyword">import</span> android.content.Intent</span><br><span class="line"><span class="keyword">import</span> android.content.pm.PackageManager</span><br><span class="line"><span class="keyword">import</span> android.net.Uri</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater</span><br><span class="line"><span class="keyword">import</span> android.view.View</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView</span><br><span class="line"><span class="keyword">import</span> androidx.core.app.ActivityCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.content.ContextCompat</span><br><span class="line"><span class="keyword">import</span> androidx.core.content.ContextCompat.startActivity</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.RecyclerView</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ContactAdapter</span></span>(<span class="keyword">val</span> contactlist: List&lt;Contact&gt;): RecyclerView.Adapter&lt;ContactAdapter.ViewHolder&gt;() &#123;</span><br><span class="line">    <span class="keyword">inner</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewHolder</span></span>(view: View) : RecyclerView.ViewHolder(view) &#123;</span><br><span class="line">        <span class="keyword">val</span> contact_image : ImageView = view.findViewById(R.id.contact_imageView)</span><br><span class="line">        <span class="keyword">val</span> contact_name : TextView = view.findViewById(R.id.contact_name)</span><br><span class="line">        <span class="keyword">val</span> contact_phone : TextView = view.findViewById(R.id.contact_phone)</span><br><span class="line">        <span class="keyword">val</span> phone_image : ImageView = view.findViewById(R.id.phone_image)</span><br><span class="line">        <span class="keyword">val</span> message_image : ImageView = view.findViewById(R.id.message_image)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreateViewHolder</span><span class="params">(parent: <span class="type">ViewGroup</span>, viewType: <span class="type">Int</span>)</span></span>: ViewHolder &#123;</span><br><span class="line">        <span class="keyword">val</span> view = LayoutInflater.from(parent.context).inflate(R.layout.contact_item,parent,<span class="literal">false</span>)</span><br><span class="line">        <span class="keyword">val</span> viewHolder = ViewHolder(view)</span><br><span class="line">        viewHolder.itemView.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">val</span> position = viewHolder.adapterPosition</span><br><span class="line">            <span class="keyword">val</span> contact = contactlist[position]</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (ContextCompat.checkSelfPermission(parent.context, Manifest.permission.CALL_PHONE) != PackageManager.PERMISSION_GRANTED) &#123;</span><br><span class="line">                ActivityCompat.requestPermissions(parent.context <span class="keyword">as</span> Activity, arrayOf(Manifest.permission.CALL_PHONE), <span class="number">1</span>)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">val</span> intent = Intent(Intent.ACTION_CALL)</span><br><span class="line">                intent.<span class="keyword">data</span> = Uri.parse(<span class="string">&quot;tel:<span class="subst">$&#123;contact.number&#125;</span>&quot;</span>)</span><br><span class="line">                parent.context.startActivity(intent)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        viewHolder.itemView.setOnLongClickListener &#123;</span><br><span class="line">            <span class="keyword">val</span> position = viewHolder.adapterPosition</span><br><span class="line">            <span class="keyword">val</span> contact = contactlist[position]</span><br><span class="line">            <span class="keyword">val</span> intent = Intent(parent.context,SendActivity::<span class="keyword">class</span>.java)</span><br><span class="line">            intent.putExtra(<span class="string">&quot;number&quot;</span>,contact.number)</span><br><span class="line">            intent.putExtra(<span class="string">&quot;name&quot;</span>,contact.name)</span><br><span class="line">            parent.context.startActivity(intent)</span><br><span class="line">            <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">        viewHolder.message_image.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">val</span> position = viewHolder.adapterPosition</span><br><span class="line">            <span class="keyword">val</span> contact = contactlist[position]</span><br><span class="line">            <span class="keyword">val</span> intent = Intent(parent.context,SendActivity::<span class="keyword">class</span>.java)</span><br><span class="line">            intent.putExtra(<span class="string">&quot;number&quot;</span>,contact.number)</span><br><span class="line">            intent.putExtra(<span class="string">&quot;name&quot;</span>,contact.name)</span><br><span class="line">            parent.context.startActivity(intent)</span><br><span class="line">        &#125;</span><br><span class="line">        viewHolder.phone_image.setOnClickListener &#123;</span><br><span class="line">            <span class="keyword">val</span> position = viewHolder.adapterPosition</span><br><span class="line">            <span class="keyword">val</span> contact = contactlist[position]</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (ContextCompat.checkSelfPermission(parent.context, Manifest.permission.CALL_PHONE) != PackageManager.PERMISSION_GRANTED) &#123;</span><br><span class="line">                ActivityCompat.requestPermissions(parent.context <span class="keyword">as</span> Activity, arrayOf(Manifest.permission.CALL_PHONE), <span class="number">1</span>)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">val</span> intent = Intent(Intent.ACTION_CALL)</span><br><span class="line">                intent.<span class="keyword">data</span> = Uri.parse(<span class="string">&quot;tel:<span class="subst">$&#123;contact.number&#125;</span>&quot;</span>)</span><br><span class="line">                parent.context.startActivity(intent)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> viewHolder</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onBindViewHolder</span><span class="params">(holder: <span class="type">ContactAdapter</span>.<span class="type">ViewHolder</span>, position: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> contact = contactlist[position]</span><br><span class="line">        holder.contact_image.setImageResource(contact.avadar)</span><br><span class="line">        holder.contact_name.text = contact.name</span><br><span class="line">        holder.contact_phone.text = contact.number</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">getItemCount</span><span class="params">()</span></span> = contactlist.size</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>3.contact_item.xml</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_margin</span>=<span class="string">&quot;5dp&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/contact_imageView&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;50dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;50dp&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/contact_name&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;144dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;26dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#3EB06A&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;20sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">&quot;0.0&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toEndOf</span>=<span class="string">&quot;@+id/contact_imageView&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/contact_phone&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;199dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;24dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;bottom&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">&quot;0.0&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toEndOf</span>=<span class="string">&quot;@+id/contact_imageView&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/contact_name&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/phone_image&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">&quot;@drawable/phone&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toEndOf</span>=<span class="string">&quot;@+id/contact_phone&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/message_image&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">&quot;@drawable/message&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toEndOf</span>=<span class="string">&quot;@+id/phone_image&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="3-å¸ƒå±€æ–‡ä»¶"><a href="#3-å¸ƒå±€æ–‡ä»¶" class="headerlink" title="3.å¸ƒå±€æ–‡ä»¶"></a>3.å¸ƒå±€æ–‡ä»¶</h3><blockquote>
<p>1.activity_main.xml</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;#3EB06A&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.google.android.material.appbar.AppBarLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/appbar&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:elevation</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">androidx.appcompat.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;?attr/actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:theme</span>=<span class="string">&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:elevation</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">com.google.android.material.appbar.AppBarLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.google.android.material.card.MaterialCardView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;?attr/actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:cardCornerRadius</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;-20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/appbar&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">androidx.recyclerview.widget.RecyclerView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/contactview&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginHorizontal</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_margin</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">com.google.android.material.card.MaterialCardView</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>2.activity_send.xml</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.SendActivity&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;#3EB06A&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.google.android.material.appbar.AppBarLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/appbar&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:elevation</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">androidx.appcompat.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;?attr/actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:theme</span>=<span class="string">&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:elevation</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">com.google.android.material.appbar.AppBarLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.google.android.material.card.MaterialCardView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;?attr/actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:cardCornerRadius</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;-20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/appbar&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginEnd</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#3EB06A&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;ç”µè¯ï¼š&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;20sp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/phonetext&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/phonetext&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/phonenumbertext&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">com.google.android.material.textfield.TextInputLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/textField&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                <span class="attr">android:minHeight</span>=<span class="string">&quot;200dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;32dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">&quot;0.333&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/phonenumbertext&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">com.google.android.material.textfield.TextInputEditText</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/sms_edit&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:minHeight</span>=<span class="string">&quot;200dp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">com.google.android.material.textfield.TextInputLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;279dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;267dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@drawable/undraw_new_message_re_fp03&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintBottom_toTopOf</span>=<span class="string">&quot;@+id/sendbutton&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/textField&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintVertical_bias</span>=<span class="string">&quot;0.952&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">com.google.android.material.floatingactionbutton.ExtendedFloatingActionButton</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:backgroundTint</span>=<span class="string">&quot;#3EB06A&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;å‘é€çŸ­ä¿¡&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#ffffff&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:icon</span>=<span class="string">&quot;@drawable/ic_baseline_message_24&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:iconTint</span>=<span class="string">&quot;#ffffff&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/sendbutton&quot;</span></span></span><br><span class="line"><span class="tag">                /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">com.google.android.material.card.MaterialCardView</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="äº”ã€è½¯ä»¶æ“ä½œæµç¨‹"><a href="#äº”ã€è½¯ä»¶æ“ä½œæµç¨‹" class="headerlink" title="äº”ã€è½¯ä»¶æ“ä½œæµç¨‹"></a>äº”ã€è½¯ä»¶æ“ä½œæµç¨‹</h2><p>è¿™ä¹ˆç®€å•å°±æ‡’å¾—ç”»äº†ã€‚ã€‚ã€‚ã€‚</p>
<h2 id="å…­ã€éš¾ç‚¹å’Œè§£å†³æ–¹æ¡ˆ"><a href="#å…­ã€éš¾ç‚¹å’Œè§£å†³æ–¹æ¡ˆ" class="headerlink" title="å…­ã€éš¾ç‚¹å’Œè§£å†³æ–¹æ¡ˆ"></a>å…­ã€éš¾ç‚¹å’Œè§£å†³æ–¹æ¡ˆ</h2><h4 id="1-é•¿æŒ‰è°ƒç”¨é—®é¢˜"><a href="#1-é•¿æŒ‰è°ƒç”¨é—®é¢˜" class="headerlink" title="1.é•¿æŒ‰è°ƒç”¨é—®é¢˜"></a>1.é•¿æŒ‰è°ƒç”¨é—®é¢˜</h4><p>è§£å†³æ–¹æ¡ˆï¼šå’ŒçŸ­æŒ‰<code>setOnClickListener</code>ä¸ä¸€æ ·çš„åœ°æ–¹åœ¨äºï¼Œé•¿æŒ‰<code>setOnLongClickListener</code>éœ€è¦è¿”å›ä¸€ä¸ªboolenå‚æ•°ï¼Œå³è¿”å›ä¸€ä¸ª<code>true</code>ï¼Œåœ¨Javaé‡Œç›´æ¥return trueå°±å¥½,ä½†æ˜¯åœ¨kotliné‡Œï¼Œé»˜è®¤ç”¨çš„æ˜¯lambdaè¡¨è¾¾å¼ï¼Œæœ€åä¸€è¡Œè¯­å¥æ˜¯è¿”å›å€¼ï¼Œæ‰€ä»¥ç›´æ¥<code>true</code>å°±å¥½</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">viewHolder.itemView.setOnLongClickListener &#123;</span><br><span class="line">            <span class="keyword">val</span> position = viewHolder.adapterPosition</span><br><span class="line">            <span class="keyword">val</span> contact = contactlist[position]</span><br><span class="line">            <span class="keyword">val</span> intent = Intent(parent.context,SendActivity::<span class="keyword">class</span>.java)</span><br><span class="line">            intent.putExtra(<span class="string">&quot;number&quot;</span>,contact.number)</span><br><span class="line">            intent.putExtra(<span class="string">&quot;name&quot;</span>,contact.name)</span><br><span class="line">            parent.context.startActivity(intent)</span><br><span class="line">            <span class="literal">true</span></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-éšæœºå¤´åƒ"><a href="#2-éšæœºå¤´åƒ" class="headerlink" title="2.éšæœºå¤´åƒ"></a>2.éšæœºå¤´åƒ</h4><p>è§£å†³æ–¹æ¡ˆï¼šç›´æ¥ç”¨äº†ä¸Šæ¬¡æ—¥è®°çš„ç´ æäº†ï¼ˆkotlinçš„ä»£ç å†™èµ·æ¥çœŸç®€æ´ï¼‰</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">getavadar</span><span class="params">()</span></span>= <span class="keyword">when</span> ((<span class="number">1.</span><span class="number">.5</span>).random()) &#123;</span><br><span class="line">            <span class="number">1</span> -&gt; R.drawable.mood_1</span><br><span class="line">            <span class="number">2</span> -&gt; R.drawable.mood_2</span><br><span class="line">            <span class="number">3</span> -&gt; R.drawable.mood_3</span><br><span class="line">            <span class="number">4</span> -&gt; R.drawable.mood_4</span><br><span class="line">            <span class="number">5</span> -&gt; R.drawable.mood_5</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span> -&gt; &#123;R.drawable.mood_1&#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-éšè—å¯¼èˆªæ é—®é¢˜"><a href="#3-éšè—å¯¼èˆªæ é—®é¢˜" class="headerlink" title="3.éšè—å¯¼èˆªæ é—®é¢˜"></a>3.éšè—å¯¼èˆªæ é—®é¢˜</h4><p>è§£å†³æ–¹æ¡ˆï¼šå¥½åƒç›´æ¥éšè—æœ‰å¯¼èˆªæ çš„æ‰‹æœºä¼šå¯¼è‡´ç•Œé¢æ— æ³•ç‚¹å‡»ï¼Œæ‰€ä»¥åŠ ä¸€ä¸ª<code>BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE</code>å°±å¥½</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> insetsController = WindowCompat.getInsetsController(</span><br><span class="line">            window, window.decorView</span><br><span class="line">        )</span><br><span class="line">        insetsController?.systemBarsBehavior = WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE</span><br><span class="line">        insetsController?.hide(WindowInsetsCompat.Type.navigationBars())</span><br></pre></td></tr></table></figure>

<h2 id="ä¸ƒã€ä¸è¶³ä¹‹å¤„"><a href="#ä¸ƒã€ä¸è¶³ä¹‹å¤„" class="headerlink" title="ä¸ƒã€ä¸è¶³ä¹‹å¤„"></a>ä¸ƒã€ä¸è¶³ä¹‹å¤„</h2><p>åŠŸèƒ½ç®€é™‹å•¦ï¼Œè¿˜æœ‰å¾ˆå¤šå¯ä»¥åšï¼Œæ¯”å¦‚å¢åˆ æ”¹è”ç³»äººï¼Œé€šè¯è®°å½•ï¼ŒçŸ­ä¿¡è¯»å–ä»€ä¹ˆçš„</p>
<h2 id="å…«ã€ä»Šåè®¾æƒ³"><a href="#å…«ã€ä»Šåè®¾æƒ³" class="headerlink" title="å…«ã€ä»Šåè®¾æƒ³"></a>å…«ã€ä»Šåè®¾æƒ³</h2><p>å¯ä»¥ä¸°å¯Œä¸€äº›åŠŸèƒ½</p>
]]></content>
      <categories>
        <category>ä½œä¸š</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>UI</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Šç§»åŠ¨æ™ºèƒ½åº”ç”¨å¼€å‘ã€‹è¯¾ç¨‹ä¸ªäººå®éªŒæŠ¥å‘Š</title>
    <url>/2022/01/05/Android-report/</url>
    <content><![CDATA[<h1 id="ã€Šç§»åŠ¨æ™ºèƒ½åº”ç”¨å¼€å‘ã€‹è¯¾ç¨‹å®éªŒæŠ¥å‘Š"><a href="#ã€Šç§»åŠ¨æ™ºèƒ½åº”ç”¨å¼€å‘ã€‹è¯¾ç¨‹å®éªŒæŠ¥å‘Š" class="headerlink" title="ã€Šç§»åŠ¨æ™ºèƒ½åº”ç”¨å¼€å‘ã€‹è¯¾ç¨‹å®éªŒæŠ¥å‘Š"></a>ã€Šç§»åŠ¨æ™ºèƒ½åº”ç”¨å¼€å‘ã€‹è¯¾ç¨‹å®éªŒæŠ¥å‘Š</h1><h2 id="ä¸€ã€é¡¹ç›®åç§°"><a href="#ä¸€ã€é¡¹ç›®åç§°" class="headerlink" title="ä¸€ã€é¡¹ç›®åç§°"></a>ä¸€ã€é¡¹ç›®åç§°</h2><p><em><strong>Foodâ€™ secret</strong></em>ï¼ˆè¥å…»å’¨è¯¢appï¼‰</p>
<blockquote>
<p><strong>é¡¹ç›®åœ°å€ï¼š</strong><a href="https://github.com/android-app-development-course/2021autumn-A15-Nutrition-consultation">2021autumn-A15-Nutrition-consultation</a></p>
</blockquote>
<h2 id="äºŒã€é¡¹ç›®çš„ä¸»é¢˜ã€è®¾è®¡ç›®çš„"><a href="#äºŒã€é¡¹ç›®çš„ä¸»é¢˜ã€è®¾è®¡ç›®çš„" class="headerlink" title="äºŒã€é¡¹ç›®çš„ä¸»é¢˜ã€è®¾è®¡ç›®çš„"></a>äºŒã€é¡¹ç›®çš„ä¸»é¢˜ã€è®¾è®¡ç›®çš„</h2><p>äº§å“ä¸»è¦ä¾›ç»™æƒ³è¦è§„èŒƒåŒ–è‡ªå·±æ—¥å¸¸é¥®é£Ÿçš„äººç¾¤ï¼Œå¦‚è®¡åˆ’åœ¨å‡è‚¥çš„è‚¥èƒ–äººå£«ï¼Œéœ€è¦æ§åˆ¶é¥®é£Ÿçš„ç—…äººä¹‹ç±»çš„ã€‚è¿™ç±»äººç¾¤éœ€è¦æ¯”è¾ƒç²¾ç¡®çš„çŸ¥é“é£Ÿç‰©çš„è¥å…»æˆåˆ†ï¼Œè®©è‡ªå·±çš„é¥®é£Ÿå¯ä»¥åˆç†çš„æä¾›æ‰€éœ€çš„è¥å…»ã€‚è€Œä¸”è¿™ç±»äººç¾¤æœ‰èƒ½åŠ›ä¹Ÿä¼šæ¥å—ä»˜è´¹çš„å®šåˆ¶åŒ–æœåŠ¡ï¼Œæ¶ˆè´¹æ°´å¹³å¯è§‚ã€‚</p>
<ul>
<li><p><strong>ä¸ºä»€ä¹ˆåšï¼Ÿâ€”â€” â€œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å¼€å‘è¿™ä¸ªäº§å“ï¼Ÿâ€ï¼ˆæˆ˜ç•¥å±‚ï¼‰</strong></p>
<p>è§£å†³äººä»¬å¯¹äºå¿«é€Ÿç²¾å‡†äº†è§£é£Ÿç‰©å…·ä½“è¥å…»æˆåˆ†çš„éœ€æ±‚ã€‚</p>
</li>
<li><p><strong>åšä»€ä¹ˆï¼Ÿâ€”â€” â€œæˆ‘ä»¬è¦å¼€å‘çš„æ˜¯ä»€ä¹ˆï¼Ÿâ€ï¼ˆèŒƒå›´å±‚ï¼‰</strong></p>
<p>æˆ‘ä»¬çš„äº§å“ä¸»è¦ä»¥åŠŸèƒ½æ€§ä¸ºä¸»ï¼Œå‘ç”¨æˆ·ç²¾å‡†å¿«é€Ÿåœ°æä¾›é£Ÿç‰©è¥å…»æˆåˆ†ã€‚</p>
</li>
<li><p><strong>æ€ä¹ˆåšï¼Ÿâ€”â€”â€œæˆ‘ä»¬å¦‚ä½•è¾¾åˆ°ä¸Šè¿°æŠ½è±¡å±‚é¢æ‰€ç¡®å®šçš„é—®é¢˜ï¼Ÿâ€ï¼ˆç»“æ„å±‚ã€æ¡†æ¶å±‚ã€è¡¨ç°å±‚ï¼‰</strong></p>
<p>æˆ‘ä»¬çš„äº§å“å°†é¦–å…ˆç«‹è¶³äºæœ€åŸºæœ¬çš„éœ€æ±‚ç—›ç‚¹â€”â€”é€šè¿‡ç”¨æˆ·è¾“å…¥é£Ÿç‰©åç§°æˆ–è€…ç›¸å…³ä¿¡æ¯è¿”å›ç›¸åº”çš„è¥å…»ä¿¡æ¯ï¼Œä¾›ç”¨æˆ·åˆ©ç”¨è¿™äº›ä¿¡æ¯åˆ¶å®šé¥®é£Ÿæ–¹æ¡ˆã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬å°†è¿½æ±‚å®ç°åŠ¨æ€è®°å½•ç”¨æˆ·æ¯ä¸€å¤©çš„è¥å…»æ‘„å…¥æƒ…å†µï¼Œå¹¶ä¸”é€šè¿‡ç”¨æˆ·è®¾å®šçš„è¥å…»ç›®æ ‡åŠ¨æ€åœ°ä¸ºç”¨æˆ·æä¾›é¥®é£Ÿå»ºè®®ã€‚</p>
</li>
</ul>
<h2 id="ä¸‰ã€è½¯ä»¶ç®€ä»‹-åŒ…æ‹¬è½¯ä»¶çš„åŸºæœ¬ç»“æ„ã€åŸºæœ¬å†…å®¹ã€è¿è¡Œç¯å¢ƒç­‰"><a href="#ä¸‰ã€è½¯ä»¶ç®€ä»‹-åŒ…æ‹¬è½¯ä»¶çš„åŸºæœ¬ç»“æ„ã€åŸºæœ¬å†…å®¹ã€è¿è¡Œç¯å¢ƒç­‰" class="headerlink" title="ä¸‰ã€è½¯ä»¶ç®€ä»‹:åŒ…æ‹¬è½¯ä»¶çš„åŸºæœ¬ç»“æ„ã€åŸºæœ¬å†…å®¹ã€è¿è¡Œç¯å¢ƒç­‰"></a>ä¸‰ã€è½¯ä»¶ç®€ä»‹:åŒ…æ‹¬è½¯ä»¶çš„åŸºæœ¬ç»“æ„ã€åŸºæœ¬å†…å®¹ã€è¿è¡Œç¯å¢ƒç­‰</h2><h3 id="1-åŸºæœ¬å†…å®¹"><a href="#1-åŸºæœ¬å†…å®¹" class="headerlink" title="1.åŸºæœ¬å†…å®¹"></a>1.åŸºæœ¬å†…å®¹</h3><ul>
<li><input checked="" disabled="" type="checkbox"> å¯ä»¥ç›´æ¥é€šè¿‡å…³é”®å­—æ¨¡ç³Šæœç´¢æŸç§é£Ÿç‰©çš„è¥å…»æˆåˆ†</li>
<li><input checked="" disabled="" type="checkbox"> å¯ä»¥åœ¨åˆ†ç±»é¡µé¢æŸ¥çœ‹æ¯ä¸ªåˆ†ç±»ä¸‹æ¯ä¸ªå…·ä½“é£Ÿç‰©çš„è¥å…»æˆåˆ†</li>
<li><input checked="" disabled="" type="checkbox"> å¯ä»¥æŠŠå·²æŸ¥è¯¢åˆ°çš„é£Ÿç‰©æ·»åŠ è¿›åˆ†æåˆ—è¡¨</li>
<li><input checked="" disabled="" type="checkbox"> å¯ä»¥å¯¹åˆ†æåˆ—è¡¨ä¸­çš„é£Ÿç‰©è¿›è¡Œé€‰æ‹©å’Œè¾“å…¥å…·ä½“é£Ÿç”¨é‡</li>
<li><input checked="" disabled="" type="checkbox"> å¯ä»¥æ ¹æ®å½“å‰æ—¶é—´ç»“åˆè¥å…»éœ€æ±‚ç»™å‡ºå»ºè®®</li>
<li><input checked="" disabled="" type="checkbox"> æ¯ä¸ªfragmentéƒ½æœ‰ä¸ä¸€æ ·çš„é¢œè‰²ï¼Œä¼šè‡ªåŠ¨æ”¹å˜ï¼Œä¾§è¾¹æ çš„éƒ¨åˆ†ä¹Ÿä¼šéšä¹‹æ”¹å˜</li>
</ul>
<h3 id="2-åŸºæœ¬ç»“æ„"><a href="#2-åŸºæœ¬ç»“æ„" class="headerlink" title="2.åŸºæœ¬ç»“æ„"></a>2.åŸºæœ¬ç»“æ„</h3><p><strong>å•activityå¤šfragmentç»“æ„</strong></p>
<blockquote>
<p><strong>ç”¨Navigationç»„ä»¶ç®¡ç†7ä¸ªfragmentï¼š</strong></p>
<ul>
<li>home</li>
<li>search</li>
<li>tag</li>
<li>detail</li>
<li>select</li>
<li>analyse</li>
<li>about</li>
</ul>
<p><strong>ä¸»è¦æœ‰å››ä¸ªrecycleviewï¼š</strong></p>
<ul>
<li>Food</li>
<li>Result</li>
<li>Tag</li>
<li>Foodselect</li>
</ul>
</blockquote>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20220105101147601.png"></p>
<h2 id="å››ã€é‡ç‚¹ä»‹ç»æ•´ä¸ªè½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ä¸ªäººçš„ä¸»è¦å·¥ä½œå’Œæ”¶è·"><a href="#å››ã€é‡ç‚¹ä»‹ç»æ•´ä¸ªè½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ä¸ªäººçš„ä¸»è¦å·¥ä½œå’Œæ”¶è·" class="headerlink" title="å››ã€é‡ç‚¹ä»‹ç»æ•´ä¸ªè½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ä¸ªäººçš„ä¸»è¦å·¥ä½œå’Œæ”¶è·"></a>å››ã€é‡ç‚¹ä»‹ç»æ•´ä¸ªè½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ä¸ªäººçš„ä¸»è¦å·¥ä½œå’Œæ”¶è·</h2><h3 id="ä¸»è¦å·¥ä½œï¼š"><a href="#ä¸»è¦å·¥ä½œï¼š" class="headerlink" title="ä¸»è¦å·¥ä½œï¼š"></a>ä¸»è¦å·¥ä½œï¼š</h3><p><strong><u>æœ¬äººè´Ÿè´£çš„æ˜¯UIè®¾è®¡å’Œå®ç°ä»¥åŠéƒ¨åˆ†æ“ä½œé€»è¾‘çš„å®ç°</u></strong></p>
<p>å…·ä½“åŒ…æ‹¬<strong>7ä¸ªfragemnt</strong>çš„å®ç°ä»¥åŠ<strong>4ä¸ªrecycleview</strong>çš„å®ç°ï¼Œè¿˜æœ‰<strong>éƒ¨åˆ†æ•°æ®ä¼ é€’</strong>çš„å·¥ä½œ</p>
<h3 id="æ”¶è·ï¼š"><a href="#æ”¶è·ï¼š" class="headerlink" title="æ”¶è·ï¼š"></a>æ”¶è·ï¼š</h3><ol>
<li>ç†Ÿæ‚‰äº†navigationç»„å»ºçš„åŸºæœ¬ç”¨æ³•ï¼Œå¦‚ä½•åœ¨fragmentä¹‹é—´å¯¼èˆªï¼Œä¼ é€’æ•´ä¸ªç±»çš„æ•°æ®ä¹‹ç±»çš„</li>
<li>è‡ªå·±è®¾è®¡äº†è¿™ä¸ªappçš„UIï¼Œç†Ÿæ‚‰äº†çº¦æŸå¸ƒå±€çš„ä½¿ç”¨å’Œsketchçš„çº¿æ¡†å›¾åŠŸèƒ½</li>
<li>å‘ç°å¾ˆå¤šUIå®ç°æ–¹é¢çš„å°ç»†èŠ‚å’ŒæŠ€å·§ï¼Œå¯¹è‡ªå·±è¿˜æ˜¯æœ‰å¾ˆå¤§å¸®åŠ©çš„ï¼Œæ¯”å¦‚è·å¾—ä¸€äº›å¥—å£³å¸ƒå±€çš„idä¹‹ç±»çš„</li>
</ol>
<h2 id="äº”ã€è®¾è®¡å®è·µä¸­ç›®å‰å­˜åœ¨çš„é—®é¢˜"><a href="#äº”ã€è®¾è®¡å®è·µä¸­ç›®å‰å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="äº”ã€è®¾è®¡å®è·µä¸­ç›®å‰å­˜åœ¨çš„é—®é¢˜"></a>äº”ã€è®¾è®¡å®è·µä¸­ç›®å‰å­˜åœ¨çš„é—®é¢˜</h2><ol>
<li>å› ä¸ºç”¨çš„æ˜¯å…è´¹çš„APIï¼Œæ‰€ä»¥é£Ÿç‰©çš„æ•°æ®ä¸å¤Ÿå…¨é¢ä¸°å¯Œï¼Œå¹¶ä¸èƒ½å¾ˆå¥½çš„æä¾›å®Œæ•´çš„ç”¨æˆ·ä½“éªŒ</li>
<li>åˆ†æç»“æœéƒ¨åˆ†åšå¾—å·®å¼ºäººæ„ï¼Œä¸èƒ½æ ¹æ®ç”¨æˆ·çš„åå¥½æ¥è¿›è¡Œæ›´ç»†åŒ–çš„åˆ†æï¼Œæ¯”å¦‚ä¸è®©ç”¨æˆ·åœ¨ç›¸é‚»çš„æ—¶é—´å†…é‡å¤æé†’åƒæŸç§é£Ÿç‰©</li>
<li>å’Œç”¨æˆ·çš„ä¸ªäººäº¤äº’æ–¹é¢æœ‰å¾…å®Œå–„ï¼Œæ²¡æœ‰æ”¶è—é£Ÿç‰©ï¼Œè®°å½•ç”¨æˆ·ä¹ æƒ¯ï¼Œè®°å½•ä½“é‡è¿™ç§è®©ç”¨æˆ·æ›´èˆ’å¿ƒçš„åŠŸèƒ½</li>
<li>åŠ¨æ•ˆä¸è¶³ï¼Œå› ä¸ºç½‘ä¸Šçš„æ–‡æ¡£å’Œèµ„æºè¾ƒå°‘ï¼Œè€Œä¸”æœ¬é¡¹ç›®çš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯è‡ªå·±å†™çš„ï¼Œé™¤äº†ç½‘ç»œéƒ¨åˆ†å¼•ç”¨äº†åº“ï¼Œæ‰€ä»¥ä¸€äº›åœ°æ–¹å› ä¸ºæŠ€æœ¯é—®é¢˜å¯èƒ½ä¼šä¸æ˜¯å¾ˆå®Œç¾</li>
</ol>
<h2 id="å…­ã€è®¾è®¡å®è·µè¿‡ç¨‹ä¸­çš„è‡ªæˆ‘æ„Ÿæƒ³"><a href="#å…­ã€è®¾è®¡å®è·µè¿‡ç¨‹ä¸­çš„è‡ªæˆ‘æ„Ÿæƒ³" class="headerlink" title="å…­ã€è®¾è®¡å®è·µè¿‡ç¨‹ä¸­çš„è‡ªæˆ‘æ„Ÿæƒ³"></a>å…­ã€è®¾è®¡å®è·µè¿‡ç¨‹ä¸­çš„è‡ªæˆ‘æ„Ÿæƒ³</h2><p>å› ä¸ºé¡¹ç›®æ˜¯æ²¡ç”¨åˆ°åˆ«äººçš„é¡¹ç›®ä»£ç çš„ï¼Œæ‰€ä»¥ä»€ä¹ˆéƒ½æ˜¯è‡ªå·±æ­èµ·æ¥çš„ï¼Œå­¦åˆ°äº†æŒºå¤šä¸œè¥¿çš„å§ã€‚ä½†æ˜¯ä¹Ÿæ¸…æ¥šäº†è‡ªå·±çš„èƒ½åŠ›æ‰€é™ï¼Œæ¯”å¦‚ä¸€äº›æƒ³è¦çš„æ•ˆæœåšä¸å‡ºæ¥ï¼Œç°åœ¨æˆ‘ä¹Ÿä¸çŸ¥é“é‚£ä¸ªmotionçš„å…·ä½“ç”¨æ³•ã€‚ä»€ä¹ˆå…±äº«å…ƒç´ è¿‡åº¦ä¹‹ç±»çš„ï¼Œè¿˜æœ‰å„ç§material designæ•ˆæœçš„å®ç°ï¼Œä¹Ÿæ²¡æ‰¾åˆ°å®˜æ–¹çš„èµ„æºã€‚</p>
<p>ä¸ä»…æ˜¯ä»£ç èƒ½åŠ›çš„ç¼ºå¤±ï¼Œå¯¹UIè®¾è®¡çš„èƒ½åŠ›ä¹Ÿä¸è¶³ï¼Œæ¯”è¾ƒå•è°ƒï¼Œå¯ä»¥å¤šå»dribbleå­¦ä¸€ä¸‹ï¼Œè€Œä¸”ç›®å‰å›¾æ ‡ï¼Œæ’å›¾ä»€ä¹ˆçš„éƒ½æ˜¯ç”¨çš„åˆ«äººçš„ï¼Œè‡ªå·±ä¹Ÿä¸ä¼šç”»ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼Œè·ç¦»æˆ‘çš„æ¢¦æƒ³ï¼ˆæˆä¸ºä¸€ä¸ªèƒ½åšå‡ºå¥½çœ‹ç•Œé¢çš„ç¨‹åºå‘˜ï¼‰è¿˜æœ‰å¾ˆé•¿çš„ä¸€æ®µè·¯å•Šï¼Œä¸¤ç«¯éƒ½çœ‹ä¸åˆ°å¤´ï¼Œå®‰å“ä»£ç è¿™è¾¹è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œä»€ä¹ˆè‡ªå®šä¹‰viewï¼Œè¿˜æœ‰å¥½å¤šjetpackçš„ï¼Œè€Œä¸”è‡ªå·±ä¹Ÿæƒ³å­¦å­¦flutterã€‚æ€»ä¹‹åªèƒ½åŠªåŠ›å­¦äº†ã€‚</p>
]]></content>
  </entry>
  <entry>
    <title>å›¾å½¢å­¦æœŸæœ«å¤ä¹ æ•´ç†</title>
    <url>/2022/01/11/tuxingxuezhengli/</url>
    <content><![CDATA[<h1 id="å›¾å½¢å­¦å¤ä¹ æ•´ç†"><a href="#å›¾å½¢å­¦å¤ä¹ æ•´ç†" class="headerlink" title="å›¾å½¢å­¦å¤ä¹ æ•´ç†"></a>å›¾å½¢å­¦å¤ä¹ æ•´ç†</h1><h2 id="åè¯è§£é‡Šï¼š"><a href="#åè¯è§£é‡Šï¼š" class="headerlink" title="åè¯è§£é‡Šï¼š"></a>åè¯è§£é‡Šï¼š</h2><ul>
<li><p><strong>è®¡ç®—æœºå›¾å½¢å­¦</strong>æ˜¯ç ”ç©¶æ€æ ·åˆ©ç”¨è®¡ç®—æœºæ¥æ˜¾ç¤ºã€ç”Ÿæˆå’Œå¤„ç†å›¾å½¢çš„åŸç†ã€æ–¹æ³•å’ŒæŠ€æœ¯çš„ä¸€é—¨å­¦ç§‘ã€‚</p>
</li>
<li><p>åœ¨è®¡ç®—æœºå›¾å½¢å­¦ä¸­ï¼Œå°†åœ¨ç”¨æˆ·åæ ‡ç³»ä¸­éœ€è¦è¿›è¡Œè§‚å¯Ÿå’Œå¤„ç†çš„ä¸€ä¸ªåæ ‡åŒºåŸŸç§°ä¸º<strong>çª—å£</strong>ï¼ˆWindowï¼‰</p>
</li>
<li><p>å°†çª—å£æ˜ å°„åˆ°æ˜¾ç¤ºè®¾å¤‡ä¸Šçš„åæ ‡åŒºåŸŸç§°ä¸º<strong>è§†åŒº</strong>ï¼ˆViewportï¼‰</p>
</li>
<li><p>ç”¨ç¦»æ•£é‡è¡¨ç¤ºè¿ç»­é‡å¼•èµ·çš„å¤±çœŸï¼Œå°±å«åš<strong>èµ°æ ·ï¼ˆ</strong>Liasing****ï¼‰ã€‚ç”¨äºå‡å°‘æˆ–æ¶ˆé™¤è¿™ç§æ•ˆæœçš„æŠ€æœ¯ï¼Œç§°ä¸ºåèµ°æ ·</p>
</li>
<li><p><strong>ç­ç‚¹</strong>ï¼š</p>
<p>ä¸å¹³è¡ŒäºæŠ•å½±é¢çš„å¹³è¡Œçº¿çš„æŠ•å½±ä¼šæ±‡èšåˆ°ä¸€ä¸ªç‚¹ï¼Œè¿™ä¸ªç‚¹ç§°ä¸º<strong>ç­ç‚¹</strong>(Vanishing Point)ã€‚</p>
<p>åæ ‡è½´æ–¹å‘çš„å¹³è¡Œçº¿åœ¨æŠ•å½±é¢ä¸Šå½¢æˆçš„ç­ç‚¹ç§°ä½œ<strong>ä¸»ç­ç‚¹</strong>ã€‚</p>
<p><strong>ä¸€ç‚¹é€è§†</strong>æœ‰ä¸€ä¸ªä¸»ç­ç‚¹ï¼Œå³æŠ•å½±é¢ä¸ä¸€ä¸ªåæ ‡è½´æ­£äº¤ï¼Œä¸å¦å¤–ä¸¤ä¸ªåæ ‡è½´å¹³è¡Œã€‚</p>
<p><strong>ä¸¤ç‚¹é€è§†</strong>æœ‰ä¸¤ä¸ªä¸»ç­ç‚¹ï¼Œå³æŠ•å½±é¢ä¸ä¸¤ä¸ªåæ ‡è½´ç›¸äº¤ï¼Œä¸å¦ä¸€ä¸ªåæ ‡è½´å¹³è¡Œã€‚</p>
<p><strong>ä¸‰ç‚¹é€è§†</strong>æœ‰ä¸‰ä¸ªä¸»ç­ç‚¹ï¼Œå³æŠ•å½±é¢ä¸ä¸‰ä¸ªåæ ‡è½´éƒ½ç›¸äº¤</p>
</li>
</ul>
<h2 id="è®¡ç®—å…¬å¼ï¼š"><a href="#è®¡ç®—å…¬å¼ï¼š" class="headerlink" title="è®¡ç®—å…¬å¼ï¼š"></a>è®¡ç®—å…¬å¼ï¼š</h2><p>å¸§ç¼“å­˜å¤§å°çš„è®¡ç®—ï¼š</p>
<p>  xæ–¹å‘çš„è±¡ç´ ç‚¹æ•° X yæ–¹å‘çš„è±¡ç´ ç‚¹æ•° X log<sub>2</sub>n/8  </p>
<p> å…¶ä¸­ï¼šnä¸ºé¢œè‰²æ•°æˆ–ç°åº¦ç­‰çº§æ•°</p>
<p>æ¬§æ‹‰å…¬å¼è¯æ˜ç®€å•å¤šé¢ä½“çš„é¡¶ç‚¹æ•°Vã€è¾¹æ•°Eå’Œé¢æ•°Fæ»¡è¶³å¦‚ä¸‹å…³ç³»ï¼šV-E+F=2</p>
<p>ä»¤Hè¡¨ç¤ºå¤šé¢ä½“è¡¨é¢ä¸Šå­”çš„ä¸ªæ•°ï¼ŒGè¡¨ç¤ºè´¯ç©¿å¤šé¢ä½“çš„å­”çš„ä¸ªæ•°ï¼ŒCè¡¨ç¤ºç‹¬ç«‹çš„ã€ä¸ç›¸è¿æ¥çš„å¤šé¢ä½“æ•°ï¼Œåˆ™<strong>æ‰©å±•åçš„æ¬§æ‹‰å…¬å¼</strong>ä¸ºï¼šV-E+F-H=2ï¼ˆC-Gï¼‰</p>
<p>äºŒç»´å‡ ä½•å˜æ¢ï¼š</p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20220111155707809.png" alt="image-20220111155707809"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20220111155739740.png" alt="image-20220111155739740"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20220111155936643.png" alt="image-20220111155936643"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20220111160400711.png" alt="image-20220111160400711"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20220111160320001.png" alt="image-20220111160320001"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20220111160333973.png" alt="image-20220111160333973"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20220111161104529.png" alt="image-20220111161104529"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20220111161116470.png" alt="image-20220111161116470"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20220111161048507.png" alt="image-20220111161048507"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20220111161024555.png" alt="image-20220111161024555"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20220111161334976.png" alt="image-20220111161334976"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20220111161651479.png" alt="image-20220111161651479"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20220111161706608.png" alt="image-20220111161706608"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20220111161719309.png" alt="image-20220111161719309"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20220111161729687.png" alt="image-20220111161729687"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20220111161858850.png" alt="image-20220111161858850"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20220111161907345.png" alt="image-20220111161907345"></p>
<p><img src="https://gitee.com/lnm011223/lnm011223-picture/raw/master/uPic/image-20220111220426467.png" alt="image-20220111220426467"></p>
]]></content>
      <categories>
        <category>å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>å›¾å½¢å­¦</tag>
        <tag>æœŸæœ«å¤ä¹ </tag>
      </tags>
  </entry>
</search>
